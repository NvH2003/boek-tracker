function Sg(s,n){for(var r=0;r<n.length;r++){const a=n[r];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in s)){const c=Object.getOwnPropertyDescriptor(a,u);c&&Object.defineProperty(s,u,c.get?c:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(u){if(u.ep)return;u.ep=!0;const c=r(u);fetch(u.href,c)}})();function ip(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cu={exports:{}},Qi={},Eu={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function xg(){if(tf)return ot;tf=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function k(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,C={};function O(w,T,oe){this.props=w,this.context=T,this.refs=C,this.updater=oe||j}O.prototype.isReactComponent={},O.prototype.setState=function(w,T){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,T,"setState")},O.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function W(){}W.prototype=O.prototype;function M(w,T,oe){this.props=w,this.context=T,this.refs=C,this.updater=oe||j}var V=M.prototype=new W;V.constructor=M,P(V,O.prototype),V.isPureReactComponent=!0;var q=Array.isArray,Le=Object.prototype.hasOwnProperty,ke={current:null},xe={key:!0,ref:!0,__self:!0,__source:!0};function Fe(w,T,oe){var je,Ce={},F=null,Te=null;if(T!=null)for(je in T.ref!==void 0&&(Te=T.ref),T.key!==void 0&&(F=""+T.key),T)Le.call(T,je)&&!xe.hasOwnProperty(je)&&(Ce[je]=T[je]);var J=arguments.length-2;if(J===1)Ce.children=oe;else if(1<J){for(var Me=Array(J),ht=0;ht<J;ht++)Me[ht]=arguments[ht+2];Ce.children=Me}if(w&&w.defaultProps)for(je in J=w.defaultProps,J)Ce[je]===void 0&&(Ce[je]=J[je]);return{$$typeof:s,type:w,key:F,ref:Te,props:Ce,_owner:ke.current}}function Ze(w,T){return{$$typeof:s,type:w.type,key:T,ref:w.ref,props:w.props,_owner:w._owner}}function tt(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function lt(w){var T={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(oe){return T[oe]})}var dt=/\/+/g;function ut(w,T){return typeof w=="object"&&w!==null&&w.key!=null?lt(""+w.key):T.toString(36)}function Qe(w,T,oe,je,Ce){var F=typeof w;(F==="undefined"||F==="boolean")&&(w=null);var Te=!1;if(w===null)Te=!0;else switch(F){case"string":case"number":Te=!0;break;case"object":switch(w.$$typeof){case s:case n:Te=!0}}if(Te)return Te=w,Ce=Ce(Te),w=je===""?"."+ut(Te,0):je,q(Ce)?(oe="",w!=null&&(oe=w.replace(dt,"$&/")+"/"),Qe(Ce,T,oe,"",function(ht){return ht})):Ce!=null&&(tt(Ce)&&(Ce=Ze(Ce,oe+(!Ce.key||Te&&Te.key===Ce.key?"":(""+Ce.key).replace(dt,"$&/")+"/")+w)),T.push(Ce)),1;if(Te=0,je=je===""?".":je+":",q(w))for(var J=0;J<w.length;J++){F=w[J];var Me=je+ut(F,J);Te+=Qe(F,T,oe,Me,Ce)}else if(Me=k(w),typeof Me=="function")for(w=Me.call(w),J=0;!(F=w.next()).done;)F=F.value,Me=je+ut(F,J++),Te+=Qe(F,T,oe,Me,Ce);else if(F==="object")throw T=String(w),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return Te}function He(w,T,oe){if(w==null)return w;var je=[],Ce=0;return Qe(w,je,"","",function(F){return T.call(oe,F,Ce++)}),je}function ze(w){if(w._status===-1){var T=w._result;T=T(),T.then(function(oe){(w._status===0||w._status===-1)&&(w._status=1,w._result=oe)},function(oe){(w._status===0||w._status===-1)&&(w._status=2,w._result=oe)}),w._status===-1&&(w._status=0,w._result=T)}if(w._status===1)return w._result.default;throw w._result}var We={current:null},re={transition:null},fe={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:re,ReactCurrentOwner:ke};function ae(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:He,forEach:function(w,T,oe){He(w,function(){T.apply(this,arguments)},oe)},count:function(w){var T=0;return He(w,function(){T++}),T},toArray:function(w){return He(w,function(T){return T})||[]},only:function(w){if(!tt(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ot.Component=O,ot.Fragment=r,ot.Profiler=u,ot.PureComponent=M,ot.StrictMode=a,ot.Suspense=m,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,ot.act=ae,ot.cloneElement=function(w,T,oe){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var je=P({},w.props),Ce=w.key,F=w.ref,Te=w._owner;if(T!=null){if(T.ref!==void 0&&(F=T.ref,Te=ke.current),T.key!==void 0&&(Ce=""+T.key),w.type&&w.type.defaultProps)var J=w.type.defaultProps;for(Me in T)Le.call(T,Me)&&!xe.hasOwnProperty(Me)&&(je[Me]=T[Me]===void 0&&J!==void 0?J[Me]:T[Me])}var Me=arguments.length-2;if(Me===1)je.children=oe;else if(1<Me){J=Array(Me);for(var ht=0;ht<Me;ht++)J[ht]=arguments[ht+2];je.children=J}return{$$typeof:s,type:w.type,key:Ce,ref:F,props:je,_owner:Te}},ot.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:c,_context:w},w.Consumer=w},ot.createElement=Fe,ot.createFactory=function(w){var T=Fe.bind(null,w);return T.type=w,T},ot.createRef=function(){return{current:null}},ot.forwardRef=function(w){return{$$typeof:p,render:w}},ot.isValidElement=tt,ot.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:ze}},ot.memo=function(w,T){return{$$typeof:v,type:w,compare:T===void 0?null:T}},ot.startTransition=function(w){var T=re.transition;re.transition={};try{w()}finally{re.transition=T}},ot.unstable_act=ae,ot.useCallback=function(w,T){return We.current.useCallback(w,T)},ot.useContext=function(w){return We.current.useContext(w)},ot.useDebugValue=function(){},ot.useDeferredValue=function(w){return We.current.useDeferredValue(w)},ot.useEffect=function(w,T){return We.current.useEffect(w,T)},ot.useId=function(){return We.current.useId()},ot.useImperativeHandle=function(w,T,oe){return We.current.useImperativeHandle(w,T,oe)},ot.useInsertionEffect=function(w,T){return We.current.useInsertionEffect(w,T)},ot.useLayoutEffect=function(w,T){return We.current.useLayoutEffect(w,T)},ot.useMemo=function(w,T){return We.current.useMemo(w,T)},ot.useReducer=function(w,T,oe){return We.current.useReducer(w,T,oe)},ot.useRef=function(w){return We.current.useRef(w)},ot.useState=function(w){return We.current.useState(w)},ot.useSyncExternalStore=function(w,T,oe){return We.current.useSyncExternalStore(w,T,oe)},ot.useTransition=function(){return We.current.useTransition()},ot.version="18.3.1",ot}var nf;function kc(){return nf||(nf=1,Eu.exports=xg()),Eu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rf;function jg(){if(rf)return Qi;rf=1;var s=kc(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var y,S={},k=null,j=null;v!==void 0&&(k=""+v),m.key!==void 0&&(k=""+m.key),m.ref!==void 0&&(j=m.ref);for(y in m)a.call(m,y)&&!c.hasOwnProperty(y)&&(S[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)S[y]===void 0&&(S[y]=m[y]);return{$$typeof:n,type:p,key:k,ref:j,props:S,_owner:u.current}}return Qi.Fragment=r,Qi.jsx=h,Qi.jsxs=h,Qi}var sf;function Ng(){return sf||(sf=1,Cu.exports=jg()),Cu.exports}var o=Ng(),b=kc();const ap=ip(b),Cg=Sg({__proto__:null,default:ap},[b]);var _o={},Tu={exports:{}},xn={},Pu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function Eg(){return af||(af=1,(function(s){function n(re,fe){var ae=re.length;re.push(fe);e:for(;0<ae;){var w=ae-1>>>1,T=re[w];if(0<u(T,fe))re[w]=fe,re[ae]=T,ae=w;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var fe=re[0],ae=re.pop();if(ae!==fe){re[0]=ae;e:for(var w=0,T=re.length,oe=T>>>1;w<oe;){var je=2*(w+1)-1,Ce=re[je],F=je+1,Te=re[F];if(0>u(Ce,ae))F<T&&0>u(Te,Ce)?(re[w]=Te,re[F]=ae,w=F):(re[w]=Ce,re[je]=ae,w=je);else if(F<T&&0>u(Te,ae))re[w]=Te,re[F]=ae,w=F;else break e}}return fe}function u(re,fe){var ae=re.sortIndex-fe.sortIndex;return ae!==0?ae:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var m=[],v=[],y=1,S=null,k=3,j=!1,P=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(re){for(var fe=r(v);fe!==null;){if(fe.callback===null)a(v);else if(fe.startTime<=re)a(v),fe.sortIndex=fe.expirationTime,n(m,fe);else break;fe=r(v)}}function q(re){if(C=!1,V(re),!P)if(r(m)!==null)P=!0,ze(Le);else{var fe=r(v);fe!==null&&We(q,fe.startTime-re)}}function Le(re,fe){P=!1,C&&(C=!1,W(Fe),Fe=-1),j=!0;var ae=k;try{for(V(fe),S=r(m);S!==null&&(!(S.expirationTime>fe)||re&&!lt());){var w=S.callback;if(typeof w=="function"){S.callback=null,k=S.priorityLevel;var T=w(S.expirationTime<=fe);fe=s.unstable_now(),typeof T=="function"?S.callback=T:S===r(m)&&a(m),V(fe)}else a(m);S=r(m)}if(S!==null)var oe=!0;else{var je=r(v);je!==null&&We(q,je.startTime-fe),oe=!1}return oe}finally{S=null,k=ae,j=!1}}var ke=!1,xe=null,Fe=-1,Ze=5,tt=-1;function lt(){return!(s.unstable_now()-tt<Ze)}function dt(){if(xe!==null){var re=s.unstable_now();tt=re;var fe=!0;try{fe=xe(!0,re)}finally{fe?ut():(ke=!1,xe=null)}}else ke=!1}var ut;if(typeof M=="function")ut=function(){M(dt)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,He=Qe.port2;Qe.port1.onmessage=dt,ut=function(){He.postMessage(null)}}else ut=function(){O(dt,0)};function ze(re){xe=re,ke||(ke=!0,ut())}function We(re,fe){Fe=O(function(){re(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(re){re.callback=null},s.unstable_continueExecution=function(){P||j||(P=!0,ze(Le))},s.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ze=0<re?Math.floor(1e3/re):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_getFirstCallbackNode=function(){return r(m)},s.unstable_next=function(re){switch(k){case 1:case 2:case 3:var fe=3;break;default:fe=k}var ae=k;k=fe;try{return re()}finally{k=ae}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=k;k=re;try{return fe()}finally{k=ae}},s.unstable_scheduleCallback=function(re,fe,ae){var w=s.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?w+ae:w):ae=w,re){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ae+T,re={id:y++,callback:fe,priorityLevel:re,startTime:ae,expirationTime:T,sortIndex:-1},ae>w?(re.sortIndex=ae,n(v,re),r(m)===null&&re===r(v)&&(C?(W(Fe),Fe=-1):C=!0,We(q,ae-w))):(re.sortIndex=T,n(m,re),P||j||(P=!0,ze(Le))),re},s.unstable_shouldYield=lt,s.unstable_wrapCallback=function(re){var fe=k;return function(){var ae=k;k=fe;try{return re.apply(this,arguments)}finally{k=ae}}}})(Ru)),Ru}var of;function Tg(){return of||(of=1,Pu.exports=Eg()),Pu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf;function Pg(){if(lf)return xn;lf=1;var s=kc(),n=Tg();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},S={};function k(e){return m.call(S,e)?!0:m.call(y,e)?!1:v.test(e)?S[e]=!0:(y[e]=!0,!1)}function j(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P(e,t,i,l){if(t===null||typeof t>"u"||j(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,i,l,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){O[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];O[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){O[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){O[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){O[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){O[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){O[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){O[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){O[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(W,M);O[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(W,M);O[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(W,M);O[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){O[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),O.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){O[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function V(e,t,i,l){var d=O.hasOwnProperty(t)?O[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P(t,i,d,l)&&(i=null),l||d===null?k(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,l=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var q=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Le=Symbol.for("react.element"),ke=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),Fe=Symbol.for("react.strict_mode"),Ze=Symbol.for("react.profiler"),tt=Symbol.for("react.provider"),lt=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ut=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,w;function T(e){if(w===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var oe=!1;function je(e,t){if(!e||oe)return"";oe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch($){var l=$}Reflect.construct(e,[],t)}else{try{t.call()}catch($){l=$}e.call(t.prototype)}else{try{throw Error()}catch($){l=$}e()}}catch($){if($&&l&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),f=l.stack.split(`
`),g=d.length-1,x=f.length-1;1<=g&&0<=x&&d[g]!==f[x];)x--;for(;1<=g&&0<=x;g--,x--)if(d[g]!==f[x]){if(g!==1||x!==1)do if(g--,x--,0>x||d[g]!==f[x]){var E=`
`+d[g].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=g&&0<=x);break}}}finally{oe=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?T(e):""}function Ce(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=je(e.type,!1),e;case 11:return e=je(e.type.render,!1),e;case 1:return e=je(e.type,!0),e;default:return""}}function F(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xe:return"Fragment";case ke:return"Portal";case Ze:return"Profiler";case Fe:return"StrictMode";case ut:return"Suspense";case Qe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lt:return(e.displayName||"Context")+".Consumer";case tt:return(e._context.displayName||"Context")+".Provider";case dt:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case He:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case ze:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}function Te(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===Fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function J(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Me(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ht(e){var t=Me(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pe(e){e._valueTracker||(e._valueTracker=ht(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Me(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Ge(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function St(e,t){var i=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function _t(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=J(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qt(e,t){t=t.checked,t!=null&&V(e,"checked",t,!1)}function yt(e,t){qt(e,t);var i=J(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?me(e,t.type,i):t.hasOwnProperty("defaultValue")&&me(e,t.type,J(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function me(e,t,i){(t!=="number"||Ge(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var ue=Array.isArray;function ge(e,t,i,l){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+J(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Se(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function be(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(ue(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:J(i)}}function ve(e,t){var i=J(t.value),l=J(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function _e(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ee(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?de(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Z,Ae=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Z=Z||document.createElement("div"),Z.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Z.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pe(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(te).forEach(function(e){nt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),te[t]=te[e]})});function rt(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||te.hasOwnProperty(e)&&te[e]?(""+t).trim():t+"px"}function _(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,d=rt(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,d):e[i]=d}}var z=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B(e,t){if(t){if(z[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Y(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var le=null;function Oe(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ye=null,De=null,st=null;function at(e){if(e=Li(e)){if(typeof ye!="function")throw Error(r(280));var t=e.stateNode;t&&(t=La(t),ye(e.stateNode,e.type,t))}}function Ve(e){De?st?st.push(e):st=[e]:De=e}function A(){if(De){var e=De,t=st;if(st=De=null,at(e),t)for(e=0;e<t.length;e++)at(t[e])}}function K(e,t){return e(t)}function ne(){}var et=!1;function pt(e,t,i){if(et)return e(t,i);et=!0;try{return K(e,t,i)}finally{et=!1,(De!==null||st!==null)&&(ne(),A())}}function wt(e,t){var i=e.stateNode;if(i===null)return null;var l=La(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var xt=!1;if(p)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){xt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch{xt=!1}function Vn(e,t,i,l,d,f,g,x,E){var $=Array.prototype.slice.call(arguments,3);try{t.apply(i,$)}catch(G){this.onError(G)}}var Nn=!1,Kn=null,gn=!1,sr=null,pr={onError:function(e){Nn=!0,Kn=e}};function rs(e,t,i,l,d,f,g,x,E){Nn=!1,Kn=null,Vn.apply(pr,arguments)}function ss(e,t,i,l,d,f,g,x,E){if(rs.apply(this,arguments),Nn){if(Nn){var $=Kn;Nn=!1,Kn=null}else throw Error(r(198));gn||(gn=!0,sr=$)}}function qn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Dt(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nn(e){if(qn(e)!==e)throw Error(r(188))}function ir(e){var t=e.alternate;if(!t){if(t=qn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,l=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return nn(d),e;if(f===l)return nn(d),t;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=d,l=f;else{for(var g=!1,x=d.child;x;){if(x===i){g=!0,i=d,l=f;break}if(x===l){g=!0,l=d,i=f;break}x=x.sibling}if(!g){for(x=f.child;x;){if(x===i){g=!0,i=f,l=d;break}if(x===l){g=!0,l=f,i=d;break}x=x.sibling}if(!g)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function Dn(e){return e=ir(e),e!==null?ga(e):null}function ga(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ga(e);if(t!==null)return t;e=e.sibling}return null}var va=n.unstable_scheduleCallback,ya=n.unstable_cancelCallback,gi=n.unstable_shouldYield,Yo=n.unstable_requestPaint,zt=n.unstable_now,Qo=n.unstable_getCurrentPriorityLevel,vi=n.unstable_ImmediatePriority,wa=n.unstable_UserBlockingPriority,N=n.unstable_NormalPriority,U=n.unstable_LowPriority,X=n.unstable_IdlePriority,se=null,he=null;function it(e){if(he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(se,e,void 0,(e.current.flags&128)===128)}catch{}}var ce=Math.clz32?Math.clz32:Et,kt=Math.log,$e=Math.LN2;function Et(e){return e>>>=0,e===0?32:31-(kt(e)/$e|0)|0}var Tt=64,Qt=4194304;function jt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function on(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var x=g&~d;x!==0?l=jt(x):(f&=g,f!==0&&(l=jt(f)))}else g=i&~d,g!==0?l=jt(g):f!==0&&(l=jt(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-ce(t),d=1<<i,l|=e[i],t&=~d;return l}function Cn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xt(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-ce(f),x=1<<g,E=d[g];E===-1?((x&i)===0||(x&l)!==0)&&(d[g]=Cn(x,t)):E<=t&&(e.expiredLanes|=x),f&=~x}}function In(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ar(){var e=Tt;return Tt<<=1,(Tt&4194240)===0&&(Tt=64),e}function Hn(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ln(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ce(t),e[t]=i}function Cr(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-ce(i),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,i&=~f}}function $n(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-ce(i),d=1<<l;d&t|e[l]&t&&(e[l]|=t),i&=~d}}var mt=0;function Er(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ka,Ns,yi,wi,$c,Xo=!1,ba=[],Tr=null,Pr=null,Rr=null,ki=new Map,bi=new Map,Or=[],Kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uc(e,t){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":ki.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(t.pointerId)}}function _i(e,t,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Li(t),t!==null&&Ns(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function qp(e,t,i,l,d){switch(t){case"focusin":return Tr=_i(Tr,e,t,i,l,d),!0;case"dragenter":return Pr=_i(Pr,e,t,i,l,d),!0;case"mouseover":return Rr=_i(Rr,e,t,i,l,d),!0;case"pointerover":var f=d.pointerId;return ki.set(f,_i(ki.get(f)||null,e,t,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,bi.set(f,_i(bi.get(f)||null,e,t,i,l,d)),!0}return!1}function zc(e){var t=is(e.target);if(t!==null){var i=qn(t);if(i!==null){if(t=i.tag,t===13){if(t=Dt(i),t!==null){e.blockedOn=t,$c(e.priority,function(){yi(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _a(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=el(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);le=l,i.target.dispatchEvent(l),le=null}else return t=Li(i),t!==null&&Ns(t),e.blockedOn=i,!1;t.shift()}return!0}function Bc(e,t,i){_a(e)&&i.delete(t)}function Hp(){Xo=!1,Tr!==null&&_a(Tr)&&(Tr=null),Pr!==null&&_a(Pr)&&(Pr=null),Rr!==null&&_a(Rr)&&(Rr=null),ki.forEach(Bc),bi.forEach(Bc)}function Si(e,t){e.blockedOn===t&&(e.blockedOn=null,Xo||(Xo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Hp)))}function xi(e){function t(d){return Si(d,e)}if(0<ba.length){Si(ba[0],e);for(var i=1;i<ba.length;i++){var l=ba[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Tr!==null&&Si(Tr,e),Pr!==null&&Si(Pr,e),Rr!==null&&Si(Rr,e),ki.forEach(t),bi.forEach(t),i=0;i<Or.length;i++)l=Or[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Or.length&&(i=Or[0],i.blockedOn===null);)zc(i),i.blockedOn===null&&Or.shift()}var Cs=q.ReactCurrentBatchConfig,Sa=!0;function Gp(e,t,i,l){var d=mt,f=Cs.transition;Cs.transition=null;try{mt=1,Zo(e,t,i,l)}finally{mt=d,Cs.transition=f}}function Jp(e,t,i,l){var d=mt,f=Cs.transition;Cs.transition=null;try{mt=4,Zo(e,t,i,l)}finally{mt=d,Cs.transition=f}}function Zo(e,t,i,l){if(Sa){var d=el(e,t,i,l);if(d===null)vl(e,t,l,xa,i),Uc(e,l);else if(qp(d,e,t,i,l))l.stopPropagation();else if(Uc(e,l),t&4&&-1<Kp.indexOf(e)){for(;d!==null;){var f=Li(d);if(f!==null&&ka(f),f=el(e,t,i,l),f===null&&vl(e,t,l,xa,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else vl(e,t,l,null,i)}}var xa=null;function el(e,t,i,l){if(xa=null,e=Oe(l),e=is(e),e!==null)if(t=qn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Dt(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xa=e,null}function Mc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qo()){case vi:return 1;case wa:return 4;case N:case U:return 16;case X:return 536870912;default:return 16}default:return 16}}var Ar=null,tl=null,ja=null;function Fc(){if(ja)return ja;var e,t=tl,i=t.length,l,d="value"in Ar?Ar.value:Ar.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var g=i-e;for(l=1;l<=g&&t[i-l]===d[f-l];l++);return ja=d.slice(e,1<l?1-l:void 0)}function Na(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ca(){return!0}function Wc(){return!1}function En(e){function t(i,l,d,f,g){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(i=e[x],this[x]=i?i(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ca:Wc,this.isPropagationStopped=Wc,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ca)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ca)},persist:function(){},isPersistent:Ca}),t}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=En(Es),ji=ae({},Es,{view:0,detail:0}),Yp=En(ji),rl,sl,Ni,Ea=ae({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:al,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ni&&(Ni&&e.type==="mousemove"?(rl=e.screenX-Ni.screenX,sl=e.screenY-Ni.screenY):sl=rl=0,Ni=e),rl)},movementY:function(e){return"movementY"in e?e.movementY:sl}}),Vc=En(Ea),Qp=ae({},Ea,{dataTransfer:0}),Xp=En(Qp),Zp=ae({},ji,{relatedTarget:0}),il=En(Zp),em=ae({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),tm=En(em),nm=ae({},Es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rm=En(nm),sm=ae({},Es,{data:0}),Kc=En(sm),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=om[e])?!!t[e]:!1}function al(){return lm}var um=ae({},ji,{key:function(e){if(e.key){var t=im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:al,charCode:function(e){return e.type==="keypress"?Na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cm=En(um),dm=ae({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=En(dm),hm=ae({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:al}),fm=En(hm),pm=ae({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),mm=En(pm),gm=ae({},Ea,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vm=En(gm),ym=[9,13,27,32],ol=p&&"CompositionEvent"in window,Ci=null;p&&"documentMode"in document&&(Ci=document.documentMode);var wm=p&&"TextEvent"in window&&!Ci,Hc=p&&(!ol||Ci&&8<Ci&&11>=Ci),Gc=" ",Jc=!1;function Yc(e,t){switch(e){case"keyup":return ym.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ts=!1;function km(e,t){switch(e){case"compositionend":return Qc(t);case"keypress":return t.which!==32?null:(Jc=!0,Gc);case"textInput":return e=t.data,e===Gc&&Jc?null:e;default:return null}}function bm(e,t){if(Ts)return e==="compositionend"||!ol&&Yc(e,t)?(e=Fc(),ja=tl=Ar=null,Ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hc&&t.locale!=="ko"?null:t.data;default:return null}}var _m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_m[e.type]:t==="textarea"}function Zc(e,t,i,l){Ve(l),t=Aa(t,"onChange"),0<t.length&&(i=new nl("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Ei=null,Ti=null;function Sm(e){vd(e,0)}function Ta(e){var t=Ds(e);if(ft(t))return e}function xm(e,t){if(e==="change")return t}var ed=!1;if(p){var ll;if(p){var ul="oninput"in document;if(!ul){var td=document.createElement("div");td.setAttribute("oninput","return;"),ul=typeof td.oninput=="function"}ll=ul}else ll=!1;ed=ll&&(!document.documentMode||9<document.documentMode)}function nd(){Ei&&(Ei.detachEvent("onpropertychange",rd),Ti=Ei=null)}function rd(e){if(e.propertyName==="value"&&Ta(Ti)){var t=[];Zc(t,Ti,e,Oe(e)),pt(Sm,t)}}function jm(e,t,i){e==="focusin"?(nd(),Ei=t,Ti=i,Ei.attachEvent("onpropertychange",rd)):e==="focusout"&&nd()}function Nm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ta(Ti)}function Cm(e,t){if(e==="click")return Ta(t)}function Em(e,t){if(e==="input"||e==="change")return Ta(t)}function Tm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:Tm;function Pi(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!m.call(t,d)||!Gn(e[d],t[d]))return!1}return!0}function sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function id(e,t){var i=sd(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=sd(i)}}function ad(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ad(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function od(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ge(e.document)}return t}function cl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pm(e){var t=od(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ad(i.ownerDocument.documentElement,i)){if(l!==null&&cl(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=id(i,f);var g=id(i,l);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rm=p&&"documentMode"in document&&11>=document.documentMode,Ps=null,dl=null,Ri=null,hl=!1;function ld(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;hl||Ps==null||Ps!==Ge(l)||(l=Ps,"selectionStart"in l&&cl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ri&&Pi(Ri,l)||(Ri=l,l=Aa(dl,"onSelect"),0<l.length&&(t=new nl("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Ps)))}function Pa(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Rs={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},fl={},ud={};p&&(ud=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Ra(e){if(fl[e])return fl[e];if(!Rs[e])return e;var t=Rs[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ud)return fl[e]=t[i];return e}var cd=Ra("animationend"),dd=Ra("animationiteration"),hd=Ra("animationstart"),fd=Ra("transitionend"),pd=new Map,md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){pd.set(e,t),c(t,[e])}for(var pl=0;pl<md.length;pl++){var ml=md[pl],Om=ml.toLowerCase(),Am=ml[0].toUpperCase()+ml.slice(1);Dr(Om,"on"+Am)}Dr(cd,"onAnimationEnd"),Dr(dd,"onAnimationIteration"),Dr(hd,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(fd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function gd(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,ss(l,t,void 0,e),e.currentTarget=null}function vd(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var g=l.length-1;0<=g;g--){var x=l[g],E=x.instance,$=x.currentTarget;if(x=x.listener,E!==f&&d.isPropagationStopped())break e;gd(d,x,$),f=E}else for(g=0;g<l.length;g++){if(x=l[g],E=x.instance,$=x.currentTarget,x=x.listener,E!==f&&d.isPropagationStopped())break e;gd(d,x,$),f=E}}}if(gn)throw e=sr,gn=!1,sr=null,e}function Pt(e,t){var i=t[Sl];i===void 0&&(i=t[Sl]=new Set);var l=e+"__bubble";i.has(l)||(yd(t,e,2,!1),i.add(l))}function gl(e,t,i){var l=0;t&&(l|=4),yd(i,e,l,t)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){if(!e[Oa]){e[Oa]=!0,a.forEach(function(i){i!=="selectionchange"&&(Dm.has(i)||gl(i,!1,e),gl(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oa]||(t[Oa]=!0,gl("selectionchange",!1,t))}}function yd(e,t,i,l){switch(Mc(t)){case 1:var d=Gp;break;case 4:d=Jp;break;default:d=Zo}i=d.bind(null,t,i,e),d=void 0,!xt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function vl(e,t,i,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var x=l.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(g===4)for(g=l.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;g=g.return}for(;x!==null;){if(g=is(x),g===null)return;if(E=g.tag,E===5||E===6){l=f=g;continue e}x=x.parentNode}}l=l.return}pt(function(){var $=f,G=Oe(i),Q=[];e:{var H=pd.get(e);if(H!==void 0){var we=nl,Ee=e;switch(e){case"keypress":if(Na(i)===0)break e;case"keydown":case"keyup":we=cm;break;case"focusin":Ee="focus",we=il;break;case"focusout":Ee="blur",we=il;break;case"beforeblur":case"afterblur":we=il;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=fm;break;case cd:case dd:case hd:we=tm;break;case fd:we=mm;break;case"scroll":we=Yp;break;case"wheel":we=vm;break;case"copy":case"cut":case"paste":we=rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=qc}var Re=(t&4)!==0,Vt=!Re&&e==="scroll",D=Re?H!==null?H+"Capture":null:H;Re=[];for(var R=$,I;R!==null;){I=R;var ie=I.stateNode;if(I.tag===5&&ie!==null&&(I=ie,D!==null&&(ie=wt(R,D),ie!=null&&Re.push(Di(R,ie,I)))),Vt)break;R=R.return}0<Re.length&&(H=new we(H,Ee,null,i,G),Q.push({event:H,listeners:Re}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",H&&i!==le&&(Ee=i.relatedTarget||i.fromElement)&&(is(Ee)||Ee[mr]))break e;if((we||H)&&(H=G.window===G?G:(H=G.ownerDocument)?H.defaultView||H.parentWindow:window,we?(Ee=i.relatedTarget||i.toElement,we=$,Ee=Ee?is(Ee):null,Ee!==null&&(Vt=qn(Ee),Ee!==Vt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(we=null,Ee=$),we!==Ee)){if(Re=Vc,ie="onMouseLeave",D="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Re=qc,ie="onPointerLeave",D="onPointerEnter",R="pointer"),Vt=we==null?H:Ds(we),I=Ee==null?H:Ds(Ee),H=new Re(ie,R+"leave",we,i,G),H.target=Vt,H.relatedTarget=I,ie=null,is(G)===$&&(Re=new Re(D,R+"enter",Ee,i,G),Re.target=I,Re.relatedTarget=Vt,ie=Re),Vt=ie,we&&Ee)t:{for(Re=we,D=Ee,R=0,I=Re;I;I=Os(I))R++;for(I=0,ie=D;ie;ie=Os(ie))I++;for(;0<R-I;)Re=Os(Re),R--;for(;0<I-R;)D=Os(D),I--;for(;R--;){if(Re===D||D!==null&&Re===D.alternate)break t;Re=Os(Re),D=Os(D)}Re=null}else Re=null;we!==null&&wd(Q,H,we,Re,!1),Ee!==null&&Vt!==null&&wd(Q,Vt,Ee,Re,!0)}}e:{if(H=$?Ds($):window,we=H.nodeName&&H.nodeName.toLowerCase(),we==="select"||we==="input"&&H.type==="file")var Ie=xm;else if(Xc(H))if(ed)Ie=Em;else{Ie=Nm;var Ke=jm}else(we=H.nodeName)&&we.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(Ie=Cm);if(Ie&&(Ie=Ie(e,$))){Zc(Q,Ie,i,G);break e}Ke&&Ke(e,H,$),e==="focusout"&&(Ke=H._wrapperState)&&Ke.controlled&&H.type==="number"&&me(H,"number",H.value)}switch(Ke=$?Ds($):window,e){case"focusin":(Xc(Ke)||Ke.contentEditable==="true")&&(Ps=Ke,dl=$,Ri=null);break;case"focusout":Ri=dl=Ps=null;break;case"mousedown":hl=!0;break;case"contextmenu":case"mouseup":case"dragend":hl=!1,ld(Q,i,G);break;case"selectionchange":if(Rm)break;case"keydown":case"keyup":ld(Q,i,G)}var qe;if(ol)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Ts?Yc(e,i)&&(Xe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Xe="onCompositionStart");Xe&&(Hc&&i.locale!=="ko"&&(Ts||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Ts&&(qe=Fc()):(Ar=G,tl="value"in Ar?Ar.value:Ar.textContent,Ts=!0)),Ke=Aa($,Xe),0<Ke.length&&(Xe=new Kc(Xe,e,null,i,G),Q.push({event:Xe,listeners:Ke}),qe?Xe.data=qe:(qe=Qc(i),qe!==null&&(Xe.data=qe)))),(qe=wm?km(e,i):bm(e,i))&&($=Aa($,"onBeforeInput"),0<$.length&&(G=new Kc("onBeforeInput","beforeinput",null,i,G),Q.push({event:G,listeners:$}),G.data=qe))}vd(Q,t)})}function Di(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Aa(e,t){for(var i=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=wt(e,i),f!=null&&l.unshift(Di(e,f,d)),f=wt(e,t),f!=null&&l.push(Di(e,f,d))),e=e.return}return l}function Os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wd(e,t,i,l,d){for(var f=t._reactName,g=[];i!==null&&i!==l;){var x=i,E=x.alternate,$=x.stateNode;if(E!==null&&E===l)break;x.tag===5&&$!==null&&(x=$,d?(E=wt(i,f),E!=null&&g.unshift(Di(i,E,x))):d||(E=wt(i,f),E!=null&&g.push(Di(i,E,x)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var Im=/\r\n?/g,Lm=/\u0000|\uFFFD/g;function kd(e){return(typeof e=="string"?e:""+e).replace(Im,`
`).replace(Lm,"")}function Da(e,t,i){if(t=kd(t),kd(e)!==t&&i)throw Error(r(425))}function Ia(){}var yl=null,wl=null;function kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bl=typeof setTimeout=="function"?setTimeout:void 0,$m=typeof clearTimeout=="function"?clearTimeout:void 0,bd=typeof Promise=="function"?Promise:void 0,Um=typeof queueMicrotask=="function"?queueMicrotask:typeof bd<"u"?function(e){return bd.resolve(null).then(e).catch(zm)}:bl;function zm(e){setTimeout(function(){throw e})}function _l(e,t){var i=t,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(l===0){e.removeChild(d),xi(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=d}while(i);xi(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var As=Math.random().toString(36).slice(2),or="__reactFiber$"+As,Ii="__reactProps$"+As,mr="__reactContainer$"+As,Sl="__reactEvents$"+As,Bm="__reactListeners$"+As,Mm="__reactHandles$"+As;function is(e){var t=e[or];if(t)return t;for(var i=e.parentNode;i;){if(t=i[mr]||i[or]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=_d(e);e!==null;){if(i=e[or])return i;e=_d(e)}return t}e=i,i=e.parentNode}return null}function Li(e){return e=e[or]||e[mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ds(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function La(e){return e[Ii]||null}var xl=[],Is=-1;function Lr(e){return{current:e}}function Rt(e){0>Is||(e.current=xl[Is],xl[Is]=null,Is--)}function Nt(e,t){Is++,xl[Is]=e.current,e.current=t}var $r={},hn=Lr($r),wn=Lr(!1),as=$r;function Ls(e,t){var i=e.type.contextTypes;if(!i)return $r;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in i)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function kn(e){return e=e.childContextTypes,e!=null}function $a(){Rt(wn),Rt(hn)}function Sd(e,t,i){if(hn.current!==$r)throw Error(r(168));Nt(hn,t),Nt(wn,i)}function xd(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(r(108,Te(e)||"Unknown",d));return ae({},i,l)}function Ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$r,as=hn.current,Nt(hn,e),Nt(wn,wn.current),!0}function jd(e,t,i){var l=e.stateNode;if(!l)throw Error(r(169));i?(e=xd(e,t,as),l.__reactInternalMemoizedMergedChildContext=e,Rt(wn),Rt(hn),Nt(hn,e)):Rt(wn),Nt(wn,i)}var gr=null,za=!1,jl=!1;function Nd(e){gr===null?gr=[e]:gr.push(e)}function Fm(e){za=!0,Nd(e)}function Ur(){if(!jl&&gr!==null){jl=!0;var e=0,t=mt;try{var i=gr;for(mt=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}gr=null,za=!1}catch(d){throw gr!==null&&(gr=gr.slice(e+1)),va(vi,Ur),d}finally{mt=t,jl=!1}}return null}var $s=[],Us=0,Ba=null,Ma=0,Un=[],zn=0,os=null,vr=1,yr="";function ls(e,t){$s[Us++]=Ma,$s[Us++]=Ba,Ba=e,Ma=t}function Cd(e,t,i){Un[zn++]=vr,Un[zn++]=yr,Un[zn++]=os,os=e;var l=vr;e=yr;var d=32-ce(l)-1;l&=~(1<<d),i+=1;var f=32-ce(t)+d;if(30<f){var g=d-d%5;f=(l&(1<<g)-1).toString(32),l>>=g,d-=g,vr=1<<32-ce(t)+d|i<<d|l,yr=f+e}else vr=1<<f|i<<d|l,yr=e}function Nl(e){e.return!==null&&(ls(e,1),Cd(e,1,0))}function Cl(e){for(;e===Ba;)Ba=$s[--Us],$s[Us]=null,Ma=$s[--Us],$s[Us]=null;for(;e===os;)os=Un[--zn],Un[zn]=null,yr=Un[--zn],Un[zn]=null,vr=Un[--zn],Un[zn]=null}var Tn=null,Pn=null,It=!1,Jn=null;function Ed(e,t){var i=Wn(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Td(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tn=e,Pn=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tn=e,Pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=os!==null?{id:vr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Wn(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Tn=e,Pn=null,!0):!1;default:return!1}}function El(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tl(e){if(It){var t=Pn;if(t){var i=t;if(!Td(e,t)){if(El(e))throw Error(r(418));t=Ir(i.nextSibling);var l=Tn;t&&Td(e,t)?Ed(l,i):(e.flags=e.flags&-4097|2,It=!1,Tn=e)}}else{if(El(e))throw Error(r(418));e.flags=e.flags&-4097|2,It=!1,Tn=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tn=e}function Fa(e){if(e!==Tn)return!1;if(!It)return Pd(e),It=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kl(e.type,e.memoizedProps)),t&&(t=Pn)){if(El(e))throw Rd(),Error(r(418));for(;t;)Ed(e,t),t=Ir(t.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Pn=Ir(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Pn=null}}else Pn=Tn?Ir(e.stateNode.nextSibling):null;return!0}function Rd(){for(var e=Pn;e;)e=Ir(e.nextSibling)}function zs(){Pn=Tn=null,It=!1}function Pl(e){Jn===null?Jn=[e]:Jn.push(e)}var Wm=q.ReactCurrentBatchConfig;function $i(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var l=i.stateNode}if(!l)throw Error(r(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var x=d.refs;g===null?delete x[f]:x[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Od(e){var t=e._init;return t(e._payload)}function Ad(e){function t(D,R){if(e){var I=D.deletions;I===null?(D.deletions=[R],D.flags|=16):I.push(R)}}function i(D,R){if(!e)return null;for(;R!==null;)t(D,R),R=R.sibling;return null}function l(D,R){for(D=new Map;R!==null;)R.key!==null?D.set(R.key,R):D.set(R.index,R),R=R.sibling;return D}function d(D,R){return D=qr(D,R),D.index=0,D.sibling=null,D}function f(D,R,I){return D.index=I,e?(I=D.alternate,I!==null?(I=I.index,I<R?(D.flags|=2,R):I):(D.flags|=2,R)):(D.flags|=1048576,R)}function g(D){return e&&D.alternate===null&&(D.flags|=2),D}function x(D,R,I,ie){return R===null||R.tag!==6?(R=bu(I,D.mode,ie),R.return=D,R):(R=d(R,I),R.return=D,R)}function E(D,R,I,ie){var Ie=I.type;return Ie===xe?G(D,R,I.props.children,ie,I.key):R!==null&&(R.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ze&&Od(Ie)===R.type)?(ie=d(R,I.props),ie.ref=$i(D,R,I),ie.return=D,ie):(ie=po(I.type,I.key,I.props,null,D.mode,ie),ie.ref=$i(D,R,I),ie.return=D,ie)}function $(D,R,I,ie){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=_u(I,D.mode,ie),R.return=D,R):(R=d(R,I.children||[]),R.return=D,R)}function G(D,R,I,ie,Ie){return R===null||R.tag!==7?(R=gs(I,D.mode,ie,Ie),R.return=D,R):(R=d(R,I),R.return=D,R)}function Q(D,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return R=bu(""+R,D.mode,I),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Le:return I=po(R.type,R.key,R.props,null,D.mode,I),I.ref=$i(D,null,R),I.return=D,I;case ke:return R=_u(R,D.mode,I),R.return=D,R;case ze:var ie=R._init;return Q(D,ie(R._payload),I)}if(ue(R)||fe(R))return R=gs(R,D.mode,I,null),R.return=D,R;Wa(D,R)}return null}function H(D,R,I,ie){var Ie=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Ie!==null?null:x(D,R,""+I,ie);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Le:return I.key===Ie?E(D,R,I,ie):null;case ke:return I.key===Ie?$(D,R,I,ie):null;case ze:return Ie=I._init,H(D,R,Ie(I._payload),ie)}if(ue(I)||fe(I))return Ie!==null?null:G(D,R,I,ie,null);Wa(D,I)}return null}function we(D,R,I,ie,Ie){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return D=D.get(I)||null,x(R,D,""+ie,Ie);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Le:return D=D.get(ie.key===null?I:ie.key)||null,E(R,D,ie,Ie);case ke:return D=D.get(ie.key===null?I:ie.key)||null,$(R,D,ie,Ie);case ze:var Ke=ie._init;return we(D,R,I,Ke(ie._payload),Ie)}if(ue(ie)||fe(ie))return D=D.get(I)||null,G(R,D,ie,Ie,null);Wa(R,ie)}return null}function Ee(D,R,I,ie){for(var Ie=null,Ke=null,qe=R,Xe=R=0,an=null;qe!==null&&Xe<I.length;Xe++){qe.index>Xe?(an=qe,qe=null):an=qe.sibling;var vt=H(D,qe,I[Xe],ie);if(vt===null){qe===null&&(qe=an);break}e&&qe&&vt.alternate===null&&t(D,qe),R=f(vt,R,Xe),Ke===null?Ie=vt:Ke.sibling=vt,Ke=vt,qe=an}if(Xe===I.length)return i(D,qe),It&&ls(D,Xe),Ie;if(qe===null){for(;Xe<I.length;Xe++)qe=Q(D,I[Xe],ie),qe!==null&&(R=f(qe,R,Xe),Ke===null?Ie=qe:Ke.sibling=qe,Ke=qe);return It&&ls(D,Xe),Ie}for(qe=l(D,qe);Xe<I.length;Xe++)an=we(qe,D,Xe,I[Xe],ie),an!==null&&(e&&an.alternate!==null&&qe.delete(an.key===null?Xe:an.key),R=f(an,R,Xe),Ke===null?Ie=an:Ke.sibling=an,Ke=an);return e&&qe.forEach(function(Hr){return t(D,Hr)}),It&&ls(D,Xe),Ie}function Re(D,R,I,ie){var Ie=fe(I);if(typeof Ie!="function")throw Error(r(150));if(I=Ie.call(I),I==null)throw Error(r(151));for(var Ke=Ie=null,qe=R,Xe=R=0,an=null,vt=I.next();qe!==null&&!vt.done;Xe++,vt=I.next()){qe.index>Xe?(an=qe,qe=null):an=qe.sibling;var Hr=H(D,qe,vt.value,ie);if(Hr===null){qe===null&&(qe=an);break}e&&qe&&Hr.alternate===null&&t(D,qe),R=f(Hr,R,Xe),Ke===null?Ie=Hr:Ke.sibling=Hr,Ke=Hr,qe=an}if(vt.done)return i(D,qe),It&&ls(D,Xe),Ie;if(qe===null){for(;!vt.done;Xe++,vt=I.next())vt=Q(D,vt.value,ie),vt!==null&&(R=f(vt,R,Xe),Ke===null?Ie=vt:Ke.sibling=vt,Ke=vt);return It&&ls(D,Xe),Ie}for(qe=l(D,qe);!vt.done;Xe++,vt=I.next())vt=we(qe,D,Xe,vt.value,ie),vt!==null&&(e&&vt.alternate!==null&&qe.delete(vt.key===null?Xe:vt.key),R=f(vt,R,Xe),Ke===null?Ie=vt:Ke.sibling=vt,Ke=vt);return e&&qe.forEach(function(_g){return t(D,_g)}),It&&ls(D,Xe),Ie}function Vt(D,R,I,ie){if(typeof I=="object"&&I!==null&&I.type===xe&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Le:e:{for(var Ie=I.key,Ke=R;Ke!==null;){if(Ke.key===Ie){if(Ie=I.type,Ie===xe){if(Ke.tag===7){i(D,Ke.sibling),R=d(Ke,I.props.children),R.return=D,D=R;break e}}else if(Ke.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ze&&Od(Ie)===Ke.type){i(D,Ke.sibling),R=d(Ke,I.props),R.ref=$i(D,Ke,I),R.return=D,D=R;break e}i(D,Ke);break}else t(D,Ke);Ke=Ke.sibling}I.type===xe?(R=gs(I.props.children,D.mode,ie,I.key),R.return=D,D=R):(ie=po(I.type,I.key,I.props,null,D.mode,ie),ie.ref=$i(D,R,I),ie.return=D,D=ie)}return g(D);case ke:e:{for(Ke=I.key;R!==null;){if(R.key===Ke)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){i(D,R.sibling),R=d(R,I.children||[]),R.return=D,D=R;break e}else{i(D,R);break}else t(D,R);R=R.sibling}R=_u(I,D.mode,ie),R.return=D,D=R}return g(D);case ze:return Ke=I._init,Vt(D,R,Ke(I._payload),ie)}if(ue(I))return Ee(D,R,I,ie);if(fe(I))return Re(D,R,I,ie);Wa(D,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,R!==null&&R.tag===6?(i(D,R.sibling),R=d(R,I),R.return=D,D=R):(i(D,R),R=bu(I,D.mode,ie),R.return=D,D=R),g(D)):i(D,R)}return Vt}var Bs=Ad(!0),Dd=Ad(!1),Va=Lr(null),Ka=null,Ms=null,Rl=null;function Ol(){Rl=Ms=Ka=null}function Al(e){var t=Va.current;Rt(Va),e._currentValue=t}function Dl(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function Fs(e,t){Ka=e,Rl=Ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(bn=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(Rl!==e)if(e={context:e,memoizedValue:t,next:null},Ms===null){if(Ka===null)throw Error(r(308));Ms=e,Ka.dependencies={lanes:0,firstContext:e}}else Ms=Ms.next=e;return t}var us=null;function Il(e){us===null?us=[e]:us.push(e)}function Id(e,t,i,l){var d=t.interleaved;return d===null?(i.next=i,Il(t)):(i.next=d.next,d.next=i),t.interleaved=i,wr(e,l)}function wr(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var zr=!1;function Ll(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ld(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Br(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(gt&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,wr(e,i)}return d=l.interleaved,d===null?(t.next=t,Il(l)):(t.next=d.next,d.next=t),l.interleaved=t,wr(e,i)}function qa(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,$n(e,i)}}function $d(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?d=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Ha(e,t,i,l){var d=e.updateQueue;zr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var E=x,$=E.next;E.next=null,g===null?f=$:g.next=$,g=E;var G=e.alternate;G!==null&&(G=G.updateQueue,x=G.lastBaseUpdate,x!==g&&(x===null?G.firstBaseUpdate=$:x.next=$,G.lastBaseUpdate=E))}if(f!==null){var Q=d.baseState;g=0,G=$=E=null,x=f;do{var H=x.lane,we=x.eventTime;if((l&H)===H){G!==null&&(G=G.next={eventTime:we,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Ee=e,Re=x;switch(H=t,we=i,Re.tag){case 1:if(Ee=Re.payload,typeof Ee=="function"){Q=Ee.call(we,Q,H);break e}Q=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Re.payload,H=typeof Ee=="function"?Ee.call(we,Q,H):Ee,H==null)break e;Q=ae({},Q,H);break e;case 2:zr=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,H=d.effects,H===null?d.effects=[x]:H.push(x))}else we={eventTime:we,lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},G===null?($=G=we,E=Q):G=G.next=we,g|=H;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;H=x,x=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);if(G===null&&(E=Q),d.baseState=E,d.firstBaseUpdate=$,d.lastBaseUpdate=G,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);hs|=g,e.lanes=g,e.memoizedState=Q}}function Ud(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=i,typeof d!="function")throw Error(r(191,d));d.call(l)}}}var Ui={},lr=Lr(Ui),zi=Lr(Ui),Bi=Lr(Ui);function cs(e){if(e===Ui)throw Error(r(174));return e}function $l(e,t){switch(Nt(Bi,t),Nt(zi,e),Nt(lr,Ui),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ee(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ee(t,e)}Rt(lr),Nt(lr,t)}function Ws(){Rt(lr),Rt(zi),Rt(Bi)}function zd(e){cs(Bi.current);var t=cs(lr.current),i=ee(t,e.type);t!==i&&(Nt(zi,e),Nt(lr,i))}function Ul(e){zi.current===e&&(Rt(lr),Rt(zi))}var Bt=Lr(0);function Ga(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zl=[];function Bl(){for(var e=0;e<zl.length;e++)zl[e]._workInProgressVersionPrimary=null;zl.length=0}var Ja=q.ReactCurrentDispatcher,Ml=q.ReactCurrentBatchConfig,ds=0,Mt=null,Zt=null,rn=null,Ya=!1,Mi=!1,Fi=0,Vm=0;function fn(){throw Error(r(321))}function Fl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Gn(e[i],t[i]))return!1;return!0}function Wl(e,t,i,l,d,f){if(ds=f,Mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=e===null||e.memoizedState===null?Gm:Jm,e=i(l,d),Mi){f=0;do{if(Mi=!1,Fi=0,25<=f)throw Error(r(301));f+=1,rn=Zt=null,t.updateQueue=null,Ja.current=Ym,e=i(l,d)}while(Mi)}if(Ja.current=Za,t=Zt!==null&&Zt.next!==null,ds=0,rn=Zt=Mt=null,Ya=!1,t)throw Error(r(300));return e}function Vl(){var e=Fi!==0;return Fi=0,e}function ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Mt.memoizedState=rn=e:rn=rn.next=e,rn}function Mn(){if(Zt===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var t=rn===null?Mt.memoizedState:rn.next;if(t!==null)rn=t,Zt=e;else{if(e===null)throw Error(r(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},rn===null?Mt.memoizedState=rn=e:rn=rn.next=e}return rn}function Wi(e,t){return typeof t=="function"?t(e):t}function Kl(e){var t=Mn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=Zt,d=l.baseQueue,f=i.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}l.baseQueue=d=f,i.pending=null}if(d!==null){f=d.next,l=l.baseState;var x=g=null,E=null,$=f;do{var G=$.lane;if((ds&G)===G)E!==null&&(E=E.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),l=$.hasEagerState?$.eagerState:e(l,$.action);else{var Q={lane:G,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};E===null?(x=E=Q,g=l):E=E.next=Q,Mt.lanes|=G,hs|=G}$=$.next}while($!==null&&$!==f);E===null?g=l:E.next=x,Gn(l,t.memoizedState)||(bn=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=E,i.lastRenderedState=l}if(e=i.interleaved,e!==null){d=e;do f=d.lane,Mt.lanes|=f,hs|=f,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function ql(e){var t=Mn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);Gn(f,t.memoizedState)||(bn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Bd(){}function Md(e,t){var i=Mt,l=Mn(),d=t(),f=!Gn(l.memoizedState,d);if(f&&(l.memoizedState=d,bn=!0),l=l.queue,Hl(Vd.bind(null,i,l,e),[e]),l.getSnapshot!==t||f||rn!==null&&rn.memoizedState.tag&1){if(i.flags|=2048,Vi(9,Wd.bind(null,i,l,d,t),void 0,null),sn===null)throw Error(r(349));(ds&30)!==0||Fd(i,t,d)}return d}function Fd(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Wd(e,t,i,l){t.value=i,t.getSnapshot=l,Kd(t)&&qd(e)}function Vd(e,t,i){return i(function(){Kd(t)&&qd(e)})}function Kd(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Gn(e,i)}catch{return!0}}function qd(e){var t=wr(e,1);t!==null&&Zn(t,e,1,-1)}function Hd(e){var t=ur();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Hm.bind(null,Mt,e),[t.memoizedState,e]}function Vi(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function Gd(){return Mn().memoizedState}function Qa(e,t,i,l){var d=ur();Mt.flags|=e,d.memoizedState=Vi(1|t,i,void 0,l===void 0?null:l)}function Xa(e,t,i,l){var d=Mn();l=l===void 0?null:l;var f=void 0;if(Zt!==null){var g=Zt.memoizedState;if(f=g.destroy,l!==null&&Fl(l,g.deps)){d.memoizedState=Vi(t,i,f,l);return}}Mt.flags|=e,d.memoizedState=Vi(1|t,i,f,l)}function Jd(e,t){return Qa(8390656,8,e,t)}function Hl(e,t){return Xa(2048,8,e,t)}function Yd(e,t){return Xa(4,2,e,t)}function Qd(e,t){return Xa(4,4,e,t)}function Xd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zd(e,t,i){return i=i!=null?i.concat([e]):null,Xa(4,4,Xd.bind(null,t,e),i)}function Gl(){}function eh(e,t){var i=Mn();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&Fl(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function th(e,t){var i=Mn();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&Fl(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function nh(e,t,i){return(ds&21)===0?(e.baseState&&(e.baseState=!1,bn=!0),e.memoizedState=i):(Gn(i,t)||(i=ar(),Mt.lanes|=i,hs|=i,e.baseState=!0),t)}function Km(e,t){var i=mt;mt=i!==0&&4>i?i:4,e(!0);var l=Ml.transition;Ml.transition={};try{e(!1),t()}finally{mt=i,Ml.transition=l}}function rh(){return Mn().memoizedState}function qm(e,t,i){var l=Vr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},sh(e))ih(t,i);else if(i=Id(e,t,i,l),i!==null){var d=yn();Zn(i,e,l,d),ah(i,t,l)}}function Hm(e,t,i){var l=Vr(e),d={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(sh(e))ih(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,x=f(g,i);if(d.hasEagerState=!0,d.eagerState=x,Gn(x,g)){var E=t.interleaved;E===null?(d.next=d,Il(t)):(d.next=E.next,E.next=d),t.interleaved=d;return}}catch{}finally{}i=Id(e,t,d,l),i!==null&&(d=yn(),Zn(i,e,l,d),ah(i,t,l))}}function sh(e){var t=e.alternate;return e===Mt||t!==null&&t===Mt}function ih(e,t){Mi=Ya=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function ah(e,t,i){if((i&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,$n(e,i)}}var Za={readContext:Bn,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},Gm={readContext:Bn,useCallback:function(e,t){return ur().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:Jd,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Qa(4194308,4,Xd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Qa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qa(4,2,e,t)},useMemo:function(e,t){var i=ur();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=ur();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=qm.bind(null,Mt,e),[l.memoizedState,e]},useRef:function(e){var t=ur();return e={current:e},t.memoizedState=e},useState:Hd,useDebugValue:Gl,useDeferredValue:function(e){return ur().memoizedState=e},useTransition:function(){var e=Hd(!1),t=e[0];return e=Km.bind(null,e[1]),ur().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Mt,d=ur();if(It){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),sn===null)throw Error(r(349));(ds&30)!==0||Fd(l,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,Jd(Vd.bind(null,l,f,e),[e]),l.flags|=2048,Vi(9,Wd.bind(null,l,f,i,t),void 0,null),i},useId:function(){var e=ur(),t=sn.identifierPrefix;if(It){var i=yr,l=vr;i=(l&~(1<<32-ce(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=Fi++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Vm++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jm={readContext:Bn,useCallback:eh,useContext:Bn,useEffect:Hl,useImperativeHandle:Zd,useInsertionEffect:Yd,useLayoutEffect:Qd,useMemo:th,useReducer:Kl,useRef:Gd,useState:function(){return Kl(Wi)},useDebugValue:Gl,useDeferredValue:function(e){var t=Mn();return nh(t,Zt.memoizedState,e)},useTransition:function(){var e=Kl(Wi)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Md,useId:rh,unstable_isNewReconciler:!1},Ym={readContext:Bn,useCallback:eh,useContext:Bn,useEffect:Hl,useImperativeHandle:Zd,useInsertionEffect:Yd,useLayoutEffect:Qd,useMemo:th,useReducer:ql,useRef:Gd,useState:function(){return ql(Wi)},useDebugValue:Gl,useDeferredValue:function(e){var t=Mn();return Zt===null?t.memoizedState=e:nh(t,Zt.memoizedState,e)},useTransition:function(){var e=ql(Wi)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Md,useId:rh,unstable_isNewReconciler:!1};function Yn(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Jl(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:ae({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var eo={isMounted:function(e){return(e=e._reactInternals)?qn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=yn(),d=Vr(e),f=kr(l,d);f.payload=t,i!=null&&(f.callback=i),t=Br(e,f,d),t!==null&&(Zn(t,e,d,l),qa(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=yn(),d=Vr(e),f=kr(l,d);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=Br(e,f,d),t!==null&&(Zn(t,e,d,l),qa(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=yn(),l=Vr(e),d=kr(i,l);d.tag=2,t!=null&&(d.callback=t),t=Br(e,d,l),t!==null&&(Zn(t,e,l,i),qa(t,e,l))}};function oh(e,t,i,l,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):t.prototype&&t.prototype.isPureReactComponent?!Pi(i,l)||!Pi(d,f):!0}function lh(e,t,i){var l=!1,d=$r,f=t.contextType;return typeof f=="object"&&f!==null?f=Bn(f):(d=kn(t)?as:hn.current,l=t.contextTypes,f=(l=l!=null)?Ls(e,d):$r),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function uh(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function Yl(e,t,i,l){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},Ll(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=Bn(f):(f=kn(t)?as:hn.current,d.context=Ls(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Jl(e,t,f,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&eo.enqueueReplaceState(d,d.state,null),Ha(e,i,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Vs(e,t){try{var i="",l=t;do i+=Ce(l),l=l.return;while(l);var d=i}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Ql(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Xl(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Qm=typeof WeakMap=="function"?WeakMap:Map;function ch(e,t,i){i=kr(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){oo||(oo=!0,fu=l),Xl(e,t)},i}function dh(e,t,i){i=kr(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;i.payload=function(){return l(d)},i.callback=function(){Xl(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Xl(e,t),typeof l!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function hh(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Qm;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(i)||(d.add(i),e=dg.bind(null,e,t,i),t.then(e,e))}function fh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ph(e,t,i,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=kr(-1,1),t.tag=2,Br(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Xm=q.ReactCurrentOwner,bn=!1;function vn(e,t,i,l){t.child=e===null?Dd(t,null,i,l):Bs(t,e.child,i,l)}function mh(e,t,i,l,d){i=i.render;var f=t.ref;return Fs(t,d),l=Wl(e,t,i,l,f,d),i=Vl(),e!==null&&!bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,br(e,t,d)):(It&&i&&Nl(t),t.flags|=1,vn(e,t,l,d),t.child)}function gh(e,t,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!ku(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,vh(e,t,f,l,d)):(e=po(i.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Pi,i(g,l)&&e.ref===t.ref)return br(e,t,d)}return t.flags|=1,e=qr(f,l),e.ref=t.ref,e.return=t,t.child=e}function vh(e,t,i,l,d){if(e!==null){var f=e.memoizedProps;if(Pi(f,l)&&e.ref===t.ref)if(bn=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(bn=!0);else return t.lanes=e.lanes,br(e,t,d)}return Zl(e,t,i,l,d)}function yh(e,t,i){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(qs,Rn),Rn|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nt(qs,Rn),Rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Nt(qs,Rn),Rn|=l}else f!==null?(l=f.baseLanes|i,t.memoizedState=null):l=i,Nt(qs,Rn),Rn|=l;return vn(e,t,d,i),t.child}function wh(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Zl(e,t,i,l,d){var f=kn(i)?as:hn.current;return f=Ls(t,f),Fs(t,d),i=Wl(e,t,i,l,f,d),l=Vl(),e!==null&&!bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,br(e,t,d)):(It&&l&&Nl(t),t.flags|=1,vn(e,t,i,d),t.child)}function kh(e,t,i,l,d){if(kn(i)){var f=!0;Ua(t)}else f=!1;if(Fs(t,d),t.stateNode===null)no(e,t),lh(t,i,l),Yl(t,i,l,d),l=!0;else if(e===null){var g=t.stateNode,x=t.memoizedProps;g.props=x;var E=g.context,$=i.contextType;typeof $=="object"&&$!==null?$=Bn($):($=kn(i)?as:hn.current,$=Ls(t,$));var G=i.getDerivedStateFromProps,Q=typeof G=="function"||typeof g.getSnapshotBeforeUpdate=="function";Q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==l||E!==$)&&uh(t,g,l,$),zr=!1;var H=t.memoizedState;g.state=H,Ha(t,l,g,d),E=t.memoizedState,x!==l||H!==E||wn.current||zr?(typeof G=="function"&&(Jl(t,i,G,l),E=t.memoizedState),(x=zr||oh(t,i,x,l,H,E,$))?(Q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=E),g.props=l,g.state=E,g.context=$,l=x):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,Ld(e,t),x=t.memoizedProps,$=t.type===t.elementType?x:Yn(t.type,x),g.props=$,Q=t.pendingProps,H=g.context,E=i.contextType,typeof E=="object"&&E!==null?E=Bn(E):(E=kn(i)?as:hn.current,E=Ls(t,E));var we=i.getDerivedStateFromProps;(G=typeof we=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==Q||H!==E)&&uh(t,g,l,E),zr=!1,H=t.memoizedState,g.state=H,Ha(t,l,g,d);var Ee=t.memoizedState;x!==Q||H!==Ee||wn.current||zr?(typeof we=="function"&&(Jl(t,i,we,l),Ee=t.memoizedState),($=zr||oh(t,i,$,l,H,Ee,E)||!1)?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,Ee,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,Ee,E)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Ee),g.props=l,g.state=Ee,g.context=E,l=$):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),l=!1)}return eu(e,t,i,l,f,d)}function eu(e,t,i,l,d,f){wh(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return d&&jd(t,i,!1),br(e,t,f);l=t.stateNode,Xm.current=t;var x=g&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=Bs(t,e.child,null,f),t.child=Bs(t,null,x,f)):vn(e,t,x,f),t.memoizedState=l.state,d&&jd(t,i,!0),t.child}function bh(e){var t=e.stateNode;t.pendingContext?Sd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sd(e,t.context,!1),$l(e,t.containerInfo)}function _h(e,t,i,l,d){return zs(),Pl(d),t.flags|=256,vn(e,t,i,l),t.child}var tu={dehydrated:null,treeContext:null,retryLane:0};function nu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sh(e,t,i){var l=t.pendingProps,d=Bt.current,f=!1,g=(t.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(d&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Nt(Bt,d&1),e===null)return Tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,f?(l=t.mode,f=t.child,g={mode:"hidden",children:g},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=mo(g,l,0,null),e=gs(e,l,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=nu(i),t.memoizedState=tu,e):ru(t,g));if(d=e.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return Zm(e,t,g,l,x,d,i);if(f){f=l.fallback,g=t.mode,d=e.child,x=d.sibling;var E={mode:"hidden",children:l.children};return(g&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=E,t.deletions=null):(l=qr(d,E),l.subtreeFlags=d.subtreeFlags&14680064),x!==null?f=qr(x,f):(f=gs(f,g,i,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,g=e.child.memoizedState,g=g===null?nu(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,t.memoizedState=tu,l}return f=e.child,e=f.sibling,l=qr(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function ru(e,t){return t=mo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function to(e,t,i,l){return l!==null&&Pl(l),Bs(t,e.child,null,i),e=ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zm(e,t,i,l,d,f,g){if(i)return t.flags&256?(t.flags&=-257,l=Ql(Error(r(422))),to(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=mo({mode:"visible",children:l.children},d,0,null),f=gs(f,d,g,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&Bs(t,e.child,null,g),t.child.memoizedState=nu(g),t.memoizedState=tu,f);if((t.mode&1)===0)return to(e,t,g,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var x=l.dgst;return l=x,f=Error(r(419)),l=Ql(f,l,void 0),to(e,t,g,l)}if(x=(g&e.childLanes)!==0,bn||x){if(l=sn,l!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,wr(e,d),Zn(l,e,d,-1))}return wu(),l=Ql(Error(r(421))),to(e,t,g,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=hg.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,Pn=Ir(d.nextSibling),Tn=t,It=!0,Jn=null,e!==null&&(Un[zn++]=vr,Un[zn++]=yr,Un[zn++]=os,vr=e.id,yr=e.overflow,os=t),t=ru(t,l.children),t.flags|=4096,t)}function xh(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Dl(e.return,t,i)}function su(e,t,i,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=d)}function jh(e,t,i){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(vn(e,t,l.children,i),l=Bt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xh(e,i,t);else if(e.tag===19)xh(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Nt(Bt,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Ga(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),su(t,!1,d,i,f);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ga(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}su(t,!0,i,null,f);break;case"together":su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function no(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function br(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),hs|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=qr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=qr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function eg(e,t,i){switch(t.tag){case 3:bh(t),zs();break;case 5:zd(t);break;case 1:kn(t.type)&&Ua(t);break;case 4:$l(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Nt(Va,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Nt(Bt,Bt.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Sh(e,t,i):(Nt(Bt,Bt.current&1),e=br(e,t,i),e!==null?e.sibling:null);Nt(Bt,Bt.current&1);break;case 19:if(l=(i&t.childLanes)!==0,(e.flags&128)!==0){if(l)return jh(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Nt(Bt,Bt.current),l)break;return null;case 22:case 23:return t.lanes=0,yh(e,t,i)}return br(e,t,i)}var Nh,iu,Ch,Eh;Nh=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},iu=function(){},Ch=function(e,t,i,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,cs(lr.current);var f=null;switch(i){case"input":d=St(e,d),l=St(e,l),f=[];break;case"select":d=ae({},d,{value:void 0}),l=ae({},l,{value:void 0}),f=[];break;case"textarea":d=Se(e,d),l=Se(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ia)}B(i,l);var g;i=null;for($ in d)if(!l.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var x=d[$];for(g in x)x.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(u.hasOwnProperty($)?f||(f=[]):(f=f||[]).push($,null));for($ in l){var E=l[$];if(x=d!=null?d[$]:void 0,l.hasOwnProperty($)&&E!==x&&(E!=null||x!=null))if($==="style")if(x){for(g in x)!x.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in E)E.hasOwnProperty(g)&&x[g]!==E[g]&&(i||(i={}),i[g]=E[g])}else i||(f||(f=[]),f.push($,i)),i=E;else $==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,x=x?x.__html:void 0,E!=null&&x!==E&&(f=f||[]).push($,E)):$==="children"?typeof E!="string"&&typeof E!="number"||(f=f||[]).push($,""+E):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(u.hasOwnProperty($)?(E!=null&&$==="onScroll"&&Pt("scroll",e),f||x===E||(f=[])):(f=f||[]).push($,E))}i&&(f=f||[]).push("style",i);var $=f;(t.updateQueue=$)&&(t.flags|=4)}},Eh=function(e,t,i,l){i!==l&&(t.flags|=4)};function Ki(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function tg(e,t,i){var l=t.pendingProps;switch(Cl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(t),null;case 1:return kn(t.type)&&$a(),pn(t),null;case 3:return l=t.stateNode,Ws(),Rt(wn),Rt(hn),Bl(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Fa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jn!==null&&(gu(Jn),Jn=null))),iu(e,t),pn(t),null;case 5:Ul(t);var d=cs(Bi.current);if(i=t.type,e!==null&&t.stateNode!=null)Ch(e,t,i,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(r(166));return pn(t),null}if(e=cs(lr.current),Fa(t)){l=t.stateNode,i=t.type;var f=t.memoizedProps;switch(l[or]=t,l[Ii]=f,e=(t.mode&1)!==0,i){case"dialog":Pt("cancel",l),Pt("close",l);break;case"iframe":case"object":case"embed":Pt("load",l);break;case"video":case"audio":for(d=0;d<Oi.length;d++)Pt(Oi[d],l);break;case"source":Pt("error",l);break;case"img":case"image":case"link":Pt("error",l),Pt("load",l);break;case"details":Pt("toggle",l);break;case"input":_t(l,f),Pt("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Pt("invalid",l);break;case"textarea":be(l,f),Pt("invalid",l)}B(i,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var x=f[g];g==="children"?typeof x=="string"?l.textContent!==x&&(f.suppressHydrationWarning!==!0&&Da(l.textContent,x,e),d=["children",x]):typeof x=="number"&&l.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Da(l.textContent,x,e),d=["children",""+x]):u.hasOwnProperty(g)&&x!=null&&g==="onScroll"&&Pt("scroll",l)}switch(i){case"input":pe(l),L(l,f,!0);break;case"textarea":pe(l),_e(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Ia)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=de(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(i,{is:l.is}):(e=g.createElement(i),i==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,i),e[or]=t,e[Ii]=l,Nh(e,t,!1,!1),t.stateNode=e;e:{switch(g=Y(i,l),i){case"dialog":Pt("cancel",e),Pt("close",e),d=l;break;case"iframe":case"object":case"embed":Pt("load",e),d=l;break;case"video":case"audio":for(d=0;d<Oi.length;d++)Pt(Oi[d],e);d=l;break;case"source":Pt("error",e),d=l;break;case"img":case"image":case"link":Pt("error",e),Pt("load",e),d=l;break;case"details":Pt("toggle",e),d=l;break;case"input":_t(e,l),d=St(e,l),Pt("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=ae({},l,{value:void 0}),Pt("invalid",e);break;case"textarea":be(e,l),d=Se(e,l),Pt("invalid",e);break;default:d=l}B(i,d),x=d;for(f in x)if(x.hasOwnProperty(f)){var E=x[f];f==="style"?_(e,E):f==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Ae(e,E)):f==="children"?typeof E=="string"?(i!=="textarea"||E!=="")&&Pe(e,E):typeof E=="number"&&Pe(e,""+E):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(u.hasOwnProperty(f)?E!=null&&f==="onScroll"&&Pt("scroll",e):E!=null&&V(e,f,E,g))}switch(i){case"input":pe(e),L(e,l,!1);break;case"textarea":pe(e),_e(e);break;case"option":l.value!=null&&e.setAttribute("value",""+J(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?ge(e,!!l.multiple,f,!1):l.defaultValue!=null&&ge(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Ia)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pn(t),null;case 6:if(e&&t.stateNode!=null)Eh(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(r(166));if(i=cs(Bi.current),cs(lr.current),Fa(t)){if(l=t.stateNode,i=t.memoizedProps,l[or]=t,(f=l.nodeValue!==i)&&(e=Tn,e!==null))switch(e.tag){case 3:Da(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Da(l.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[or]=t,t.stateNode=l}return pn(t),null;case 13:if(Rt(Bt),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(It&&Pn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Rd(),zs(),t.flags|=98560,f=!1;else if(f=Fa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[or]=t}else zs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pn(t),f=!1}else Jn!==null&&(gu(Jn),Jn=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Bt.current&1)!==0?en===0&&(en=3):wu())),t.updateQueue!==null&&(t.flags|=4),pn(t),null);case 4:return Ws(),iu(e,t),e===null&&Ai(t.stateNode.containerInfo),pn(t),null;case 10:return Al(t.type._context),pn(t),null;case 17:return kn(t.type)&&$a(),pn(t),null;case 19:if(Rt(Bt),f=t.memoizedState,f===null)return pn(t),null;if(l=(t.flags&128)!==0,g=f.rendering,g===null)if(l)Ki(f,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Ga(e),g!==null){for(t.flags|=128,Ki(f,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)f=i,e=l,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Nt(Bt,Bt.current&1|2),t.child}e=e.sibling}f.tail!==null&&zt()>Hs&&(t.flags|=128,l=!0,Ki(f,!1),t.lanes=4194304)}else{if(!l)if(e=Ga(g),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Ki(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!It)return pn(t),null}else 2*zt()-f.renderingStartTime>Hs&&i!==1073741824&&(t.flags|=128,l=!0,Ki(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(i=f.last,i!==null?i.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=zt(),t.sibling=null,i=Bt.current,Nt(Bt,l?i&1|2:i&1),t):(pn(t),null);case 22:case 23:return yu(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(Rn&1073741824)!==0&&(pn(t),t.subtreeFlags&6&&(t.flags|=8192)):pn(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function ng(e,t){switch(Cl(t),t.tag){case 1:return kn(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ws(),Rt(wn),Rt(hn),Bl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ul(t),null;case 13:if(Rt(Bt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Bt),null;case 4:return Ws(),null;case 10:return Al(t.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var ro=!1,mn=!1,rg=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Ks(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Ft(e,t,l)}else i.current=null}function au(e,t,i){try{i()}catch(l){Ft(e,t,l)}}var Th=!1;function sg(e,t){if(yl=Sa,e=od(),cl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,x=-1,E=-1,$=0,G=0,Q=e,H=null;t:for(;;){for(var we;Q!==i||d!==0&&Q.nodeType!==3||(x=g+d),Q!==f||l!==0&&Q.nodeType!==3||(E=g+l),Q.nodeType===3&&(g+=Q.nodeValue.length),(we=Q.firstChild)!==null;)H=Q,Q=we;for(;;){if(Q===e)break t;if(H===i&&++$===d&&(x=g),H===f&&++G===l&&(E=g),(we=Q.nextSibling)!==null)break;Q=H,H=Q.parentNode}Q=we}i=x===-1||E===-1?null:{start:x,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(wl={focusedElem:e,selectionRange:i},Sa=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var Ee=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Re=Ee.memoizedProps,Vt=Ee.memoizedState,D=t.stateNode,R=D.getSnapshotBeforeUpdate(t.elementType===t.type?Re:Yn(t.type,Re),Vt);D.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ie){Ft(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return Ee=Th,Th=!1,Ee}function qi(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&au(t,i,f)}d=d.next}while(d!==l)}}function so(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function ou(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Ph(e){var t=e.alternate;t!==null&&(e.alternate=null,Ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[or],delete t[Ii],delete t[Sl],delete t[Bm],delete t[Mm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rh(e){return e.tag===5||e.tag===3||e.tag===4}function Oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lu(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ia));else if(l!==4&&(e=e.child,e!==null))for(lu(e,t,i),e=e.sibling;e!==null;)lu(e,t,i),e=e.sibling}function uu(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(uu(e,t,i),e=e.sibling;e!==null;)uu(e,t,i),e=e.sibling}var ln=null,Qn=!1;function Mr(e,t,i){for(i=i.child;i!==null;)Ah(e,t,i),i=i.sibling}function Ah(e,t,i){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(se,i)}catch{}switch(i.tag){case 5:mn||Ks(i,t);case 6:var l=ln,d=Qn;ln=null,Mr(e,t,i),ln=l,Qn=d,ln!==null&&(Qn?(e=ln,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ln.removeChild(i.stateNode));break;case 18:ln!==null&&(Qn?(e=ln,i=i.stateNode,e.nodeType===8?_l(e.parentNode,i):e.nodeType===1&&_l(e,i),xi(e)):_l(ln,i.stateNode));break;case 4:l=ln,d=Qn,ln=i.stateNode.containerInfo,Qn=!0,Mr(e,t,i),ln=l,Qn=d;break;case 0:case 11:case 14:case 15:if(!mn&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&au(i,t,g),d=d.next}while(d!==l)}Mr(e,t,i);break;case 1:if(!mn&&(Ks(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(x){Ft(i,t,x)}Mr(e,t,i);break;case 21:Mr(e,t,i);break;case 22:i.mode&1?(mn=(l=mn)||i.memoizedState!==null,Mr(e,t,i),mn=l):Mr(e,t,i);break;default:Mr(e,t,i)}}function Dh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new rg),t.forEach(function(l){var d=fg.bind(null,e,l);i.has(l)||(i.add(l),l.then(d,d))})}}function Xn(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];try{var f=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 5:ln=x.stateNode,Qn=!1;break e;case 3:ln=x.stateNode.containerInfo,Qn=!0;break e;case 4:ln=x.stateNode.containerInfo,Qn=!0;break e}x=x.return}if(ln===null)throw Error(r(160));Ah(f,g,d),ln=null,Qn=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch($){Ft(d,t,$)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ih(t,e),t=t.sibling}function Ih(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xn(t,e),cr(e),l&4){try{qi(3,e,e.return),so(3,e)}catch(Re){Ft(e,e.return,Re)}try{qi(5,e,e.return)}catch(Re){Ft(e,e.return,Re)}}break;case 1:Xn(t,e),cr(e),l&512&&i!==null&&Ks(i,i.return);break;case 5:if(Xn(t,e),cr(e),l&512&&i!==null&&Ks(i,i.return),e.flags&32){var d=e.stateNode;try{Pe(d,"")}catch(Re){Ft(e,e.return,Re)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,x=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&qt(d,f),Y(x,g);var $=Y(x,f);for(g=0;g<E.length;g+=2){var G=E[g],Q=E[g+1];G==="style"?_(d,Q):G==="dangerouslySetInnerHTML"?Ae(d,Q):G==="children"?Pe(d,Q):V(d,G,Q,$)}switch(x){case"input":yt(d,f);break;case"textarea":ve(d,f);break;case"select":var H=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var we=f.value;we!=null?ge(d,!!f.multiple,we,!1):H!==!!f.multiple&&(f.defaultValue!=null?ge(d,!!f.multiple,f.defaultValue,!0):ge(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ii]=f}catch(Re){Ft(e,e.return,Re)}}break;case 6:if(Xn(t,e),cr(e),l&4){if(e.stateNode===null)throw Error(r(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(Re){Ft(e,e.return,Re)}}break;case 3:if(Xn(t,e),cr(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{xi(t.containerInfo)}catch(Re){Ft(e,e.return,Re)}break;case 4:Xn(t,e),cr(e);break;case 13:Xn(t,e),cr(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(hu=zt())),l&4&&Dh(e);break;case 22:if(G=i!==null&&i.memoizedState!==null,e.mode&1?(mn=($=mn)||G,Xn(t,e),mn=$):Xn(t,e),cr(e),l&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!G&&(e.mode&1)!==0)for(Ne=e,G=e.child;G!==null;){for(Q=Ne=G;Ne!==null;){switch(H=Ne,we=H.child,H.tag){case 0:case 11:case 14:case 15:qi(4,H,H.return);break;case 1:Ks(H,H.return);var Ee=H.stateNode;if(typeof Ee.componentWillUnmount=="function"){l=H,i=H.return;try{t=l,Ee.props=t.memoizedProps,Ee.state=t.memoizedState,Ee.componentWillUnmount()}catch(Re){Ft(l,i,Re)}}break;case 5:Ks(H,H.return);break;case 22:if(H.memoizedState!==null){Uh(Q);continue}}we!==null?(we.return=H,Ne=we):Uh(Q)}G=G.sibling}e:for(G=null,Q=e;;){if(Q.tag===5){if(G===null){G=Q;try{d=Q.stateNode,$?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=Q.stateNode,E=Q.memoizedProps.style,g=E!=null&&E.hasOwnProperty("display")?E.display:null,x.style.display=rt("display",g))}catch(Re){Ft(e,e.return,Re)}}}else if(Q.tag===6){if(G===null)try{Q.stateNode.nodeValue=$?"":Q.memoizedProps}catch(Re){Ft(e,e.return,Re)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;G===Q&&(G=null),Q=Q.return}G===Q&&(G=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Xn(t,e),cr(e),l&4&&Dh(e);break;case 21:break;default:Xn(t,e),cr(e)}}function cr(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Rh(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(Pe(d,""),l.flags&=-33);var f=Oh(e);uu(e,f,d);break;case 3:case 4:var g=l.stateNode.containerInfo,x=Oh(e);lu(e,x,g);break;default:throw Error(r(161))}}catch(E){Ft(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ig(e,t,i){Ne=e,Lh(e)}function Lh(e,t,i){for(var l=(e.mode&1)!==0;Ne!==null;){var d=Ne,f=d.child;if(d.tag===22&&l){var g=d.memoizedState!==null||ro;if(!g){var x=d.alternate,E=x!==null&&x.memoizedState!==null||mn;x=ro;var $=mn;if(ro=g,(mn=E)&&!$)for(Ne=d;Ne!==null;)g=Ne,E=g.child,g.tag===22&&g.memoizedState!==null?zh(d):E!==null?(E.return=g,Ne=E):zh(d);for(;f!==null;)Ne=f,Lh(f),f=f.sibling;Ne=d,ro=x,mn=$}$h(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,Ne=f):$h(e)}}function $h(e){for(;Ne!==null;){var t=Ne;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:mn||so(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!mn)if(i===null)l.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Yn(t.type,i.memoizedProps);l.componentDidUpdate(d,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ud(t,f,l);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ud(t,g,i)}break;case 5:var x=t.stateNode;if(i===null&&t.flags&4){i=x;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&i.focus();break;case"img":E.src&&(i.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var $=t.alternate;if($!==null){var G=$.memoizedState;if(G!==null){var Q=G.dehydrated;Q!==null&&xi(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}mn||t.flags&512&&ou(t)}catch(H){Ft(t,t.return,H)}}if(t===e){Ne=null;break}if(i=t.sibling,i!==null){i.return=t.return,Ne=i;break}Ne=t.return}}function Uh(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ne=i;break}Ne=t.return}}function zh(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{so(4,t)}catch(E){Ft(t,i,E)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(E){Ft(t,d,E)}}var f=t.return;try{ou(t)}catch(E){Ft(t,f,E)}break;case 5:var g=t.return;try{ou(t)}catch(E){Ft(t,g,E)}}}catch(E){Ft(t,t.return,E)}if(t===e){Ne=null;break}var x=t.sibling;if(x!==null){x.return=t.return,Ne=x;break}Ne=t.return}}var ag=Math.ceil,io=q.ReactCurrentDispatcher,cu=q.ReactCurrentOwner,Fn=q.ReactCurrentBatchConfig,gt=0,sn=null,Ht=null,un=0,Rn=0,qs=Lr(0),en=0,Hi=null,hs=0,ao=0,du=0,Gi=null,_n=null,hu=0,Hs=1/0,_r=null,oo=!1,fu=null,Fr=null,lo=!1,Wr=null,uo=0,Ji=0,pu=null,co=-1,ho=0;function yn(){return(gt&6)!==0?zt():co!==-1?co:co=zt()}function Vr(e){return(e.mode&1)===0?1:(gt&2)!==0&&un!==0?un&-un:Wm.transition!==null?(ho===0&&(ho=ar()),ho):(e=mt,e!==0||(e=window.event,e=e===void 0?16:Mc(e.type)),e)}function Zn(e,t,i,l){if(50<Ji)throw Ji=0,pu=null,Error(r(185));Ln(e,i,l),((gt&2)===0||e!==sn)&&(e===sn&&((gt&2)===0&&(ao|=i),en===4&&Kr(e,un)),Sn(e,l),i===1&&gt===0&&(t.mode&1)===0&&(Hs=zt()+500,za&&Ur()))}function Sn(e,t){var i=e.callbackNode;Xt(e,t);var l=on(e,e===sn?un:0);if(l===0)i!==null&&ya(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&ya(i),t===1)e.tag===0?Fm(Mh.bind(null,e)):Nd(Mh.bind(null,e)),Um(function(){(gt&6)===0&&Ur()}),i=null;else{switch(Er(l)){case 1:i=vi;break;case 4:i=wa;break;case 16:i=N;break;case 536870912:i=X;break;default:i=N}i=Jh(i,Bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Bh(e,t){if(co=-1,ho=0,(gt&6)!==0)throw Error(r(327));var i=e.callbackNode;if(Gs()&&e.callbackNode!==i)return null;var l=on(e,e===sn?un:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=fo(e,l);else{t=l;var d=gt;gt|=2;var f=Wh();(sn!==e||un!==t)&&(_r=null,Hs=zt()+500,ps(e,t));do try{ug();break}catch(x){Fh(e,x)}while(!0);Ol(),io.current=f,gt=d,Ht!==null?t=0:(sn=null,un=0,t=en)}if(t!==0){if(t===2&&(d=In(e),d!==0&&(l=d,t=mu(e,d))),t===1)throw i=Hi,ps(e,0),Kr(e,l),Sn(e,zt()),i;if(t===6)Kr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!og(d)&&(t=fo(e,l),t===2&&(f=In(e),f!==0&&(l=f,t=mu(e,f))),t===1))throw i=Hi,ps(e,0),Kr(e,l),Sn(e,zt()),i;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(r(345));case 2:ms(e,_n,_r);break;case 3:if(Kr(e,l),(l&130023424)===l&&(t=hu+500-zt(),10<t)){if(on(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){yn(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=bl(ms.bind(null,e,_n,_r),t);break}ms(e,_n,_r);break;case 4:if(Kr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var g=31-ce(l);f=1<<g,g=t[g],g>d&&(d=g),l&=~f}if(l=d,l=zt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*ag(l/1960))-l,10<l){e.timeoutHandle=bl(ms.bind(null,e,_n,_r),l);break}ms(e,_n,_r);break;case 5:ms(e,_n,_r);break;default:throw Error(r(329))}}}return Sn(e,zt()),e.callbackNode===i?Bh.bind(null,e):null}function mu(e,t){var i=Gi;return e.current.memoizedState.isDehydrated&&(ps(e,t).flags|=256),e=fo(e,t),e!==2&&(t=_n,_n=i,t!==null&&gu(t)),e}function gu(e){_n===null?_n=e:_n.push.apply(_n,e)}function og(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!Gn(f(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kr(e,t){for(t&=~du,t&=~ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ce(t),l=1<<i;e[i]=-1,t&=~l}}function Mh(e){if((gt&6)!==0)throw Error(r(327));Gs();var t=on(e,0);if((t&1)===0)return Sn(e,zt()),null;var i=fo(e,t);if(e.tag!==0&&i===2){var l=In(e);l!==0&&(t=l,i=mu(e,l))}if(i===1)throw i=Hi,ps(e,0),Kr(e,t),Sn(e,zt()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ms(e,_n,_r),Sn(e,zt()),null}function vu(e,t){var i=gt;gt|=1;try{return e(t)}finally{gt=i,gt===0&&(Hs=zt()+500,za&&Ur())}}function fs(e){Wr!==null&&Wr.tag===0&&(gt&6)===0&&Gs();var t=gt;gt|=1;var i=Fn.transition,l=mt;try{if(Fn.transition=null,mt=1,e)return e()}finally{mt=l,Fn.transition=i,gt=t,(gt&6)===0&&Ur()}}function yu(){Rn=qs.current,Rt(qs)}function ps(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,$m(i)),Ht!==null)for(i=Ht.return;i!==null;){var l=i;switch(Cl(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&$a();break;case 3:Ws(),Rt(wn),Rt(hn),Bl();break;case 5:Ul(l);break;case 4:Ws();break;case 13:Rt(Bt);break;case 19:Rt(Bt);break;case 10:Al(l.type._context);break;case 22:case 23:yu()}i=i.return}if(sn=e,Ht=e=qr(e.current,null),un=Rn=t,en=0,Hi=null,du=ao=hs=0,_n=Gi=null,us!==null){for(t=0;t<us.length;t++)if(i=us[t],l=i.interleaved,l!==null){i.interleaved=null;var d=l.next,f=i.pending;if(f!==null){var g=f.next;f.next=d,l.next=g}i.pending=l}us=null}return e}function Fh(e,t){do{var i=Ht;try{if(Ol(),Ja.current=Za,Ya){for(var l=Mt.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ya=!1}if(ds=0,rn=Zt=Mt=null,Mi=!1,Fi=0,cu.current=null,i===null||i.return===null){en=1,Hi=t,Ht=null;break}e:{var f=e,g=i.return,x=i,E=t;if(t=un,x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var $=E,G=x,Q=G.tag;if((G.mode&1)===0&&(Q===0||Q===11||Q===15)){var H=G.alternate;H?(G.updateQueue=H.updateQueue,G.memoizedState=H.memoizedState,G.lanes=H.lanes):(G.updateQueue=null,G.memoizedState=null)}var we=fh(g);if(we!==null){we.flags&=-257,ph(we,g,x,f,t),we.mode&1&&hh(f,$,t),t=we,E=$;var Ee=t.updateQueue;if(Ee===null){var Re=new Set;Re.add(E),t.updateQueue=Re}else Ee.add(E);break e}else{if((t&1)===0){hh(f,$,t),wu();break e}E=Error(r(426))}}else if(It&&x.mode&1){var Vt=fh(g);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),ph(Vt,g,x,f,t),Pl(Vs(E,x));break e}}f=E=Vs(E,x),en!==4&&(en=2),Gi===null?Gi=[f]:Gi.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var D=ch(f,E,t);$d(f,D);break e;case 1:x=E;var R=f.type,I=f.stateNode;if((f.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Fr===null||!Fr.has(I)))){f.flags|=65536,t&=-t,f.lanes|=t;var ie=dh(f,x,t);$d(f,ie);break e}}f=f.return}while(f!==null)}Kh(i)}catch(Ie){t=Ie,Ht===i&&i!==null&&(Ht=i=i.return);continue}break}while(!0)}function Wh(){var e=io.current;return io.current=Za,e===null?Za:e}function wu(){(en===0||en===3||en===2)&&(en=4),sn===null||(hs&268435455)===0&&(ao&268435455)===0||Kr(sn,un)}function fo(e,t){var i=gt;gt|=2;var l=Wh();(sn!==e||un!==t)&&(_r=null,ps(e,t));do try{lg();break}catch(d){Fh(e,d)}while(!0);if(Ol(),gt=i,io.current=l,Ht!==null)throw Error(r(261));return sn=null,un=0,en}function lg(){for(;Ht!==null;)Vh(Ht)}function ug(){for(;Ht!==null&&!gi();)Vh(Ht)}function Vh(e){var t=Gh(e.alternate,e,Rn);e.memoizedProps=e.pendingProps,t===null?Kh(e):Ht=t,cu.current=null}function Kh(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=tg(i,t,Rn),i!==null){Ht=i;return}}else{if(i=ng(i,t),i!==null){i.flags&=32767,Ht=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{en=6,Ht=null;return}}if(t=t.sibling,t!==null){Ht=t;return}Ht=t=e}while(t!==null);en===0&&(en=5)}function ms(e,t,i){var l=mt,d=Fn.transition;try{Fn.transition=null,mt=1,cg(e,t,i,l)}finally{Fn.transition=d,mt=l}return null}function cg(e,t,i,l){do Gs();while(Wr!==null);if((gt&6)!==0)throw Error(r(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Cr(e,f),e===sn&&(Ht=sn=null,un=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||lo||(lo=!0,Jh(N,function(){return Gs(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=Fn.transition,Fn.transition=null;var g=mt;mt=1;var x=gt;gt|=4,cu.current=null,sg(e,i),Ih(i,e),Pm(wl),Sa=!!yl,wl=yl=null,e.current=i,ig(i),Yo(),gt=x,mt=g,Fn.transition=f}else e.current=i;if(lo&&(lo=!1,Wr=e,uo=d),f=e.pendingLanes,f===0&&(Fr=null),it(i.stateNode),Sn(e,zt()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],l(d.value,{componentStack:d.stack,digest:d.digest});if(oo)throw oo=!1,e=fu,fu=null,e;return(uo&1)!==0&&e.tag!==0&&Gs(),f=e.pendingLanes,(f&1)!==0?e===pu?Ji++:(Ji=0,pu=e):Ji=0,Ur(),null}function Gs(){if(Wr!==null){var e=Er(uo),t=Fn.transition,i=mt;try{if(Fn.transition=null,mt=16>e?16:e,Wr===null)var l=!1;else{if(e=Wr,Wr=null,uo=0,(gt&6)!==0)throw Error(r(331));var d=gt;for(gt|=4,Ne=e.current;Ne!==null;){var f=Ne,g=f.child;if((Ne.flags&16)!==0){var x=f.deletions;if(x!==null){for(var E=0;E<x.length;E++){var $=x[E];for(Ne=$;Ne!==null;){var G=Ne;switch(G.tag){case 0:case 11:case 15:qi(8,G,f)}var Q=G.child;if(Q!==null)Q.return=G,Ne=Q;else for(;Ne!==null;){G=Ne;var H=G.sibling,we=G.return;if(Ph(G),G===$){Ne=null;break}if(H!==null){H.return=we,Ne=H;break}Ne=we}}}var Ee=f.alternate;if(Ee!==null){var Re=Ee.child;if(Re!==null){Ee.child=null;do{var Vt=Re.sibling;Re.sibling=null,Re=Vt}while(Re!==null)}}Ne=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Ne=g;else e:for(;Ne!==null;){if(f=Ne,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:qi(9,f,f.return)}var D=f.sibling;if(D!==null){D.return=f.return,Ne=D;break e}Ne=f.return}}var R=e.current;for(Ne=R;Ne!==null;){g=Ne;var I=g.child;if((g.subtreeFlags&2064)!==0&&I!==null)I.return=g,Ne=I;else e:for(g=R;Ne!==null;){if(x=Ne,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:so(9,x)}}catch(Ie){Ft(x,x.return,Ie)}if(x===g){Ne=null;break e}var ie=x.sibling;if(ie!==null){ie.return=x.return,Ne=ie;break e}Ne=x.return}}if(gt=d,Ur(),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(se,e)}catch{}l=!0}return l}finally{mt=i,Fn.transition=t}}return!1}function qh(e,t,i){t=Vs(i,t),t=ch(e,t,1),e=Br(e,t,1),t=yn(),e!==null&&(Ln(e,1,t),Sn(e,t))}function Ft(e,t,i){if(e.tag===3)qh(e,e,i);else for(;t!==null;){if(t.tag===3){qh(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fr===null||!Fr.has(l))){e=Vs(i,e),e=dh(t,e,1),t=Br(t,e,1),e=yn(),t!==null&&(Ln(t,1,e),Sn(t,e));break}}t=t.return}}function dg(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&i,sn===e&&(un&i)===i&&(en===4||en===3&&(un&130023424)===un&&500>zt()-hu?ps(e,0):du|=i),Sn(e,t)}function Hh(e,t){t===0&&((e.mode&1)===0?t=1:(t=Qt,Qt<<=1,(Qt&130023424)===0&&(Qt=4194304)));var i=yn();e=wr(e,t),e!==null&&(Ln(e,t,i),Sn(e,i))}function hg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Hh(e,i)}function fg(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(t),Hh(e,i)}var Gh;Gh=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wn.current)bn=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return bn=!1,eg(e,t,i);bn=(e.flags&131072)!==0}else bn=!1,It&&(t.flags&1048576)!==0&&Cd(t,Ma,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;no(e,t),e=t.pendingProps;var d=Ls(t,hn.current);Fs(t,i),d=Wl(null,t,l,e,d,i);var f=Vl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kn(l)?(f=!0,Ua(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ll(t),d.updater=eo,t.stateNode=d,d._reactInternals=t,Yl(t,l,e,i),t=eu(null,t,l,!0,f,i)):(t.tag=0,It&&f&&Nl(t),vn(null,t,d,i),t=t.child),t;case 16:l=t.elementType;e:{switch(no(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=mg(l),e=Yn(l,e),d){case 0:t=Zl(null,t,l,e,i);break e;case 1:t=kh(null,t,l,e,i);break e;case 11:t=mh(null,t,l,e,i);break e;case 14:t=gh(null,t,l,Yn(l.type,e),i);break e}throw Error(r(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Yn(l,d),Zl(e,t,l,d,i);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Yn(l,d),kh(e,t,l,d,i);case 3:e:{if(bh(t),e===null)throw Error(r(387));l=t.pendingProps,f=t.memoizedState,d=f.element,Ld(e,t),Ha(t,l,null,i);var g=t.memoizedState;if(l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Vs(Error(r(423)),t),t=_h(e,t,l,i,d);break e}else if(l!==d){d=Vs(Error(r(424)),t),t=_h(e,t,l,i,d);break e}else for(Pn=Ir(t.stateNode.containerInfo.firstChild),Tn=t,It=!0,Jn=null,i=Dd(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(zs(),l===d){t=br(e,t,i);break e}vn(e,t,l,i)}t=t.child}return t;case 5:return zd(t),e===null&&Tl(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,kl(l,d)?g=null:f!==null&&kl(l,f)&&(t.flags|=32),wh(e,t),vn(e,t,g,i),t.child;case 6:return e===null&&Tl(t),null;case 13:return Sh(e,t,i);case 4:return $l(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Bs(t,null,l,i):vn(e,t,l,i),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Yn(l,d),mh(e,t,l,d,i);case 7:return vn(e,t,t.pendingProps,i),t.child;case 8:return vn(e,t,t.pendingProps.children,i),t.child;case 12:return vn(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Nt(Va,l._currentValue),l._currentValue=g,f!==null)if(Gn(f.value,g)){if(f.children===d.children&&!wn.current){t=br(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){g=f.child;for(var E=x.firstContext;E!==null;){if(E.context===l){if(f.tag===1){E=kr(-1,i&-i),E.tag=2;var $=f.updateQueue;if($!==null){$=$.shared;var G=$.pending;G===null?E.next=E:(E.next=G.next,G.next=E),$.pending=E}}f.lanes|=i,E=f.alternate,E!==null&&(E.lanes|=i),Dl(f.return,i,t),x.lanes|=i;break}E=E.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(r(341));g.lanes|=i,x=g.alternate,x!==null&&(x.lanes|=i),Dl(g,i,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}vn(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,Fs(t,i),d=Bn(d),l=l(d),t.flags|=1,vn(e,t,l,i),t.child;case 14:return l=t.type,d=Yn(l,t.pendingProps),d=Yn(l.type,d),gh(e,t,l,d,i);case 15:return vh(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Yn(l,d),no(e,t),t.tag=1,kn(l)?(e=!0,Ua(t)):e=!1,Fs(t,i),lh(t,l,d),Yl(t,l,d,i),eu(null,t,l,!0,e,i);case 19:return jh(e,t,i);case 22:return yh(e,t,i)}throw Error(r(156,t.tag))};function Jh(e,t){return va(e,t)}function pg(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,t,i,l){return new pg(e,t,i,l)}function ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mg(e){if(typeof e=="function")return ku(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dt)return 11;if(e===He)return 14}return 2}function qr(e,t){var i=e.alternate;return i===null?(i=Wn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function po(e,t,i,l,d,f){var g=2;if(l=e,typeof e=="function")ku(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case xe:return gs(i.children,d,f,t);case Fe:g=8,d|=8;break;case Ze:return e=Wn(12,i,t,d|2),e.elementType=Ze,e.lanes=f,e;case ut:return e=Wn(13,i,t,d),e.elementType=ut,e.lanes=f,e;case Qe:return e=Wn(19,i,t,d),e.elementType=Qe,e.lanes=f,e;case We:return mo(i,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tt:g=10;break e;case lt:g=9;break e;case dt:g=11;break e;case He:g=14;break e;case ze:g=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Wn(g,i,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function gs(e,t,i,l){return e=Wn(7,e,l,t),e.lanes=i,e}function mo(e,t,i,l){return e=Wn(22,e,l,t),e.elementType=We,e.lanes=i,e.stateNode={isHidden:!1},e}function bu(e,t,i){return e=Wn(6,e,null,t),e.lanes=i,e}function _u(e,t,i){return t=Wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gg(e,t,i,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hn(0),this.expirationTimes=Hn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Su(e,t,i,l,d,f,g,x,E){return e=new gg(e,t,i,x,E),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Wn(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ll(f),e}function vg(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ke,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function Yh(e){if(!e)return $r;e=e._reactInternals;e:{if(qn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(kn(i))return xd(e,i,t)}return t}function Qh(e,t,i,l,d,f,g,x,E){return e=Su(i,l,!0,e,d,f,g,x,E),e.context=Yh(null),i=e.current,l=yn(),d=Vr(i),f=kr(l,d),f.callback=t??null,Br(i,f,d),e.current.lanes=d,Ln(e,d,l),Sn(e,l),e}function go(e,t,i,l){var d=t.current,f=yn(),g=Vr(d);return i=Yh(i),t.context===null?t.context=i:t.pendingContext=i,t=kr(f,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Br(d,t,g),e!==null&&(Zn(e,d,g,f),qa(e,d,g)),g}function vo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function xu(e,t){Xh(e,t),(e=e.alternate)&&Xh(e,t)}function yg(){return null}var Zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}yo.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));go(e,t,null,null)},yo.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fs(function(){go(null,e,null,null)}),t[mr]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=wi();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Or.length&&t!==0&&t<Or[i].priority;i++);Or.splice(i,0,e),i===0&&zc(e)}};function Nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ef(){}function wg(e,t,i,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var $=vo(g);f.call($)}}var g=Qh(t,l,e,0,null,!1,!1,"",ef);return e._reactRootContainer=g,e[mr]=g.current,Ai(e.nodeType===8?e.parentNode:e),fs(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var x=l;l=function(){var $=vo(E);x.call($)}}var E=Su(e,0,!1,null,null,!1,!1,"",ef);return e._reactRootContainer=E,e[mr]=E.current,Ai(e.nodeType===8?e.parentNode:e),fs(function(){go(t,E,i,l)}),E}function ko(e,t,i,l,d){var f=i._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var x=d;d=function(){var E=vo(g);x.call(E)}}go(t,g,e,d)}else g=wg(i,t,e,d,l);return vo(g)}ka=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=jt(t.pendingLanes);i!==0&&($n(t,i|1),Sn(t,zt()),(gt&6)===0&&(Hs=zt()+500,Ur()))}break;case 13:fs(function(){var l=wr(e,1);if(l!==null){var d=yn();Zn(l,e,1,d)}}),xu(e,1)}},Ns=function(e){if(e.tag===13){var t=wr(e,134217728);if(t!==null){var i=yn();Zn(t,e,134217728,i)}xu(e,134217728)}},yi=function(e){if(e.tag===13){var t=Vr(e),i=wr(e,t);if(i!==null){var l=yn();Zn(i,e,t,l)}xu(e,t)}},wi=function(){return mt},$c=function(e,t){var i=mt;try{return mt=e,t()}finally{mt=i}},ye=function(e,t,i){switch(t){case"input":if(yt(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var d=La(l);if(!d)throw Error(r(90));ft(l),yt(l,d)}}}break;case"textarea":ve(e,i);break;case"select":t=i.value,t!=null&&ge(e,!!i.multiple,t,!1)}},K=vu,ne=fs;var kg={usingClientEntryPoint:!1,Events:[Li,Ds,La,Ve,A,vu]},Yi={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bg={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dn(e),e===null?null:e.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||yg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{se=bo.inject(bg),he=bo}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kg,xn.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nu(t))throw Error(r(200));return vg(e,t,null,i)},xn.createRoot=function(e,t){if(!Nu(e))throw Error(r(299));var i=!1,l="",d=Zh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Su(e,1,!1,null,null,i,!1,l,d),e[mr]=t.current,Ai(e.nodeType===8?e.parentNode:e),new ju(t)},xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Dn(t),e=e===null?null:e.stateNode,e},xn.flushSync=function(e){return fs(e)},xn.hydrate=function(e,t,i){if(!wo(t))throw Error(r(200));return ko(null,e,t,!0,i)},xn.hydrateRoot=function(e,t,i){if(!Nu(e))throw Error(r(405));var l=i!=null&&i.hydratedSources||null,d=!1,f="",g=Zh;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=Qh(t,null,e,1,i??null,d,!1,f,g),e[mr]=t.current,Ai(e),l)for(e=0;e<l.length;e++)i=l[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new yo(t)},xn.render=function(e,t,i){if(!wo(t))throw Error(r(200));return ko(null,e,t,!1,i)},xn.unmountComponentAtNode=function(e){if(!wo(e))throw Error(r(40));return e._reactRootContainer?(fs(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0):!1},xn.unstable_batchedUpdates=vu,xn.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!wo(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return ko(e,t,i,!1,l)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var uf;function op(){if(uf)return Tu.exports;uf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Tu.exports=Pg(),Tu.exports}var cf;function Rg(){if(cf)return _o;cf=1;var s=op();return _o.createRoot=s.createRoot,_o.hydrateRoot=s.hydrateRoot,_o}var Og=Rg();const Ag=ip(Og);op();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function na(){return na=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},na.apply(this,arguments)}var Qr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Qr||(Qr={}));const df="popstate";function Dg(s){s===void 0&&(s={});function n(a,u){let{pathname:c,search:h,hash:p}=a.location;return ec("",{pathname:c,search:h,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(a,u){return typeof u=="string"?u:Ao(u)}return Lg(n,r,null,s)}function Kt(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function bc(s,n){if(!s){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ig(){return Math.random().toString(36).substr(2,8)}function hf(s,n){return{usr:s.state,key:s.key,idx:n}}function ec(s,n,r,a){return r===void 0&&(r=null),na({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof n=="string"?ui(n):n,{state:r,key:n&&n.key||a||Ig()})}function Ao(s){let{pathname:n="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function ui(s){let n={};if(s){let r=s.indexOf("#");r>=0&&(n.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(n.search=s.substr(a),s=s.substr(0,a)),s&&(n.pathname=s)}return n}function Lg(s,n,r,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:c=!1}=a,h=u.history,p=Qr.Pop,m=null,v=y();v==null&&(v=0,h.replaceState(na({},h.state,{idx:v}),""));function y(){return(h.state||{idx:null}).idx}function S(){p=Qr.Pop;let O=y(),W=O==null?null:O-v;v=O,m&&m({action:p,location:C.location,delta:W})}function k(O,W){p=Qr.Push;let M=ec(C.location,O,W);v=y()+1;let V=hf(M,v),q=C.createHref(M);try{h.pushState(V,"",q)}catch(Le){if(Le instanceof DOMException&&Le.name==="DataCloneError")throw Le;u.location.assign(q)}c&&m&&m({action:p,location:C.location,delta:1})}function j(O,W){p=Qr.Replace;let M=ec(C.location,O,W);v=y();let V=hf(M,v),q=C.createHref(M);h.replaceState(V,"",q),c&&m&&m({action:p,location:C.location,delta:0})}function P(O){let W=u.location.origin!=="null"?u.location.origin:u.location.href,M=typeof O=="string"?O:Ao(O);return M=M.replace(/ $/,"%20"),Kt(W,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,W)}let C={get action(){return p},get location(){return s(u,h)},listen(O){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(df,S),m=O,()=>{u.removeEventListener(df,S),m=null}},createHref(O){return n(u,O)},createURL:P,encodeLocation(O){let W=P(O);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:k,replace:j,go(O){return h.go(O)}};return C}var ff;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(ff||(ff={}));function $g(s,n,r){return r===void 0&&(r="/"),Ug(s,n,r)}function Ug(s,n,r,a){let u=typeof n=="string"?ui(n):n,c=_c(u.pathname||"/",r);if(c==null)return null;let h=lp(s);zg(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let v=Qg(c);p=Gg(h[m],v)}return p}function lp(s,n,r,a){n===void 0&&(n=[]),r===void 0&&(r=[]),a===void 0&&(a="");let u=(c,h,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(Kt(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let v=Xr([a,m.relativePath]),y=r.concat(m);c.children&&c.children.length>0&&(Kt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),lp(c.children,n,y,v)),!(c.path==null&&!c.index)&&n.push({path:v,score:qg(v,c.index),routesMeta:y})};return s.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))u(c,h);else for(let m of up(c.path))u(c,h,m)}),n}function up(s){let n=s.split("/");if(n.length===0)return[];let[r,...a]=n,u=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return u?[c,""]:[c];let h=up(a.join("/")),p=[];return p.push(...h.map(m=>m===""?c:[c,m].join("/"))),u&&p.push(...h),p.map(m=>s.startsWith("/")&&m===""?"/":m)}function zg(s){s.sort((n,r)=>n.score!==r.score?r.score-n.score:Hg(n.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Bg=/^:[\w-]+$/,Mg=3,Fg=2,Wg=1,Vg=10,Kg=-2,pf=s=>s==="*";function qg(s,n){let r=s.split("/"),a=r.length;return r.some(pf)&&(a+=Kg),n&&(a+=Fg),r.filter(u=>!pf(u)).reduce((u,c)=>u+(Bg.test(c)?Mg:c===""?Wg:Vg),a)}function Hg(s,n){return s.length===n.length&&s.slice(0,-1).every((a,u)=>a===n[u])?s[s.length-1]-n[n.length-1]:0}function Gg(s,n,r){let{routesMeta:a}=s,u={},c="/",h=[];for(let p=0;p<a.length;++p){let m=a[p],v=p===a.length-1,y=c==="/"?n:n.slice(c.length)||"/",S=Jg({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},y),k=m.route;if(!S)return null;Object.assign(u,S.params),h.push({params:u,pathname:Xr([c,S.pathname]),pathnameBase:nv(Xr([c,S.pathnameBase])),route:k}),S.pathnameBase!=="/"&&(c=Xr([c,S.pathnameBase]))}return h}function Jg(s,n){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=Yg(s.path,s.caseSensitive,s.end),u=n.match(r);if(!u)return null;let c=u[0],h=c.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:a.reduce((v,y,S)=>{let{paramName:k,isOptional:j}=y;if(k==="*"){let C=p[S]||"";h=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const P=p[S];return j&&!P?v[k]=void 0:v[k]=(P||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:s}}function Yg(s,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),bc(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],u="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(a.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),u+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":s!==""&&s!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),a]}function Qg(s){try{return s.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return bc(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),s}}function _c(s,n){if(n==="/")return s;if(!s.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}const Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=s=>Xg.test(s);function ev(s,n){n===void 0&&(n="/");let{pathname:r,search:a="",hash:u=""}=typeof s=="string"?ui(s):s,c;if(r)if(Zg(r))c=r;else{if(r.includes("//")){let h=r;r=r.replace(/\/\/+/g,"/"),bc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+r))}r.startsWith("/")?c=mf(r.substring(1),"/"):c=mf(r,n)}else c=n;return{pathname:c,search:rv(a),hash:sv(u)}}function mf(s,n){let r=n.replace(/\/+$/,"").split("/");return s.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function Ou(s,n,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tv(s){return s.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Sc(s,n){let r=tv(s);return n?r.map((a,u)=>u===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function xc(s,n,r,a){a===void 0&&(a=!1);let u;typeof s=="string"?u=ui(s):(u=na({},s),Kt(!u.pathname||!u.pathname.includes("?"),Ou("?","pathname","search",u)),Kt(!u.pathname||!u.pathname.includes("#"),Ou("#","pathname","hash",u)),Kt(!u.search||!u.search.includes("#"),Ou("#","search","hash",u)));let c=s===""||u.pathname==="",h=c?"/":u.pathname,p;if(h==null)p=r;else{let S=n.length-1;if(!a&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),S-=1;u.pathname=k.join("/")}p=S>=0?n[S]:"/"}let m=ev(u,p),v=h&&h!=="/"&&h.endsWith("/"),y=(c||h===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(v||y)&&(m.pathname+="/"),m}const Xr=s=>s.join("/").replace(/\/\/+/g,"/"),nv=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),rv=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,sv=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function iv(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const cp=["post","put","patch","delete"];new Set(cp);const av=["get",...cp];new Set(av);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ra(){return ra=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ra.apply(this,arguments)}const jc=b.createContext(null),ov=b.createContext(null),ts=b.createContext(null),Uo=b.createContext(null),jr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),dp=b.createContext(null);function lv(s,n){let{relative:r}=n===void 0?{}:n;ci()||Kt(!1);let{basename:a,navigator:u}=b.useContext(ts),{hash:c,pathname:h,search:p}=fp(s,{relative:r}),m=h;return a!=="/"&&(m=h==="/"?a:Xr([a,h])),u.createHref({pathname:m,search:p,hash:c})}function ci(){return b.useContext(Uo)!=null}function ns(){return ci()||Kt(!1),b.useContext(Uo).location}function hp(s){b.useContext(ts).static||b.useLayoutEffect(s)}function hr(){let{isDataRoute:s}=b.useContext(jr);return s?bv():uv()}function uv(){ci()||Kt(!1);let s=b.useContext(jc),{basename:n,future:r,navigator:a}=b.useContext(ts),{matches:u}=b.useContext(jr),{pathname:c}=ns(),h=JSON.stringify(Sc(u,r.v7_relativeSplatPath)),p=b.useRef(!1);return hp(()=>{p.current=!0}),b.useCallback(function(v,y){if(y===void 0&&(y={}),!p.current)return;if(typeof v=="number"){a.go(v);return}let S=xc(v,JSON.parse(h),c,y.relative==="path");s==null&&n!=="/"&&(S.pathname=S.pathname==="/"?n:Xr([n,S.pathname])),(y.replace?a.replace:a.push)(S,y.state,y)},[n,a,h,c,s])}function Nc(){let{matches:s}=b.useContext(jr),n=s[s.length-1];return n?n.params:{}}function fp(s,n){let{relative:r}=n===void 0?{}:n,{future:a}=b.useContext(ts),{matches:u}=b.useContext(jr),{pathname:c}=ns(),h=JSON.stringify(Sc(u,a.v7_relativeSplatPath));return b.useMemo(()=>xc(s,JSON.parse(h),c,r==="path"),[s,h,c,r])}function cv(s,n){return dv(s,n)}function dv(s,n,r,a){ci()||Kt(!1);let{navigator:u}=b.useContext(ts),{matches:c}=b.useContext(jr),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=ns(),y;if(n){var S;let O=typeof n=="string"?ui(n):n;m==="/"||(S=O.pathname)!=null&&S.startsWith(m)||Kt(!1),y=O}else y=v;let k=y.pathname||"/",j=k;if(m!=="/"){let O=m.replace(/^\//,"").split("/");j="/"+k.replace(/^\//,"").split("/").slice(O.length).join("/")}let P=$g(s,{pathname:j}),C=gv(P&&P.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:Xr([m,u.encodeLocation?u.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:Xr([m,u.encodeLocation?u.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),c,r,a);return n&&C?b.createElement(Uo.Provider,{value:{location:ra({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Qr.Pop}},C):C}function hv(){let s=kv(),n=iv(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},n),r?b.createElement("pre",{style:u},r):null,null)}const fv=b.createElement(hv,null);class pv extends b.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?b.createElement(jr.Provider,{value:this.props.routeContext},b.createElement(dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mv(s){let{routeContext:n,match:r,children:a}=s,u=b.useContext(jc);return u&&u.static&&u.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(jr.Provider,{value:n},a)}function gv(s,n,r,a){var u;if(n===void 0&&(n=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var c;if(!r)return null;if(r.errors)s=r.matches;else if((c=a)!=null&&c.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let h=s,p=(u=r)==null?void 0:u.errors;if(p!=null){let y=h.findIndex(S=>S.route.id&&(p==null?void 0:p[S.route.id])!==void 0);y>=0||Kt(!1),h=h.slice(0,Math.min(h.length,y+1))}let m=!1,v=-1;if(r&&a&&a.v7_partialHydration)for(let y=0;y<h.length;y++){let S=h[y];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(v=y),S.route.id){let{loaderData:k,errors:j}=r,P=S.route.loader&&k[S.route.id]===void 0&&(!j||j[S.route.id]===void 0);if(S.route.lazy||P){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((y,S,k)=>{let j,P=!1,C=null,O=null;r&&(j=p&&S.route.id?p[S.route.id]:void 0,C=S.route.errorElement||fv,m&&(v<0&&k===0?(_v("route-fallback"),P=!0,O=null):v===k&&(P=!0,O=S.route.hydrateFallbackElement||null)));let W=n.concat(h.slice(0,k+1)),M=()=>{let V;return j?V=C:P?V=O:S.route.Component?V=b.createElement(S.route.Component,null):S.route.element?V=S.route.element:V=y,b.createElement(mv,{match:S,routeContext:{outlet:y,matches:W,isDataRoute:r!=null},children:V})};return r&&(S.route.ErrorBoundary||S.route.errorElement||k===0)?b.createElement(pv,{location:r.location,revalidation:r.revalidation,component:C,error:j,children:M(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):M()},null)}var pp=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(pp||{}),mp=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(mp||{});function vv(s){let n=b.useContext(jc);return n||Kt(!1),n}function yv(s){let n=b.useContext(ov);return n||Kt(!1),n}function wv(s){let n=b.useContext(jr);return n||Kt(!1),n}function gp(s){let n=wv(),r=n.matches[n.matches.length-1];return r.route.id||Kt(!1),r.route.id}function kv(){var s;let n=b.useContext(dp),r=yv(),a=gp();return n!==void 0?n:(s=r.errors)==null?void 0:s[a]}function bv(){let{router:s}=vv(pp.UseNavigateStable),n=gp(mp.UseNavigateStable),r=b.useRef(!1);return hp(()=>{r.current=!0}),b.useCallback(function(u,c){c===void 0&&(c={}),r.current&&(typeof u=="number"?s.navigate(u):s.navigate(u,ra({fromRouteId:n},c)))},[s,n])}const gf={};function _v(s,n,r){gf[s]||(gf[s]=!0)}function Sv(s,n){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function bt(s){let{to:n,replace:r,state:a,relative:u}=s;ci()||Kt(!1);let{future:c,static:h}=b.useContext(ts),{matches:p}=b.useContext(jr),{pathname:m}=ns(),v=hr(),y=xc(n,Sc(p,c.v7_relativeSplatPath),m,u==="path"),S=JSON.stringify(y);return b.useEffect(()=>v(JSON.parse(S),{replace:r,state:a,relative:u}),[v,S,u,r,a]),null}function ct(s){Kt(!1)}function xv(s){let{basename:n="/",children:r=null,location:a,navigationType:u=Qr.Pop,navigator:c,static:h=!1,future:p}=s;ci()&&Kt(!1);let m=n.replace(/^\/*/,"/"),v=b.useMemo(()=>({basename:m,navigator:c,static:h,future:ra({v7_relativeSplatPath:!1},p)}),[m,p,c,h]);typeof a=="string"&&(a=ui(a));let{pathname:y="/",search:S="",hash:k="",state:j=null,key:P="default"}=a,C=b.useMemo(()=>{let O=_c(y,m);return O==null?null:{location:{pathname:O,search:S,hash:k,state:j,key:P},navigationType:u}},[m,y,S,k,j,P,u]);return C==null?null:b.createElement(ts.Provider,{value:v},b.createElement(Uo.Provider,{children:r,value:C}))}function jv(s){let{children:n,location:r}=s;return cv(tc(n),r)}new Promise(()=>{});function tc(s,n){n===void 0&&(n=[]);let r=[];return b.Children.forEach(s,(a,u)=>{if(!b.isValidElement(a))return;let c=[...n,u];if(a.type===b.Fragment){r.push.apply(r,tc(a.props.children,c));return}a.type!==ct&&Kt(!1),!a.props.index||!a.props.children||Kt(!1);let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=tc(a.props.children,c)),r.push(h)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},nc.apply(this,arguments)}function Nv(s,n){if(s==null)return{};var r={},a=Object.keys(s),u,c;for(c=0;c<a.length;c++)u=a[c],!(n.indexOf(u)>=0)&&(r[u]=s[u]);return r}function Cv(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Ev(s,n){return s.button===0&&(!n||n==="_self")&&!Cv(s)}function rc(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((n,r)=>{let a=s[r];return n.concat(Array.isArray(a)?a.map(u=>[r,u]):[[r,a]])},[]))}function Tv(s,n){let r=rc(s);return n&&n.forEach((a,u)=>{r.has(u)||n.getAll(u).forEach(c=>{r.append(u,c)})}),r}const Pv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rv="6";try{window.__reactRouterVersion=Rv}catch{}const Ov="startTransition",vf=Cg[Ov];function Av(s){let{basename:n,children:r,future:a,window:u}=s,c=b.useRef();c.current==null&&(c.current=Dg({window:u,v5Compat:!0}));let h=c.current,[p,m]=b.useState({action:h.action,location:h.location}),{v7_startTransition:v}=a||{},y=b.useCallback(S=>{v&&vf?vf(()=>m(S)):m(S)},[m,v]);return b.useLayoutEffect(()=>h.listen(y),[h,y]),b.useEffect(()=>Sv(a),[a]),b.createElement(xv,{basename:n,children:r,location:p.location,navigationType:p.action,navigator:h,future:a})}const Dv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=b.forwardRef(function(n,r){let{onClick:a,relative:u,reloadDocument:c,replace:h,state:p,target:m,to:v,preventScrollReset:y,viewTransition:S}=n,k=Nv(n,Pv),{basename:j}=b.useContext(ts),P,C=!1;if(typeof v=="string"&&Iv.test(v)&&(P=v,Dv))try{let V=new URL(window.location.href),q=v.startsWith("//")?new URL(V.protocol+v):new URL(v),Le=_c(q.pathname,j);q.origin===V.origin&&Le!=null?v=Le+q.search+q.hash:C=!0}catch{}let O=lv(v,{relative:u}),W=Lv(v,{replace:h,state:p,target:m,preventScrollReset:y,relative:u,viewTransition:S});function M(V){a&&a(V),V.defaultPrevented||W(V)}return b.createElement("a",nc({},k,{href:P||O,onClick:C||c?a:M,ref:r,target:m}))});var yf;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(yf||(yf={}));var wf;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(wf||(wf={}));function Lv(s,n){let{target:r,replace:a,state:u,preventScrollReset:c,relative:h,viewTransition:p}=n===void 0?{}:n,m=hr(),v=ns(),y=fp(s,{relative:h});return b.useCallback(S=>{if(Ev(S,r)){S.preventDefault();let k=a!==void 0?a:Ao(v)===Ao(y);m(s,{replace:k,state:u,preventScrollReset:c,relative:h,viewTransition:p})}},[v,m,y,a,u,r,s,c,h,p])}function $v(s){let n=b.useRef(rc(s)),r=b.useRef(!1),a=ns(),u=b.useMemo(()=>Tv(a.search,r.current?null:n.current),[a.search]),c=hr(),h=b.useCallback((p,m)=>{const v=rc(typeof p=="function"?p(u):p);r.current=!0,c("?"+v,m)},[c,u]);return[u,h]}function zo(s,n){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&n.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(s);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(s,a[u])&&(r[a[u]]=s[a[u]]);return r}function Uv(s,n,r,a){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(y){try{v(a.next(y))}catch(S){h(S)}}function m(y){try{v(a.throw(y))}catch(S){h(S)}}function v(y){y.done?c(y.value):u(y.value).then(p,m)}v((a=a.apply(s,n||[])).next())})}const zv=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class Cc extends Error{constructor(n,r="FunctionsError",a){super(n),this.name=r,this.context=a}}class Bv extends Cc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class kf extends Cc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class bf extends Cc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var sc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(sc||(sc={}));class Mv{constructor(n,{headers:r={},customFetch:a,region:u=sc.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=zv(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Uv(this,arguments,void 0,function*(r,a={}){var u;let c,h;try{const{headers:p,method:m,body:v,signal:y,timeout:S}=a;let k={},{region:j}=a;j||(j=this.region);const P=new URL(`${this.url}/${r}`);j&&j!=="any"&&(k["x-region"]=j,P.searchParams.set("forceFunctionRegion",j));let C;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",C=v):typeof v=="string"?(k["Content-Type"]="text/plain",C=v):typeof FormData<"u"&&v instanceof FormData?C=v:(k["Content-Type"]="application/json",C=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?C=JSON.stringify(v):C=v;let O=y;S&&(h=new AbortController,c=setTimeout(()=>h.abort(),S),y?(O=h.signal,y.addEventListener("abort",()=>h.abort())):O=h.signal);const W=yield this.fetch(P.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),p),body:C,signal:O}).catch(Le=>{throw new Bv(Le)}),M=W.headers.get("x-relay-error");if(M&&M==="true")throw new kf(W);if(!W.ok)throw new bf(W);let V=((u=W.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return V==="application/json"?q=yield W.json():V==="application/octet-stream"||V==="application/pdf"?q=yield W.blob():V==="text/event-stream"?q=W:V==="multipart/form-data"?q=yield W.formData():q=yield W.text(),{data:q,error:null,response:W}}catch(p){return{data:null,error:p,response:p instanceof bf||p instanceof kf?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var Fv=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Wv=class{constructor(s){var n,r,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(a=s.urlLengthLimit)!==null&&a!==void 0?a:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,p=null,m=null,v=c.status,y=c.statusText;if(c.ok){var S,k;if(r.method!=="HEAD"){var j;const W=await c.text();W===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((j=r.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?p=W:p=JSON.parse(W))}const C=(S=r.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),O=(k=c.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");C&&O&&O.length>1&&(m=parseInt(O[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,v=406,y="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var P;const C=await c.text();try{h=JSON.parse(C),Array.isArray(h)&&c.status===404&&(p=[],h=null,v=200,y="OK")}catch{c.status===404&&C===""?(v=204,y="No Content"):h={message:C}}if(h&&r.isMaybeSingle&&(!(h==null||(P=h.details)===null||P===void 0)&&P.includes("0 rows"))&&(h=null,v=200,y="OK"),h&&r.shouldThrowOnError)throw new Fv(h)}return{error:h,data:p,count:m,status:v,statusText:y}});return this.shouldThrowOnError||(u=u.catch(c=>{var h;let p="",m="",v="";const y=c==null?void 0:c.cause;if(y){var S,k,j,P;const W=(S=y==null?void 0:y.message)!==null&&S!==void 0?S:"",M=(k=y==null?void 0:y.code)!==null&&k!==void 0?k:"";p=`${(j=c==null?void 0:c.name)!==null&&j!==void 0?j:"FetchError"}: ${c==null?void 0:c.message}`,p+=`

Caused by: ${(P=y==null?void 0:y.name)!==null&&P!==void 0?P:"Error"}: ${W}`,M&&(p+=` (${M})`),y!=null&&y.stack&&(p+=`
${y.stack}`)}else{var C;p=(C=c==null?void 0:c.stack)!==null&&C!==void 0?C:""}const O=this.url.toString().length;return(c==null?void 0:c.name)==="AbortError"||(c==null?void 0:c.code)==="ABORT_ERR"?(v="",m="Request was aborted (timeout or manual cancellation)",O>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${O} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(v="",m="HTTP headers exceeded server limits (typically 16KB)",O>this.urlLengthLimit&&(m+=`. Your request URL is ${O} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:p,hint:m,code:v},data:null,count:null,status:0,statusText:""}})),u.then(s,n)}returns(){return this}overrideTypes(){return this}},Vv=class extends Wv{select(s){let n=!1;const r=(s??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:u=a}={}){const c=u?`${u}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:a=r}={}){const u=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(c,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:u=!1,format:c="text"}={}){var h;const p=[s?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const _f=new RegExp("[,()]");var ti=class extends Vv{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&_f.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&_f.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${u}fts${c}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},Kv=class{constructor(s,{headers:n={},schema:r,fetch:a,urlLengthLimit:u=8e3}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=a,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:a}=n??{},u=r?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(v=>/\s/.test(v)&&!c?"":(v==='"'&&(c=!c),v)).join(""),{url:p,headers:m}=this.cloneRequestState();return p.searchParams.set("select",h),a&&m.append("Prefer",`count=${a}`),new ti({method:u,url:p,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:r=!0}={}){var a;const u="POST",{url:c,headers:h}=this.cloneRequestState();if(n&&h.append("Prefer",`count=${n}`),r||h.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(p.length>0){const m=[...new Set(p)].map(v=>`"${v}"`);c.searchParams.set("columns",m.join(","))}}return new ti({method:u,url:c,headers:h,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:u=!0}={}){var c;const h="POST",{url:p,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),a&&m.append("Prefer",`count=${a}`),u||m.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((y,S)=>y.concat(Object.keys(S)),[]);if(v.length>0){const y=[...new Set(v)].map(S=>`"${S}"`);p.searchParams.set("columns",y.join(","))}}return new ti({method:h,url:p,headers:m,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var r;const a="PATCH",{url:u,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new ti({method:a,url:u,headers:c,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const r="DELETE",{url:a,headers:u}=this.cloneRequestState();return s&&u.append("Prefer",`count=${s}`),new ti({method:r,url:a,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function sa(s){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sa(s)}function qv(s,n){if(sa(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,n);if(sa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Hv(s){var n=qv(s,"string");return sa(n)=="symbol"?n:n+""}function Gv(s,n,r){return(n=Hv(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Sf(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,a)}return r}function So(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sf(Object(r),!0).forEach(function(a){Gv(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Sf(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}var Jv=class vp{constructor(n,{headers:r={},schema:a,fetch:u,timeout:c,urlLengthLimit:h=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=a,this.urlLengthLimit=h;const p=u??globalThis.fetch;c!==void 0&&c>0?this.fetch=(m,v)=>{const y=new AbortController,S=setTimeout(()=>y.abort(),c),k=v==null?void 0:v.signal;if(k){if(k.aborted)return clearTimeout(S),p(m,v);const j=()=>{clearTimeout(S),y.abort()};return k.addEventListener("abort",j,{once:!0}),p(m,So(So({},v),{},{signal:y.signal})).finally(()=>{clearTimeout(S),k.removeEventListener("abort",j)})}return p(m,So(So({},v),{},{signal:y.signal})).finally(()=>clearTimeout(S))}:this.fetch=p}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Kv(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new vp(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:a=!1,get:u=!1,count:c}={}){var h;let p;const m=new URL(`${this.url}/rpc/${n}`);let v;const y=j=>j!==null&&typeof j=="object"&&(!Array.isArray(j)||j.some(y)),S=a&&Object.values(r).some(y);S?(p="POST",v=r):a||u?(p=a?"HEAD":"GET",Object.entries(r).filter(([j,P])=>P!==void 0).map(([j,P])=>[j,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([j,P])=>{m.searchParams.append(j,P)})):(p="POST",v=r);const k=new Headers(this.headers);return S?k.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&k.set("Prefer",`count=${c}`),new ti({method:p,url:m,headers:k,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class Yv{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const u=a.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const a=this.getWebSocketConstructor();return new a(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Qv="2.95.3",Xv=`realtime-js/${Qv}`,Zv="1.0.0",yp="2.0.0",xf=yp,ic=1e4,ey=1e3,ty=100;var Jr;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Jr||(Jr={}));var tn;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(tn||(tn={}));var rr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(rr||(rr={}));var ac;(function(s){s.websocket="websocket"})(ac||(ac={}));var ks;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ks||(ks={}));class ny{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let a=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,a;const u=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var r,a;const u=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(n,r,a){var u,c;const h=n.topic,p=(u=n.ref)!==null&&u!==void 0?u:"",m=(c=n.join_ref)!==null&&c!==void 0?c:"",v=n.payload.event,y=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},S=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+v.length+S.length,j=new ArrayBuffer(this.HEADER_LENGTH+k);let P=new DataView(j),C=0;P.setUint8(C++,this.KINDS.userBroadcastPush),P.setUint8(C++,m.length),P.setUint8(C++,p.length),P.setUint8(C++,h.length),P.setUint8(C++,v.length),P.setUint8(C++,S.length),P.setUint8(C++,r),Array.from(m,W=>P.setUint8(C++,W.charCodeAt(0))),Array.from(p,W=>P.setUint8(C++,W.charCodeAt(0))),Array.from(h,W=>P.setUint8(C++,W.charCodeAt(0))),Array.from(v,W=>P.setUint8(C++,W.charCodeAt(0))),Array.from(S,W=>P.setUint8(C++,W.charCodeAt(0)));var O=new Uint8Array(j.byteLength+a.byteLength);return O.set(new Uint8Array(j),0),O.set(new Uint8Array(a),j.byteLength),O.buffer}decode(n,r){if(this._isArrayBuffer(n)){let a=this._binaryDecode(n);return r(a)}if(typeof n=="string"){const a=JSON.parse(n),[u,c,h,p,m]=a;return r({join_ref:u,ref:c,topic:h,event:p,payload:m})}return r({})}_binaryDecode(n){const r=new DataView(n),a=r.getUint8(0),u=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,u)}}_decodeUserBroadcast(n,r,a){const u=r.getUint8(1),c=r.getUint8(2),h=r.getUint8(3),p=r.getUint8(4);let m=this.HEADER_LENGTH+4;const v=a.decode(n.slice(m,m+u));m=m+u;const y=a.decode(n.slice(m,m+c));m=m+c;const S=a.decode(n.slice(m,m+h));m=m+h;const k=n.slice(m,n.byteLength),j=p===this.JSON_ENCODING?JSON.parse(a.decode(k)):k,P={type:this.BROADCAST_EVENT,event:y,payload:j};return h>0&&(P.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([a])=>r.includes(a)))}}class wp{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ct||(Ct={}));const jf=(s,n,r={})=>{var a;const u=(a=r.skipTypes)!==null&&a!==void 0?a:[];return n?Object.keys(n).reduce((c,h)=>(c[h]=ry(h,s,n,u),c),{}):{}},ry=(s,n,r,a)=>{const u=n.find(p=>p.name===s),c=u==null?void 0:u.type,h=r[s];return c&&!a.includes(c)?kp(c,h):oc(h)},kp=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return oy(n,r)}switch(s){case Ct.bool:return sy(n);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return iy(n);case Ct.json:case Ct.jsonb:return ay(n);case Ct.timestamp:return ly(n);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return oc(n);default:return oc(n)}},oc=s=>s,sy=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},iy=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},ay=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},oy=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,a=s[r];if(s[0]==="{"&&a==="}"){let c;const h=s.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>kp(n,p))}return s},ly=s=>typeof s=="string"?s.replace(" ","T"):s,bp=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Au{constructor(n,r,a={},u=ic){this.channel=n,this.event=r,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var a;return this._hasReceived(n)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Nf;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Nf||(Nf={}));class ea{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ea.syncState(this.state,u,c,h),this.pendingDiffs.forEach(m=>{this.state=ea.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=ea.syncDiff(this.state,u,c,h),p())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,a,u){const c=this.cloneDeep(n),h=this.transformState(r),p={},m={};return this.map(c,(v,y)=>{h[v]||(m[v]=y)}),this.map(h,(v,y)=>{const S=c[v];if(S){const k=y.map(O=>O.presence_ref),j=S.map(O=>O.presence_ref),P=y.filter(O=>j.indexOf(O.presence_ref)<0),C=S.filter(O=>k.indexOf(O.presence_ref)<0);P.length>0&&(p[v]=P),C.length>0&&(m[v]=C)}else p[v]=y}),this.syncDiff(c,{joins:p,leaves:m},a,u)}static syncDiff(n,r,a,u){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(c,(p,m)=>{var v;const y=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(m),y.length>0){const S=n[p].map(j=>j.presence_ref),k=y.filter(j=>S.indexOf(j.presence_ref)<0);n[p].unshift(...k)}a(p,y,m)}),this.map(h,(p,m)=>{let v=n[p];if(!v)return;const y=m.map(S=>S.presence_ref);v=v.filter(S=>y.indexOf(S.presence_ref)<0),n[p]=v,u(p,v,m),v.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(a=>r(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,a)=>{const u=n[a];return"metas"in u?r[a]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cf;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Cf||(Cf={}));var ta;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ta||(ta={}));var xr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(xr||(xr={}));class si{constructor(n,r={config:{}},a){var u,c;if(this.topic=n,this.params=r,this.socket=a,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Au(this,rr.join,this.params,this.timeout),this.rejoinTimer=new wp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new ea(this),this.broadcastEndpointURL=bp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var a,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,v=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(j=>j.filter))!==null&&u!==void 0?u:[],y=!!this.bindings[ta.PRESENCE]&&this.bindings[ta.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,S={},k={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:v,private:m};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(j=>n==null?void 0:n(xr.CHANNEL_ERROR,j)),this._onClose(()=>n==null?void 0:n(xr.CLOSED)),this.updateJoinPayload(Object.assign({config:k},S)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var P;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){n==null||n(xr.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,O=(P=C==null?void 0:C.length)!==null&&P!==void 0?P:0,W=[];for(let M=0;M<O;M++){const V=C[M],{filter:{event:q,schema:Le,table:ke,filter:xe}}=V,Fe=j&&j[M];if(Fe&&Fe.event===q&&si.isFilterValueEqual(Fe.schema,Le)&&si.isFilterValueEqual(Fe.table,ke)&&si.isFilterValueEqual(Fe.filter,xe))W.push(Object.assign(Object.assign({},V),{id:Fe.id}));else{this.unsubscribe(),this.state=tn.errored,n==null||n(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=W,n&&n(xr.SUBSCRIBED);return}}).receive("error",j=>{this.state=tn.errored,n==null||n(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,a){return this.state===tn.joined&&n===ta.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,a)}async httpSend(n,r,a={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const v=await p.json();m=v.error||v.message||m}catch{}return Promise.reject(new Error(m))}async send(n,r={}){var a,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,m;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=tn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new Au(this,rr.leave,{},n),a.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(n,r,a){const u=new AbortController,c=setTimeout(()=>u.abort(),a),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(c),h}_push(n,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Au(this,n,r,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>ty){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,a){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,a){var u,c;const h=n.toLocaleLowerCase(),{close:p,error:m,leave:v,join:y}=rr;if(a&&[p,m,v,y].indexOf(h)>=0&&a!==this._joinRef())return;let k=this._onMessage(h,r,a);if(r&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(j=>{var P,C,O;return((P=j.filter)===null||P===void 0?void 0:P.event)==="*"||((O=(C=j.filter)===null||C===void 0?void 0:C.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===h}).map(j=>j.callback(k,a)):(c=this.bindings[h])===null||c===void 0||c.filter(j=>{var P,C,O,W,M,V;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const q=j.id,Le=(P=j.filter)===null||P===void 0?void 0:P.event;return q&&((C=r.ids)===null||C===void 0?void 0:C.includes(q))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((O=r.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const q=(M=(W=j==null?void 0:j.filter)===null||W===void 0?void 0:W.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return q==="*"||q===((V=r==null?void 0:r.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof k=="object"&&"ids"in k){const P=k.data,{schema:C,table:O,commit_timestamp:W,type:M,errors:V}=P;k=Object.assign(Object.assign({},{schema:C,table:O,commit_timestamp:W,eventType:M,new:{},old:{},errors:V}),this._getPayloadRecords(P))}j.callback(k,a)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,a){const u=n.toLocaleLowerCase(),c={type:u,filter:r,callback:a};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(n,r){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&si.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const a in n)if(n[a]!==r[a])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(rr.close,{},n)}_onError(n){this._on(rr.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=jf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=jf(n.columns,n.old_record)),r}}const Du=()=>{},xo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uy=[1e3,2e3,5e3,1e4],cy=1e4,dy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hy{constructor(n,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ic,this.transport=null,this.heartbeatIntervalMs=xo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Du,this.ref=0,this.reconnectTimer=null,this.vsn=xf,this.logger=Du,this.conn=null,this.sendBuffer=[],this.serializer=new ny,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((a=r==null?void 0:r.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${ac.websocket}`,this.httpEndpoint=bp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Yv.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return r==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,a){this.logger(n,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Jr.connecting:return ks.Connecting;case Jr.open:return ks.Open;case Jr.closing:return ks.Closing;default:return ks.Closed}}isConnected(){return this.connectionState()===ks.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const a=`realtime:${n}`,u=this.getChannels().find(c=>c.topic===a);if(u)return u;{const c=new si(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:a,payload:u,ref:c}=n,h=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${r} ${a} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(ey,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},xo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:c,ref:h}=r,p=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${u} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(a)).forEach(v=>v._trigger(u,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Jr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Jr.open||this.conn.readyState===Jr.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(rr.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const a=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${a}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const a=new Blob([dy],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,a=!1;if(n)r=n,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const c={access_token:r,version:Xv};r&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(rr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new wp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,a,u,c,h,p,m,v,y,S,k,j;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(a=n==null?void 0:n.timeout)!==null&&a!==void 0?a:ic,this.heartbeatIntervalMs=(u=n==null?void 0:n.heartbeatIntervalMs)!==null&&u!==void 0?u:xo.HEARTBEAT_INTERVAL,this.worker=(c=n==null?void 0:n.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n==null?void 0:n.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n==null?void 0:n.heartbeatCallback)!==null&&p!==void 0?p:Du,this.vsn=(m=n==null?void 0:n.vsn)!==null&&m!==void 0?m:xf,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n==null?void 0:n.reconnectAfterMs)!==null&&v!==void 0?v:(P=>uy[P-1]||cy),this.vsn){case Zv:this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((P,C)=>C(JSON.stringify(P))),this.decode=(S=n==null?void 0:n.decode)!==null&&S!==void 0?S:((P,C)=>C(JSON.parse(P)));break;case yp:this.encode=(k=n==null?void 0:n.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(j=n==null?void 0:n.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var ia=class extends Error{constructor(s,n){var r;super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function fy(s,n,r){const a=new URL(n,s);if(r)for(const[u,c]of Object.entries(r))c!==void 0&&a.searchParams.set(u,c);return a.toString()}async function py(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function my(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:u,body:c,headers:h}){const p=fy(s.baseUrl,a,u),m=await py(s.auth),v=await n(p,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...m,...h},body:c?JSON.stringify(c):void 0}),y=await v.text(),S=(v.headers.get("content-type")||"").includes("application/json"),k=S&&y?JSON.parse(y):y;if(!v.ok){const j=S?k:void 0,P=j==null?void 0:j.error;throw new ia((P==null?void 0:P.message)??`Request failed with status ${v.status}`,{status:v.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:j})}return{status:v.status,headers:v.headers,data:k}}}}function jo(s){return s.join("")}var gy=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:jo(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jo(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jo(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jo(s.namespace)}`}),!0}catch(n){if(n instanceof ia&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof ia&&r.status===409)return;throw r}}};function Js(s){return s.join("")}var vy=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Js(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof ia&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof ia&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},yy=class{constructor(s){var a;let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=my({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(a=s.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new gy(this.client,n),this.tableOps=new vy(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},Bo=class extends Error{constructor(s,n="storage",r,a){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=a}};function Mo(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var No=class extends Bo{constructor(s,n,r,a="storage"){super(s,a,n,r),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_p=class extends Bo{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const wy=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),ky=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},lc=s=>{if(Array.isArray(s))return s.map(r=>lc(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,a])=>{const u=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[u]=lc(a)}),n},by=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function aa(s){"@babel/helpers - typeof";return aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},aa(s)}function _y(s,n){if(aa(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,n);if(aa(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Sy(s){var n=_y(s,"string");return aa(n)=="symbol"?n:n+""}function xy(s,n,r){return(n=Sy(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Ef(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,a)}return r}function Ye(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ef(Object(r),!0).forEach(function(a){xy(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Ef(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}const Tf=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},jy=async(s,n,r,a)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const u=s,c=u.status||500;if(typeof u.json=="function")u.json().then(h=>{const p=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";n(new No(Tf(h),c,p,a))}).catch(()=>{if(a==="vectors"){const h=c+"";n(new No(u.statusText||`HTTP ${c} error`,c,h,a))}else{const h=c+"";n(new No(u.statusText||`HTTP ${c} error`,c,h,a))}});else{const h=c+"";n(new No(u.statusText||`HTTP ${c} error`,c,h,a))}}else n(new _p(Tf(s),s,a))},Ny=(s,n,r,a)=>{const u={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"||s==="HEAD"||!a?Ye(Ye({},u),r):(ky(a)?(u.headers=Ye({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(a)):u.body=a,n!=null&&n.duplex&&(u.duplex=n.duplex),Ye(Ye({},u),r))};async function Xi(s,n,r,a,u,c,h){return new Promise((p,m)=>{s(r,Ny(n,a,u,c)).then(v=>{if(!v.ok)throw v;if(a!=null&&a.noResolveJson)return v;if(h==="vectors"){const y=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!y||!y.includes("application/json"))return{}}return v.json()}).then(v=>p(v)).catch(v=>jy(v,m,a,h))})}function Sp(s="storage"){return{get:async(n,r,a,u)=>Xi(n,"GET",r,a,u,void 0,s),post:async(n,r,a,u,c)=>Xi(n,"POST",r,u,c,a,s),put:async(n,r,a,u,c)=>Xi(n,"PUT",r,u,c,a,s),head:async(n,r,a,u)=>Xi(n,"HEAD",r,Ye(Ye({},a),{},{noResolveJson:!0}),u,void 0,s),remove:async(n,r,a,u,c)=>Xi(n,"DELETE",r,u,c,a,s)}}const Cy=Sp("storage"),{get:oa,post:nr,put:uc,head:Ey,remove:Ec}=Cy,An=Sp("vectors");var di=class{constructor(s,n={},r,a="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=wy(r),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Mo(r))return{data:null,error:r};throw r}}},Ty=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Mo(n))return{data:null,error:n};throw n}}};let xp;xp=Symbol.toStringTag;var Py=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[xp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ty(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Mo(n))return{data:null,error:n};throw n}}};const Ry={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Oy=class extends di{constructor(s,n={},r,a){super(s,n,a,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,a){var u=this;return u.handleOperation(async()=>{let c;const h=Ye(Ye({},Pf),a);let p=Ye(Ye({},u.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",u.encodeMetadata(m)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(m))):(c=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(p=Ye(Ye({},p),a.headers));const v=u._removeEmptyFolders(n),y=u._getFinalPath(v),S=await(s=="PUT"?uc:nr)(u.fetch,`${u.url}/object/${y}`,c,Ye({headers:p},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:v,id:S.Id,fullPath:S.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,a){var u=this;const c=u._removeEmptyFolders(s),h=u._getFinalPath(c),p=new URL(u.url+`/object/upload/sign/${h}`);return p.searchParams.set("token",n),u.handleOperation(async()=>{let m;const v=Ye({upsert:Pf.upsert},a),y=Ye(Ye({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",v.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",v.cacheControl)):(m=r,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType),{path:c,fullPath:(await uc(u.fetch,p.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(s);const u=Ye({},r.headers);n!=null&&n.upsert&&(u["x-upsert"]="true");const c=await nr(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:u}),h=new URL(r.url+c.url),p=h.searchParams.get("token");if(!p)throw new Bo("No token returned by API");return{signedUrl:h.toString(),path:s,token:p}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var a=this;return a.handleOperation(async()=>await nr(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:a.headers}))}async copy(s,n,r){var a=this;return a.handleOperation(async()=>({path:(await nr(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(s,n,r){var a=this;return a.handleOperation(async()=>{let u=a._getFinalPath(s),c=await nr(a.fetch,`${a.url}/object/sign/${u}`,Ye({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:a.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${h}`)}})}async createSignedUrls(s,n,r){var a=this;return a.handleOperation(async()=>{const u=await nr(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:n,paths:s},{headers:a.headers}),c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u.map(h=>Ye(Ye({},h),{},{signedUrl:h.signedURL?encodeURI(`${a.url}${h.signedURL}${c}`):null}))})}download(s,n,r){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=u?`?${u}`:"",h=this._getFinalPath(s),p=()=>oa(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0},r);return new Py(p,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>lc(await oa(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await Ey(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Mo(a)&&a instanceof _p){const u=a.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:a}}throw a}}getPublicUrl(s,n){const r=this._getFinalPath(s),a=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&a.push(u);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&a.push(h);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${p}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await Ec(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var a=this;return a.handleOperation(async()=>{const u=Ye(Ye(Ye({},Ry),n),{},{prefix:s||""});return await nr(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const a=Ye({},s);return await nr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Ay="2.95.3",fa={"X-Client-Info":`storage-js/${Ay}`};var Dy=class extends di{constructor(s,n={},r,a){const u=new URL(s);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const c=u.href.replace(/\/$/,""),h=Ye(Ye({},fa),n);super(c,h,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await oa(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await oa(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await nr(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await uc(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await nr(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Ec(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Iy=class extends di{constructor(s,n={},r){const a=s.replace(/\/$/,""),u=Ye(Ye({},fa),n);super(a,u,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await nr(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const a=r.toString(),u=a?`${n.url}/bucket?${a}`:`${n.url}/bucket`;return await oa(n.fetch,u,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Ec(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!by(s))throw new Bo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new yy({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(u,c){const h=u[c];return typeof h!="function"?h:async(...p)=>{try{return{data:await h.apply(u,p),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},Ly=class extends di{constructor(s,n={},r){const a=s.replace(/\/$/,""),u=Ye(Ye({},fa),{},{"Content-Type":"application/json"},n);super(a,u,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await An.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await An.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},$y=class extends di{constructor(s,n={},r){const a=s.replace(/\/$/,""),u=Ye(Ye({},fa),{},{"Content-Type":"application/json"},n);super(a,u,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},Uy=class extends di{constructor(s,n={},r){const a=s.replace(/\/$/,""),u=Ye(Ye({},fa),{},{"Content-Type":"application/json"},n);super(a,u,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await An.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},zy=class extends Uy{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new By(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},By=class extends Ly{constructor(s,n,r,a){super(s,n,a),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new My(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},My=class extends $y{constructor(s,n,r,a,u){super(s,n,u),this.vectorBucketName=r,this.indexName=a}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,Ye(Ye({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Fy=class extends Dy{constructor(s,n={},r,a){super(s,n,r,a)}from(s){return new Oy(this.url,this.headers,s,this.fetch)}get vectors(){return new zy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Iy(this.url+"/iceberg",this.headers,this.fetch)}};const jp="2.95.3",ni=30*1e3,cc=3,Iu=cc*ni,Wy="http://localhost:9999",Vy="supabase.auth.token",Ky={"X-Client-Info":`gotrue-js/${jp}`},dc="X-Supabase-Api-Version",Np={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hy=600*1e3;class la extends Error{constructor(n,r,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Ue(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Gy extends la{constructor(n,r,a){super(n,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Jy(s){return Ue(s)&&s.name==="AuthApiError"}class bs extends la{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Nr extends la{constructor(n,r,a,u){super(n,a,u),this.name=r,this.status=a}}class On extends Nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lu(s){return Ue(s)&&s.name==="AuthSessionMissingError"}class Ys extends Nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Co extends Nr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Eo extends Nr{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yy(s){return Ue(s)&&s.name==="AuthImplicitGrantRedirectError"}class Rf extends Nr{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qy extends Nr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class hc extends Nr{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function $u(s){return Ue(s)&&s.name==="AuthRetryableFetchError"}class Of extends Nr{constructor(n,r,a){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class fc extends Nr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Do="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Af=` 	
\r=`.split(""),Xy=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Af.length;n+=1)s[Af[n].charCodeAt(0)]=-2;for(let n=0;n<Do.length;n+=1)s[Do[n].charCodeAt(0)]=n;return s})();function Df(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(Do[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(Do[a]),n.queuedBits-=6}}function Cp(s,n,r){const a=Xy[s];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function If(s){const n=[],r=h=>{n.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=h=>{tw(h,a,r)};for(let h=0;h<s.length;h+=1)Cp(s.charCodeAt(h),u,c);return n.join("")}function Zy(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function ew(s,n){for(let r=0;r<s.length;r+=1){let a=s.charCodeAt(r);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(s.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}Zy(a,n)}}function tw(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let a=1;a<6;a+=1)if((s>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function oi(s){const n=[],r={queue:0,queuedBits:0},a=u=>{n.push(u)};for(let u=0;u<s.length;u+=1)Cp(s.charCodeAt(u),r,a);return new Uint8Array(n)}function nw(s){const n=[];return ew(s,r=>n.push(r)),new Uint8Array(n)}function Ss(s){const n=[],r={queue:0,queuedBits:0},a=u=>{n.push(u)};return s.forEach(u=>Df(u,r,a)),Df(null,r,a),n.join("")}function rw(s){return Math.round(Date.now()/1e3)+s}function sw(){return Symbol("auth-callback")}const dn=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},Ep=()=>{if(!dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function iw(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,c)=>{n[c]=u})}catch{}return r.searchParams.forEach((a,u)=>{n[u]=a}),n}const Tp=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),aw=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ri=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},ys=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},cn=async(s,n)=>{await s.removeItem(n)};class Fo{constructor(){this.promise=new Fo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Fo.promiseConstructor=Promise;function To(s){const n=s.split(".");if(n.length!==3)throw new fc("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!qy.test(n[a]))throw new fc("JWT not in base64url format");return{header:JSON.parse(If(n[0])),payload:JSON.parse(If(n[1])),signature:oi(n[2]),raw:{header:n[0],payload:n[1]}}}async function ow(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function lw(s,n){return new Promise((a,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await s(c);if(!n(c,null,h)){a(h);return}}catch(h){if(!n(c,h)){u(h);return}}})()})}function uw(s){return("0"+s.toString(16)).substr(-2)}function cw(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let u="";for(let c=0;c<56;c++)u+=r.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(n),Array.from(n,uw).join("")}async function dw(s){const r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(a);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function hw(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await dw(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qs(s,n,r=!1){const a=cw();let u=a;r&&(u+="/PASSWORD_RECOVERY"),await ri(s,`${n}-code-verifier`,u);const c=await hw(a);return[c,a===c?"plain":"s256"]}const fw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pw(s){const n=s.headers.get(dc);if(!n||!n.match(fw))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function mw(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function gw(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xs(s){if(!vw.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uu(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yw(s,n){return new Proxy(s,{get:(r,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,u)}return!n.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,a,u)}})}function Lf(s){return JSON.parse(JSON.stringify(s))}const ws=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ww=[502,503,504];async function $f(s){var n;if(!aw(s))throw new hc(ws(s),0);if(ww.includes(s.status))throw new hc(ws(s),s.status);let r;try{r=await s.json()}catch(c){throw new bs(ws(c),c)}let a;const u=pw(s);if(u&&u.getTime()>=Np["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Of(ws(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new On}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Of(ws(r),s.status,r.weak_password.reasons);throw new Gy(ws(r),s.status||500,a)}const kw=(s,n,r,a)=>{const u={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),r))};async function Je(s,n,r,a){var u;const c=Object.assign({},a==null?void 0:a.headers);c[dc]||(c[dc]=Np["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const h=(u=a==null?void 0:a.query)!==null&&u!==void 0?u:{};a!=null&&a.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await bw(s,n,r+p,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(m):{data:Object.assign({},m),error:null}}async function bw(s,n,r,a,u,c){const h=kw(n,a,u,c);let p;try{p=await s(r,Object.assign({},h))}catch(m){throw console.error(m),new hc(ws(m),0)}if(p.ok||await $f(p),a!=null&&a.noResolveJson)return p;try{return await p.json()}catch(m){await $f(m)}}function tr(s){var n;let r=null;xw(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=rw(s.expires_in)));const a=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:a},error:null}}function Uf(s){const n=tr(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Yr(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function _w(s){return{data:s,error:null}}function Sw(s){const{action_link:n,email_otp:r,hashed_token:a,redirect_to:u,verification_type:c}=s,h=zo(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:a,redirect_to:u,verification_type:c},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function zf(s){return s}function xw(s){return s.access_token&&s.refresh_token&&s.expires_in}const zu=["global","local","others"];class jw{constructor({url:n="",headers:r={},fetch:a}){this.url=n,this.headers=r,this.fetch=Tp(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=zu[0]){if(zu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zu.join(", ")}`);try{return await Je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ue(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,r={}){try{return await Je(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yr})}catch(a){if(Ue(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:r}=n,a=zo(n,["options"]),u=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(u.new_email=a==null?void 0:a.newEmail,delete u.newEmail),await Je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Sw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Yr})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,a,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},y=await Je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:zf});if(y.error)throw y.error;const S=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(P=>{const C=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);v[`${O}Page`]=C}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(Ue(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Xs(n);try{return await Je(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Yr})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Xs(n);try{return await Je(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Yr})}catch(a){if(Ue(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,r=!1){Xs(n);try{return await Je(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yr})}catch(a){if(Ue(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Xs(n.userId);try{const{data:r,error:a}=await Je(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:a}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Xs(n.userId),Xs(n.id);try{return{data:await Je(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,a,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},y=await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:zf});if(y.error)throw y.error;const S=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(P=>{const C=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);v[`${O}Page`]=C}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(Ue(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ue(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(n){try{return await Je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}}function Bf(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const Zs={debug:!!(globalThis&&Ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Nw extends Pp{}async function Cw(s,n,r){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,u.name);try{return await r()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,u.name)}}else{if(n===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Nw(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Zs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ew(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rp(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Tw(s){return parseInt(s,16)}function Pw(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,a=>a.toString(16).padStart(2,"0")).join("")}function Rw(s){var n;const{chainId:r,domain:a,expirationTime:u,issuedAt:c=new Date,nonce:h,notBefore:p,requestId:m,resources:v,scheme:y,uri:S,version:k}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const j=Rp(s.address),P=y?`${y}://${a}`:a,C=s.statement?`${s.statement}
`:"",O=`${P} wants you to sign in with your Ethereum account:
${j}

${C}`;let W=`URI: ${S}
Version: ${k}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(u&&(W+=`
Expiration Time: ${u.toISOString()}`),p&&(W+=`
Not Before: ${p.toISOString()}`),m&&(W+=`
Request ID: ${m}`),v){let M=`
Resources:`;for(const V of v){if(!V||typeof V!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${V}`);M+=`
- ${V}`}W+=M}return`${O}
${W}`}class Jt extends Error{constructor({message:n,code:r,cause:a,name:u}){var c;super(n,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=u??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class Io extends Jt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ow({error:s,options:n}){var r,a,u;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Jt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const h=window.location.hostname;if(Op(h)){if(c.rp.id!==h)return new Jt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Aw({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Jt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const a=window.location.hostname;if(Op(a)){if(r.rpId!==a)return new Jt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Dw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Iw=new Dw;function Lw(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:a}=s,u=zo(s,["challenge","user","excludeCredentials"]),c=oi(n).buffer,h=Object.assign(Object.assign({},r),{id:oi(r.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:c,user:h});if(a&&a.length>0){p.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const v=a[m];p.excludeCredentials[m]=Object.assign(Object.assign({},v),{id:oi(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function $w(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,a=zo(s,["challenge","allowCredentials"]),u=oi(n).buffer,c=Object.assign(Object.assign({},a),{challenge:u});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];c.allowCredentials[h]=Object.assign(Object.assign({},p),{id:oi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function Uw(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Ss(new Uint8Array(s.response.attestationObject)),clientDataJSON:Ss(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function zw(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,a=s.getClientExtensionResults(),u=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Ss(new Uint8Array(u.authenticatorData)),clientDataJSON:Ss(new Uint8Array(u.clientDataJSON)),signature:Ss(new Uint8Array(u.signature)),userHandle:u.userHandle?Ss(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Op(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Mf(){var s,n;return!!(dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Bw(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",n)}:{data:null,error:new Io("Empty credential response",n)}}catch(n){return{data:null,error:Ow({error:n,options:s})}}}async function Mw(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",n)}:{data:null,error:new Io("Empty credential response",n)}}catch(n){return{data:null,error:Aw({error:n,options:s})}}}const Fw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ww={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lo(...s){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of s)if(u)for(const c in u){const h=u[c];if(h!==void 0)if(Array.isArray(h))a[c]=h;else if(r(h))a[c]=h;else if(n(h)){const p=a[c];n(p)?a[c]=Lo(p,h):a[c]=Lo(h)}else a[c]=h}return a}function Vw(s,n){return Lo(Fw,s,n||{})}function Kw(s,n){return Lo(Ww,s,n||{})}class qw{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:a,signal:u},c){var h;try{const{data:p,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!p)return{data:null,error:m};const v=u??Iw.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:y}=p.webauthn.credential_options.publicKey;if(!y.name){const S=a;if(S)y.name=`${y.id}:${S}`;else{const j=(await this.client.getUser()).data.user,P=((h=j==null?void 0:j.user_metadata)===null||h===void 0?void 0:h.name)||(j==null?void 0:j.email)||(j==null?void 0:j.id)||"User";y.name=`${y.id}:${P}`}}y.displayName||(y.displayName=y.name)}switch(p.webauthn.type){case"create":{const y=Vw(p.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:S,error:k}=await Bw({publicKey:y,signal:v});return S?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:S}},error:null}:{data:null,error:k}}case"request":{const y=Kw(p.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:S,error:k}=await Mw(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:y,signal:v}));return S?{data:{factorId:n,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:S}},error:null}:{data:null,error:k}}}}catch(p){return Ue(p)?{data:null,error:p}:{data:null,error:new bs("Unexpected error in challenge",p)}}}async _verify({challengeId:n,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:a})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!r)return{data:null,error:new la("rpId is required for WebAuthn authentication")};try{if(!Mf())return{data:null,error:new bs("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:a},signal:u},{request:c});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:a,credential_response:m.credential_response}})}catch(h){return Ue(h)?{data:null,error:h}:{data:null,error:new bs("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!r)return{data:null,error:new la("rpId is required for WebAuthn registration")};try{if(!Mf())return{data:null,error:new bs("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(y=>{var S;return(S=y.data)===null||S===void 0?void 0:S.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===n&&k.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:p};const{data:m,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:u},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:v}}catch(h){return Ue(h)?{data:null,error:h}:{data:null,error:new bs("Unexpected error in register",h)}}}}Ew();const Hw={url:Wy,storageKey:Vy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ky,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ff(s,n,r){return await r()}const ei={};class ua{get jwks(){var n,r;return(r=(n=ei[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ei[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{cachedAt:n})}constructor(n){var r,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},Hw),n);if(this.storageKey=c.storageKey,this.instanceID=(r=ua.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ua.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&dn()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new jw({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Tp(c.fetch),this.lock=c.lock||Ff,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&dn()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=Cw:this.lock=Ff,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Ep()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bf(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Bf(this.memoryStorage)),dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jp}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},a="none";if(dn()&&(r=iw(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),dn()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Yy(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:h,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ue(r)?this._returnResult({error:r}):this._returnResult({error:new bs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,a,u;try{const c=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=n==null?void 0:n.options)===null||u===void 0?void 0:u.captchaToken}},xform:tr}),{data:h,error:p}=c;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(Ue(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,a,u;try{let c;if("email"in n){const{email:y,password:S,options:k}=n;let j=null,P=null;this.flowType==="pkce"&&([j,P]=await Qs(this.storage,this.storageKey)),c=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k==null?void 0:k.emailRedirectTo,body:{email:y,password:S,data:(r=k==null?void 0:k.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken},code_challenge:j,code_challenge_method:P},xform:tr})}else if("phone"in n){const{phone:y,password:S,options:k}=n;c=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:S,data:(a=k==null?void 0:k.data)!==null&&a!==void 0?a:{},channel:(u=k==null?void 0:k.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken}},xform:tr})}else throw new Co("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return await cn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:h,options:p}=n;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Uf})}else if("phone"in n){const{phone:c,password:h,options:p}=n;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Uf})}else throw new Co("You must provide either an email or phone number and a password");const{data:a,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const c=new Ys;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(r){if(Ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,a,u,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,a,u,c,h,p,m,v,y,S,k;let j,P;if("message"in n)j=n.message,P=n.signature;else{const{chain:C,wallet:O,statement:W,options:M}=n;let V;if(dn())if(typeof O=="object")V=O;else{const Ze=window;if("ethereum"in Ze&&typeof Ze.ethereum=="object"&&"request"in Ze.ethereum&&typeof Ze.ethereum.request=="function")V=Ze.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=O}const q=new URL((r=M==null?void 0:M.url)!==null&&r!==void 0?r:window.location.href),Le=await V.request({method:"eth_requestAccounts"}).then(Ze=>Ze).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Le||Le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ke=Rp(Le[0]);let xe=(a=M==null?void 0:M.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!xe){const Ze=await V.request({method:"eth_chainId"});xe=Tw(Ze)}const Fe={domain:q.host,address:ke,statement:W,uri:q.href,version:"1",chainId:xe,nonce:(u=M==null?void 0:M.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(h=(c=M==null?void 0:M.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=M==null?void 0:M.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(v=M==null?void 0:M.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=M==null?void 0:M.signInWithEthereum)===null||y===void 0?void 0:y.resources};j=Rw(Fe),P=await V.request({method:"personal_sign",params:[Pw(j),ke]})}try{const{data:C,error:O}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:P},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:tr});if(O)throw O;if(!C||!C.session||!C.user){const W=new Ys;return this._returnResult({data:{user:null,session:null},error:W})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:O})}catch(C){if(Ue(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(n){var r,a,u,c,h,p,m,v,y,S,k,j;let P,C;if("message"in n)P=n.message,C=n.signature;else{const{chain:O,wallet:W,statement:M,options:V}=n;let q;if(dn())if(typeof W=="object")q=W;else{const ke=window;if("solana"in ke&&typeof ke.solana=="object"&&("signIn"in ke.solana&&typeof ke.solana.signIn=="function"||"signMessage"in ke.solana&&typeof ke.solana.signMessage=="function"))q=ke.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof W!="object"||!(V!=null&&V.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=W}const Le=new URL((r=V==null?void 0:V.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in q&&q.signIn){const ke=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},V==null?void 0:V.signInWithSolana),{version:"1",domain:Le.host,uri:Le.href}),M?{statement:M}:null));let xe;if(Array.isArray(ke)&&ke[0]&&typeof ke[0]=="object")xe=ke[0];else if(ke&&typeof ke=="object"&&"signedMessage"in ke&&"signature"in ke)xe=ke;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in xe&&"signature"in xe&&(typeof xe.signedMessage=="string"||xe.signedMessage instanceof Uint8Array)&&xe.signature instanceof Uint8Array)P=typeof xe.signedMessage=="string"?xe.signedMessage:new TextDecoder().decode(xe.signedMessage),C=xe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${Le.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${Le.href}`,`Issued At: ${(u=(a=V==null?void 0:V.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=V==null?void 0:V.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${V.signInWithSolana.notBefore}`]:[],...!((h=V==null?void 0:V.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${V.signInWithSolana.expirationTime}`]:[],...!((p=V==null?void 0:V.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${V.signInWithSolana.chainId}`]:[],...!((m=V==null?void 0:V.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${V.signInWithSolana.nonce}`]:[],...!((v=V==null?void 0:V.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${V.signInWithSolana.requestId}`]:[],...!((S=(y=V==null?void 0:V.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||S===void 0)&&S.length?["Resources",...V.signInWithSolana.resources.map(xe=>`- ${xe}`)]:[]].join(`
`);const ke=await q.signMessage(new TextEncoder().encode(P),"utf8");if(!ke||!(ke instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=ke}}try{const{data:O,error:W}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Ss(C)},!((k=n.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(j=n.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:tr});if(W)throw W;if(!O||!O.session||!O.user){const M=new Ys;return this._returnResult({data:{user:null,session:null},error:M})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:W})}catch(O){if(Ue(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(n){const r=await ys(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Qy;const{data:c,error:h}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:tr});if(await cn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const p=new Ys;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}catch(c){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:a,token:u,access_token:c,nonce:h}=n,p=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tr}),{data:m,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m||!m.session||!m.user){const y=new Ys;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:v})}catch(r){if(Ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,a,u,c,h;try{if("email"in n){const{email:p,options:m}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Qs(this.storage,this.storageKey));const{error:S}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in n){const{phone:p,options:m}=n,{data:v,error:y}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=m==null?void 0:m.data)!==null&&u!==void 0?u:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:y})}throw new Co("You must provide either an email or phone number.")}catch(p){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,a;try{let u,c;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await Je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:tr});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,v=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(u){if(Ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var r,a,u,c,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Qs(this.storage,this.storageKey));const v=await Je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=n==null?void 0:n.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:_w});return!((c=v.data)===null||c===void 0)&&c.url&&dn()&&!(!((h=n.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)throw a;if(!r)throw new On;const{error:u}=await Je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(Ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:a,type:u,options:c}=n,{error:h}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:a,type:u,options:c}=n,{data:h,error:p}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Co("You must provide either an email or phone number and a type")}catch(r){if(Ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await ys(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<Iu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const h=await ys(this.userStorage,this.storageKey+"-user");h!=null&&h.user?n.user=h.user:n.user=Uu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=yw(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Yr}):await this._useSession(async r=>{var a,u,c;const{data:h,error:p}=r;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new On}:await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:Yr})})}catch(r){if(Ue(r))return Lu(r)&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async a=>{const{data:u,error:c}=a;if(c)throw c;if(!u.session)throw new On;const h=u.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await Qs(this.storage,this.storageKey));const{data:v,error:y}=await Je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:Yr});if(y)throw y;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(a){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new On;const r=Date.now()/1e3;let a=r,u=!0,c=null;const{payload:h}=To(n.access_token);if(h.exp&&(a=h.exp,u=a<=r),u){const{data:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(Ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var a;if(!n){const{data:h,error:p}=r;if(p)throw p;n=(a=h.session)!==null&&a!==void 0?a:void 0}if(!(n!=null&&n.refresh_token))throw new On;const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!dn())throw new Eo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Eo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Eo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Rf("No code detected.");const{data:M,error:V}=await this._exchangeCodeForSession(n.code);if(V)throw V;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:p,expires_at:m,token_type:v}=n;if(!c||!p||!h||!v)throw new Eo("No session defined in URL");const y=Math.round(Date.now()/1e3),S=parseInt(p);let k=y+S;m&&(k=parseInt(m));const j=k-y;j*1e3<=ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${S}s`);const P=k-S;y-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,k,y):y-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,k,y);const{data:C,error:O}=await this._getUser(c);if(O)throw O;const W={provider_token:a,provider_refresh_token:u,access_token:c,expires_in:S,expires_at:k,refresh_token:h,token_type:v,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:W,redirectType:n.type},error:null})}catch(a){if(Ue(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await ys(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:u,error:c}=r;if(c&&!Lu(c))return this._returnResult({error:c});const h=(a=u.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(Jy(p)&&(p.status===404||p.status===401||p.status===403)||Lu(p)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=sw(),a={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async r=>{var a,u;try{const{data:{session:c},error:h}=r;if(h)throw h;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await Qs(this.storage,this.storageKey,!0));try{return await Je(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:a,error:u}=await this._useSession(async c=>{var h,p,m,v,y;const{data:S,error:k}=c;if(k)throw k;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Je(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(u)throw u;return dn()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:n.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(Ue(a))return this._returnResult({data:{provider:n.provider,url:null},error:a});throw a}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var a;try{const{error:u,data:{session:c}}=r;if(u)throw u;const{options:h,provider:p,token:m,access_token:v,nonce:y}=n,S=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c==null?void 0:c.access_token)!==null&&a!==void 0?a:void 0,body:{provider:p,id_token:m,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:tr}),{data:k,error:j}=S;return j?this._returnResult({data:{user:null,session:null},error:j}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new Ys}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:j}))}catch(u){if(await cn(this.storage,`${this.storageKey}-code-verifier`),Ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var a,u;const{data:c,error:h}=r;if(h)throw h;return await Je(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await lw(async u=>(u>0&&await ow(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await Je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:tr})),(u,c)=>{const h=200*Math.pow(2,u);return c&&$u(c)&&Date.now()+h-a<ni})}catch(a){if(this._debug(r,"error",a),Ue(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",a),dn()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await ys(this.storage,this.storageKey);if(u&&this.userStorage){let h=await ys(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:u.user},await ri(this.userStorage,this.storageKey+"-user",h)),u.user=(n=h==null?void 0:h.user)!==null&&n!==void 0?n:Uu()}else if(u&&!u.user&&!u.user){const h=await ys(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(u.user=h.user,await cn(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,u)):u.user=Uu()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const c=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Iu;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Iu}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:h}=await this._callRefreshToken(u.refresh_token);h&&(console.error(h),$u(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(u.access_token);!p&&(h!=null&&h.user)?(u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var r,a;if(!n)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Fo;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new On;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),Ue(c)){const h={data:null,error:c};return $u(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,a=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await cn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await ri(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const c=Lf(u);await ri(this.storage,this.storageKey,c)}else{const u=Lf(r);await ri(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await cn(this.storage,this.storageKey),await cn(this.storage,this.storageKey+"-code-verifier"),await cn(this.storage,this.storageKey+"-user"),this.userStorage&&await cn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ni);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-n)/ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${ni}ms, refresh threshold is ${cc} ticks`),u<=cc&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Pp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,a){const u=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,h]=await Qs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(p.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);u.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var a;const{data:u,error:c}=r;return c?this._returnResult({data:null,error:c}):await Je(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var a,u;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:v}=await Je(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&m.type==="totp"&&(!((u=m==null?void 0:m.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:u,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Uw(n.webauthn.credential_response):zw(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:m}=await Je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:u,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=await Je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Lw(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:$w(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:a}=await this._challenge({factorId:n.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,a,u,c;if(n)try{const{payload:j}=To(n);let P=null;j.aal&&(P=j.aal);let C=P;const{data:{user:O},error:W}=await this.getUser(n);if(W)return this._returnResult({data:null,error:W});((a=(r=O==null?void 0:O.factors)===null||r===void 0?void 0:r.filter(q=>q.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(C="aal2");const V=j.amr||[];return{data:{currentLevel:P,nextLevel:C,currentAuthenticationMethods:V},error:null}}catch(j){if(Ue(j))return this._returnResult({data:null,error:j});throw j}const{data:{session:h},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=To(h.access_token);let v=null;m.aal&&(v=m.aal);let y=v;((c=(u=h.user.factors)===null||u===void 0?void 0:u.filter(j=>j.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(y="aal2");const k=m.amr||[];return{data:{currentLevel:v,nextLevel:y,currentAuthenticationMethods:k},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:a},error:u}=r;return u?this._returnResult({data:null,error:u}):a?await Je(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new On})})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new On});const h=await Je(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&dn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(a){if(Ue(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new On});const h=await Je(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&dn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(a){if(Ue(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await Je(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new On})})}catch(n){if(Ue(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:a},error:u}=r;return u?this._returnResult({data:null,error:u}):a?(await Je(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new On})})}catch(r){if(Ue(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let a=r.keys.find(p=>p.kid===n);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+Hy>u)return a;const{data:c,error:h}=await Je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,a=c.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,r={}){try{let a=n;if(!a){const{data:j,error:P}=await this.getSession();if(P||!j.session)return this._returnResult({data:null,error:P});a=j.session.access_token}const{header:u,payload:c,signature:h,raw:{header:p,payload:m}}=To(a);r!=null&&r.allowExpired||mw(c.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!v){const{error:j}=await this.getUser(a);if(j)throw j;return{data:{claims:c,header:u,signature:h},error:null}}const y=gw(u.alg),S=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,S,h,nw(`${p}.${m}`)))throw new fc("Invalid JWT signature");return{data:{claims:c,header:u,signature:h},error:null}}catch(a){if(Ue(a))return this._returnResult({data:null,error:a});throw a}}}ua.nextInstanceID={};const Gw=ua,Jw="2.95.3";let Zi="";typeof Deno<"u"?Zi="deno":typeof document<"u"?Zi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zi="react-native":Zi="node";const Yw={"X-Client-Info":`supabase-js-${Zi}/${Jw}`},Qw={headers:Yw},Xw={schema:"public"},Zw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e0={};function ca(s){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ca(s)}function t0(s,n){if(ca(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,n);if(ca(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function n0(s){var n=t0(s,"string");return ca(n)=="symbol"?n:n+""}function r0(s,n,r){return(n=n0(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Wf(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,a)}return r}function Wt(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Wf(Object(r),!0).forEach(function(a){r0(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Wf(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}const s0=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),i0=()=>Headers,a0=(s,n,r)=>{const a=s0(r),u=i0();return async(c,h)=>{var p;const m=(p=await n())!==null&&p!==void 0?p:s;let v=new u(h==null?void 0:h.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${m}`),a(c,Wt(Wt({},h),{},{headers:v}))}};function o0(s){return s.endsWith("/")?s:s+"/"}function l0(s,n){var r,a;const{db:u,auth:c,realtime:h,global:p}=s,{db:m,auth:v,realtime:y,global:S}=n,k={db:Wt(Wt({},m),u),auth:Wt(Wt({},v),c),realtime:Wt(Wt({},y),h),storage:{},global:Wt(Wt(Wt({},S),p),{},{headers:Wt(Wt({},(r=S==null?void 0:S.headers)!==null&&r!==void 0?r:{}),(a=p==null?void 0:p.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return s.accessToken?k.accessToken=s.accessToken:delete k.accessToken,k}function u0(s){const n=s==null?void 0:s.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(o0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var c0=class extends Gw{constructor(s){super(s)}},d0=class{constructor(s,n,r){var a,u;this.supabaseUrl=s,this.supabaseKey=n;const c=u0(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:Xw,realtime:e0,auth:Wt(Wt({},Zw),{},{storageKey:h}),global:Qw},m=l0(r??{},p);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=m.auth)!==null&&v!==void 0?v:{},this.headers,m.global.fetch)}this.fetch=a0(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Jv(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new Fy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Mv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:a}=await s.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:u,storageKey:c,flowType:h,lock:p,debug:m,throwOnError:v},y,S){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c0({url:this.authUrl.href,headers:Wt(Wt({},k),y),storageKey:c,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:u,flowType:h,lock:p,debug:m,throwOnError:v,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new hy(this.realtimeUrl.href,Wt(Wt({},s),{},{params:Wt(Wt({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const h0=(s,n,r)=>new d0(s,n,r);function f0(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}f0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p0="https://ipdminzfoguzfooxllqc.supabase.co",m0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwZG1pbnpmb2d1emZvb3hsbHFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1NzE1MTUsImV4cCI6MjA4NjE0NzUxNX0.JP_r_69Ydjj2QhgVbsFywwmobWLrp7ZEg__ZzL_sQE0",Be=h0(p0,m0);function Yt(){return!!Be}const Ap="bt_accounts_v1",Tc="bt_current_username",Dp="bt_logged_in",Pc="bt_current_user_id",ii="bt_books_v1",_s="bt_shelves_v1",ai="bt_challenge_v1",Ip="@boektracker.local";async function Rc(s){const r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(a)).map(c=>c.toString(16).padStart(2,"0")).join("")}function js(){const s=window.localStorage.getItem(Ap);if(!s)return[];try{return JSON.parse(s)}catch{return[]}}function Wo(s){window.localStorage.setItem(Ap,JSON.stringify(s))}function At(){return window.localStorage.getItem(Tc)}function hi(){return Yt()?window.localStorage.getItem(Pc):null}function fi(s,n){window.localStorage.setItem(Tc,s),window.localStorage.setItem(Dp,"true"),n&&window.localStorage.setItem(Pc,n)}function pc(){Yt()&&Ac(),window.localStorage.removeItem(Tc),window.localStorage.removeItem(Dp),window.localStorage.removeItem(Pc)}let Lp=[];async function Vo(){if(!Be)return;const{data:s}=await Be.from("profiles").select("username");Lp=(s??[]).map(n=>n.username)}function Vf(){return Yt()?Lp:js().map(s=>s.username)}async function Kf(){Yt()&&await Vo()}async function g0(){if(!Be)return!1;const{data:{session:s}}=await Be.auth.getSession();if(!(s!=null&&s.user))return!1;const{data:n}=await Be.from("profiles").select("username").eq("id",s.user.id).single();return n!=null&&n.username?(fi(n.username,s.user.id),await Vo(),window.dispatchEvent(new Event("bt_login")),!0):(await Ac(),!1)}async function Oc(s){if(!Be)return null;const{data:n}=await Be.from("profiles").select("id").eq("username",s.trim()).maybeSingle();return(n==null?void 0:n.id)??null}async function da(s,n){if(Yt()&&Be){const h=`${s.trim().toLowerCase()}${Ip}`,{error:p}=await Be.auth.signInWithPassword({email:h,password:n});if(p)return!1;const{data:{user:m}}=await Be.auth.getUser();if(!m)return!1;const{data:v}=await Be.from("profiles").select("username").eq("id",m.id).single();return v!=null&&v.username?(fi(v.username,m.id),await Vo(),!0):(await Ac(),!1)}const r=js(),a=s.trim().toLowerCase(),u=r.find(h=>h.username.toLowerCase()===a);return u?await Rc(n)===u.passwordHash:!1}async function $p(s,n){const r=s.trim();if(!r)return{ok:!1,error:"Vul een gebruikersnaam in."};if(!n||n.length<4)return{ok:!1,error:"Kies een wachtwoord van minstens 4 tekens."};if(Yt()&&Be){const h=`${r.toLowerCase()}${Ip}`,{data:p,error:m}=await Be.auth.signUp({email:h,password:n});if(m)return m.message.includes("already registered")?{ok:!1,error:"Deze gebruikersnaam bestaat al."}:{ok:!1,error:m.message};if(!p.user)return{ok:!1,error:"Registratie mislukt."};const{error:v}=await Be.from("profiles").insert({id:p.user.id,username:r});return v?v.code==="23505"?{ok:!1,error:"Deze gebruikersnaam bestaat al."}:{ok:!1,error:v.message}:(fi(r,p.user.id),await Vo(),{ok:!0})}const a=js();if(a.some(h=>h.username.toLowerCase()===r.toLowerCase()))return{ok:!1,error:"Deze gebruikersnaam bestaat al."};const c=await Rc(n);return a.push({username:r,passwordHash:c}),Wo(a),{ok:!0}}const Bu="NoavHelvoirt",qf="Zara_Oona2020";async function v0(){if(js().length>0)return{migrated:!1};const s=window.localStorage.getItem(ii)!=null,n=window.localStorage.getItem(_s)!=null,r=window.localStorage.getItem(ai)!=null;if(!s&&!n&&!r)return{migrated:!1};if(!(await $p(Bu,qf)).ok)return{migrated:!1};const u=Bu;if(s){const c=window.localStorage.getItem(ii);c&&window.localStorage.setItem(`${ii}_${u}`,c),window.localStorage.removeItem(ii)}if(n){const c=window.localStorage.getItem(_s);if(c)window.localStorage.setItem(`${_s}_${u}`,c);else{const h=JSON.stringify([{id:"wil-ik-lezen",name:"Wil ik lezen",system:!0},{id:"aan-het-lezen",name:"Aan het lezen",system:!0},{id:"gelezen",name:"Gelezen",system:!0}]);window.localStorage.setItem(`${_s}_${u}`,h)}window.localStorage.removeItem(_s)}if(r){const c=window.localStorage.getItem(ai);c&&window.localStorage.setItem(`${ai}_${u}`,c),window.localStorage.removeItem(ai)}return{migrated:!0,message:`Je bestaande data staat nu in account '${Bu}'. Log in met wachtwoord ${qf}. Wijzig je wachtwoord eventueel in Profiel.`}}const y0=[ii,_s,ai,"bt_user_name","bt_friends_v1"];function w0(){const s=js(),n=s.findIndex(r=>r.username==="noa");if(n===-1)return!1;s[n]={...s[n],username:"NoavHelvoirt"},Wo(s);for(const r of y0){const a=`${r}_noa`,u=window.localStorage.getItem(a);u!=null&&(window.localStorage.setItem(`${r}_NoavHelvoirt`,u),window.localStorage.removeItem(a))}return At()==="noa"&&fi("NoavHelvoirt"),!0}async function k0(s,n){const r=At();if(!r)return{ok:!1,error:"Niet ingelogd."};if(Yt()&&Be){if(!await da(r,s))return{ok:!1,error:"Huidige wachtwoord is onjuist."};if(!n||n.length<4)return{ok:!1,error:"Kies een nieuw wachtwoord van minstens 4 tekens."};const{error:m}=await Be.auth.updateUser({password:n});return m?{ok:!1,error:m.message}:{ok:!0}}if(!await da(r,s))return{ok:!1,error:"Huidige wachtwoord is onjuist."};if(!n||n.length<4)return{ok:!1,error:"Kies een nieuw wachtwoord van minstens 4 tekens."};const u=js(),c=await Rc(n),h=u.findIndex(p=>p.username===r);return h===-1?{ok:!1,error:"Account niet gevonden."}:(u[h]={...u[h],passwordHash:c},Wo(u),{ok:!0})}async function Ac(){Be&&await Be.auth.signOut()}const Hf="bt_friend_requests_v1",b0="bt_shared_inbox_v1",_0="bt_user_name";async function S0(s){const n=At();if(!n)return{ok:!1,error:"Niet ingelogd."};if(Yt()&&Be){if(!await da(n,s))return{ok:!1,error:"Wachtwoord is onjuist."};const m=hi();if(!m)return{ok:!1,error:"Sessie ongeldig."};const{error:v}=await Be.from("user_data").delete().eq("user_id",m);if(v)return{ok:!1,error:v.message};const{error:y}=await Be.from("shared_inbox").delete().eq("user_id",m);if(y)return{ok:!1,error:y.message};const{error:S}=await Be.from("friend_requests").delete().eq("from_username",n);if(S)return{ok:!1,error:S.message};const{error:k}=await Be.from("friend_requests").delete().eq("to_username",n);if(k)return{ok:!1,error:k.message};const{error:j}=await Be.from("profiles").delete().eq("id",m);return j?{ok:!1,error:j.message}:(await Be.functions.invoke("delete-auth-user",{method:"POST"}),pc(),{ok:!0})}if(!await da(n,s))return{ok:!1,error:"Wachtwoord is onjuist."};const a=js(),u=a.findIndex(p=>p.username===n);if(u===-1)return{ok:!1,error:"Account niet gevonden."};a.splice(u,1),Wo(a);const c=[`${ii}_${n}`,`${_s}_${n}`,`${ai}_${n}`,`${_0}_${n}`,`bt_friends_v1_${n}`,`${b0}_${n}`];for(const p of c)window.localStorage.removeItem(p);const h=window.localStorage.getItem(Hf);if(h)try{const m=JSON.parse(h).filter(v=>v.from!==n&&v.to!==n);window.localStorage.setItem(Hf,JSON.stringify(m))}catch{}return pc(),{ok:!0}}const mc="bt_books_v1",Gf="bt_shelves_v1",Jf="bt_challenge_v1",ha="bt_friend_requests_v1",x0="bt_friends_v1",j0="bt_shared_inbox_v1";function Ko(){const s=At();return s?`${mc}_${s}`:mc}function Up(s){return`${mc}_${s}`}function Dc(){const s=At();return s?`${Gf}_${s}`:Gf}function $o(){const s=At();return s?`${Jf}_${s}`:Jf}function pa(s){return`${x0}_${s}`}function qo(s){return`${j0}_${s}`}async function zp(){if(!Yt()||!Be)return;const s=hi(),n=At();if(!s||!n)return;const{data:r}=await Be.from("user_data").select("key, value").eq("user_id",s);if(r){const c={};for(const h of r)c[h.key]=h.value;c.books!=null&&window.localStorage.setItem(Ko(),JSON.stringify(c.books)),c.shelves!=null&&window.localStorage.setItem(Dc(),JSON.stringify(c.shelves)),c.challenge!=null&&window.localStorage.setItem($o(),JSON.stringify(c.challenge)),c.friends!=null&&window.localStorage.setItem(pa(n),JSON.stringify(c.friends))}const{data:a}=await Be.from("friend_requests").select("from_username, to_username, status");if(a!=null&&a.length){const c=a.map(h=>({from:h.from_username,to:h.to_username,status:h.status}));window.localStorage.setItem(ha,JSON.stringify(c))}const{data:u}=await Be.from("shared_inbox").select("items").eq("user_id",s).maybeSingle();(u==null?void 0:u.items)!=null&&(window.localStorage.setItem(qo(n),JSON.stringify(u.items)),window.dispatchEvent(new Event("bt_shared_inbox_updated")))}async function Bp(){if(!Yt()||!Be)return;const s=hi(),n=At();if(!s||!n)return;const r=dr(),a=Zr(),u=Go(),c=jn(),h=es();await Promise.all([Be.from("user_data").upsert({user_id:s,key:"books",value:r},{onConflict:"user_id,key"}),Be.from("user_data").upsert({user_id:s,key:"shelves",value:a},{onConflict:"user_id,key"}),u?Be.from("user_data").upsert({user_id:s,key:"challenge",value:u},{onConflict:"user_id,key"}):Promise.resolve(),Be.from("user_data").upsert({user_id:s,key:"friends",value:c},{onConflict:"user_id,key"}),Be.from("shared_inbox").upsert({user_id:s,items:h},{onConflict:"user_id"})])}async function Ic(){if(!Yt()||!Be)return;const{data:s}=await Be.from("friend_requests").select("from_username, to_username, status");if(!(s!=null&&s.length)){window.localStorage.setItem(ha,"[]");return}const n=s.map(r=>({from:r.from_username,to:r.to_username,status:r.status}));window.localStorage.setItem(ha,JSON.stringify(n))}const gc="bt_books_updated_v1",N0="bt_books_channel_v1";let Mu=null;function Mp(){try{return typeof BroadcastChannel>"u"?null:(Mu||(Mu=new BroadcastChannel(N0)),Mu)}catch{return null}}function C0(){window.dispatchEvent(new Event(gc));const s=Mp();s==null||s.postMessage({type:"books_updated"})}function dr(){const s=window.localStorage.getItem(Ko());if(!s)return[];try{return JSON.parse(s)}catch{return[]}}function pi(s){window.localStorage.setItem(Ko(),JSON.stringify(s)),C0();const n=hi();Yt()&&Be&&n&&Be.from("user_data").upsert({user_id:n,key:"books",value:s},{onConflict:"user_id,key"}).then(()=>{})}function Ho(s){function n(){s(dr())}function r(h){h.key===Ko()&&n()}function a(){n()}const u=Mp(),c=u?h=>{var p;((p=h.data)==null?void 0:p.type)==="books_updated"&&n()}:null;return window.addEventListener("storage",r),window.addEventListener(gc,a),u&&c&&u.addEventListener("message",c),()=>{window.removeEventListener("storage",r),window.removeEventListener(gc,a),u&&c&&u.removeEventListener("message",c)}}function Zr(){const s=window.localStorage.getItem(Dc());if(!s)return[{id:"wil-ik-lezen",name:"Wil ik lezen",system:!0},{id:"aan-het-lezen",name:"Aan het lezen",system:!0},{id:"gelezen",name:"Gelezen",system:!0}];try{return JSON.parse(s)}catch{return[]}}function mi(s){window.localStorage.setItem(Dc(),JSON.stringify(s));const n=hi();Yt()&&Be&&n&&Be.from("user_data").upsert({user_id:n,key:"shelves",value:s},{onConflict:"user_id,key"}).then(()=>{})}function Go(){const s=window.localStorage.getItem($o());if(!s)return null;try{return JSON.parse(s)}catch{return null}}function Gr(s){s?window.localStorage.setItem($o(),JSON.stringify(s)):window.localStorage.removeItem($o());const n=hi();Yt()&&Be&&n&&(s?Be.from("user_data").upsert({user_id:n,key:"challenge",value:s},{onConflict:"user_id,key"}).then(()=>{}):Be.from("user_data").delete().eq("user_id",n).eq("key","challenge").then(()=>{}))}function ma(){const s=window.localStorage.getItem(ha);if(!s)return[];try{const n=JSON.parse(s);return Array.isArray(n)?n.filter(r=>r!=null&&typeof r.from=="string"&&typeof r.to=="string"&&(r.status==="pending"||r.status==="accepted"||r.status==="rejected")):[]}catch{return[]}}function Lc(s){window.localStorage.setItem(ha,JSON.stringify(s))}function jn(){const s=At();if(!s)return[];const n=window.localStorage.getItem(pa(s));if(!n)return[];try{const r=JSON.parse(n);return Array.isArray(r)?r.filter(a=>typeof a=="string"):[]}catch{return[]}}function Fp(s,n){window.localStorage.setItem(pa(s),JSON.stringify(n));const r=Be;Yt()&&r&&Oc(s).then(a=>{a&&r&&r.from("user_data").upsert({user_id:a,key:"friends",value:n},{onConflict:"user_id,key"}).then(()=>{})})}function Yf(){const s=At();return s?ma().filter(n=>n.to.toLowerCase()===s.toLowerCase()&&n.status==="pending").map(n=>n.from):[]}function Qf(){const s=At();return s?ma().filter(n=>n.from.toLowerCase()===s.toLowerCase()&&n.status==="pending").map(n=>n.to):[]}function E0(s){const n=At();if(!n)return{ok:!1,error:"Niet ingelogd."};const r=s.trim();if(!r)return{ok:!1,error:"Vul een gebruikersnaam in."};if(r.toLowerCase()===n.toLowerCase())return{ok:!1,error:"Je kunt jezelf geen verzoek sturen."};if(jn().some(h=>h.toLowerCase()===r.toLowerCase()))return{ok:!1,error:"Je bent al Boekbuddies."};const u=ma();return u.some(h=>h.status==="pending"&&(h.from.toLowerCase()===n.toLowerCase()&&h.to.toLowerCase()===r.toLowerCase()||h.from.toLowerCase()===r.toLowerCase()&&h.to.toLowerCase()===n.toLowerCase()))?{ok:!1,error:"Er staat al een verzoek open."}:(Lc([...u,{from:n,to:r,status:"pending"}]),Yt()&&Be&&Be.from("friend_requests").insert({from_username:n,to_username:r,status:"pending"}).then(()=>Ic()),{ok:!0})}function T0(s){const n=At();if(!n)return;const r=s.trim().toLowerCase(),a=ma(),u=a.findIndex(S=>S.from.toLowerCase()===r&&S.to.toLowerCase()===n.toLowerCase()&&S.status==="pending");if(u===-1)return;const c=a.slice();c[u]={...c[u],status:"accepted"},Lc(c);const h=a[u].from,p=jn();p.some(S=>S.toLowerCase()===h.toLowerCase())||Fp(n,[...p,h]);const m=pa(h),v=window.localStorage.getItem(m),y=v?JSON.parse(v):[];y.some(S=>S.toLowerCase()===n.toLowerCase())||window.localStorage.setItem(m,JSON.stringify([...y,n])),Yt()&&Be&&Be.from("friend_requests").update({status:"accepted"}).eq("from_username",h).eq("to_username",n).then(()=>Ic())}function P0(s){const n=At();if(!n)return;const r=s.trim().toLowerCase(),a=ma(),u=a.findIndex(h=>h.from.toLowerCase()===r&&h.to.toLowerCase()===n.toLowerCase()&&h.status==="pending");if(u===-1)return;const c=a.filter((h,p)=>p!==u);Lc(c),Yt()&&Be&&Be.from("friend_requests").delete().eq("from_username",r).eq("to_username",n).then(()=>Ic())}function R0(s){const n=At();if(!n)return;const r=jn().filter(c=>c.toLowerCase()!==s.toLowerCase());Fp(n,r);const a=pa(s),u=window.localStorage.getItem(a);if(u){const c=JSON.parse(u).filter(h=>h.toLowerCase()!==n.toLowerCase());window.localStorage.setItem(a,JSON.stringify(c))}}function O0(s){const n=window.localStorage.getItem(Up(s));if(!n)return[];try{return JSON.parse(n)}catch{return[]}}async function A0(s){if(Yt()&&Be){const n=await Oc(s);if(n){const{data:r}=await Be.from("user_data").select("value").eq("user_id",n).eq("key","books").maybeSingle();if((r==null?void 0:r.value)!=null&&Array.isArray(r.value)){const a=r.value;return window.localStorage.setItem(Up(s),JSON.stringify(a)),a}}}return O0(s)}function es(){const s=At();if(!s)return[];const n=window.localStorage.getItem(qo(s));if(!n)return[];try{const r=JSON.parse(n);return Array.isArray(r)?r:[]}catch{return[]}}function Jo(s,n){window.localStorage.setItem(qo(s),JSON.stringify(n)),window.dispatchEvent(new Event("bt_shared_inbox_updated"));const r=Be;Yt()&&r&&Oc(s).then(a=>{a&&r&&r.from("shared_inbox").upsert({user_id:a,items:n},{onConflict:"user_id"}).then(()=>{})})}function D0(s){const n=window.localStorage.getItem(qo(s));if(!n)return[];try{return JSON.parse(n)}catch{return[]}}function vc(s,n,r){const a=At();if(!a)return{ok:!1,error:"Niet ingelogd."};const u=s.trim();if(!u)return{ok:!1,error:"Kies een Boekbuddy."};if(!jn().some(m=>m.toLowerCase()===u.toLowerCase()))return{ok:!1,error:"Alleen met Boekbuddies kun je delen."};if(!n.length)return{ok:!1,error:"Geen boeken om te delen."};const h={from:a,books:n.map(m=>({title:m.title,authors:m.authors,coverUrl:m.coverUrl,seriesName:m.seriesName})),shelfName:r,sharedAt:new Date().toISOString()},p=D0(u);return Jo(u,[...p,h]),{ok:!0}}function I0(s){const n=At();if(!n)return{added:0,skipped:0};const r=es();if(s<0||s>=r.length)return{added:0,skipped:0};const a=r[s],u=dr(),c=k=>(k??"").trim().toLowerCase(),h=(k,j)=>u.some(P=>c(P.title)===c(k)&&c(P.authors)===c(j)),p=a.books.filter(k=>!h(k.title,k.authors)),m=a.books.length-p.length;let v=0;const y=p.map(k=>({id:`book-${Date.now()}-${v++}-${Math.random().toString(36).slice(2,9)}`,title:k.title,authors:k.authors,coverUrl:k.coverUrl,status:"wil-ik-lezen",order:void 0}));y.length>0&&pi([...u,...y]);const S=r.filter((k,j)=>j!==s);return Jo(n,S),{added:y.length,skipped:m}}function xs(s,n){if(!At()||!s.length)return{added:0,skipped:0};const a=dr(),u=j=>(j??"").trim().toLowerCase(),c=(j,P)=>a.some(C=>u(C.title)===u(j)&&u(C.authors)===u(P)),h=s.filter(j=>!c(j.title,j.authors)),p=s.length-h.length,m={"wil-ik-lezen":"wil-ik-lezen","aan-het-lezen":"aan-het-lezen",gelezen:"gelezen"},v=n.status??(n.shelfId&&m[n.shelfId])??"wil-ik-lezen",y=n.shelfId&&!m[n.shelfId]?[n.shelfId]:void 0;let S=0;const k=h.map(j=>({id:`book-${Date.now()}-${S++}-${Math.random().toString(36).slice(2,9)}`,title:j.title,authors:j.authors,coverUrl:j.coverUrl,status:v,order:void 0,shelfIds:y}));return k.length>0&&pi([...a,...k]),{added:k.length,skipped:p}}function L0(s,n){const r=At();if(!r)return{added:0,skipped:0};const a=es();if(s<0||s>=a.length)return{added:0,skipped:0};const u=a[s],c=n.filter(y=>y>=0&&y<u.books.length).map(y=>u.books[y]);if(c.length===0)return{added:0,skipped:0};const h=xs(c,{status:"wil-ik-lezen"}),p=new Set(n),m=u.books.filter((y,S)=>!p.has(S)),v=m.length===0?a.filter((y,S)=>S!==s):a.map((y,S)=>S===s?{...y,books:m}:y);return Jo(r,v),h}function $0(s){const n=At();if(!n)return;const r=es();if(s<0||s>=r.length)return;const a=r.filter((u,c)=>c!==s);Jo(n,a)}const U0=[1,2,3,4,5];function Wp({value:s=0,onChange:n}){return o.jsx("div",{className:"rating-stars",children:U0.map(r=>o.jsx("button",{type:"button",className:"star-button"+(r<=s?" star-button-active":""),onClick:()=>n==null?void 0:n(r),children:""},r))})}function Vp(s){return s.startsWith("/mobile")?"/mobile":s.startsWith("/web")?"/web":""}function fr(){const s=ns();return Vp(s.pathname)}function Ot(s,n){return n.startsWith("/")?`${s}${n}`:`${s}/${n}`}const li={},Po={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"},z0=[{value:"",label:"Alle talen"},{value:"dut",label:"Nederlands"},{value:"eng",label:"English"},{value:"ger",label:"Deutsch"},{value:"fre",label:"Franais"}],Xf="https://www.googleapis.com/books/v1/volumes",Zf="https://openlibrary.org/search.json",B0="https://itunes.apple.com/search",er=typeof import.meta<"u"?li==null?void 0:li.VITE_GOOGLE_BOOKS_API_KEY:void 0,ep=typeof import.meta<"u"?(li==null?void 0:li.VITE_ITUNES_COUNTRY)??"NL":"NL",tp="bt_google_disabled_until_v1",np="bt_search_cache_v1",Fu=10080*60*1e3,M0=720*60*1e3,rp={"wil-ik-lezen":"wil-ik-lezen","aan-het-lezen":"aan-het-lezen",gelezen:"gelezen"};function Ro({mode:s="full"}={}){const n=hr(),r=fr(),[a,u]=$v(),c=(()=>{const N=a.get("status");return N==="wil-ik-lezen"||N==="aan-het-lezen"||N==="gelezen"?N:"alle"})(),[h,p]=b.useState(()=>dr()),[m,v]=b.useState(""),[y,S]=b.useState([]),[k,j]=b.useState([]),[P,C]=b.useState(!1),[O,W]=b.useState(!1),[M,V]=b.useState(c),q=b.useRef(null),Le=b.useRef(null),ke=b.useRef(!1),[xe,Fe]=b.useState(!1),[Ze,tt]=b.useState(""),[lt,dt]=b.useState(null),ut=b.useMemo(()=>Go(),[]),[Qe,He]=b.useState(!1),[ze,We]=b.useState(""),[re,fe]=b.useState(""),[ae,w]=b.useState(""),[T,oe]=b.useState(""),[je,Ce]=b.useState(""),[F,Te]=b.useState(!1),[J,Me]=b.useState(""),[ht,pe]=b.useState(()=>Zr()),[ft,Ge]=b.useState(null),[St,_t]=b.useState(!1),[qt,yt]=b.useState(""),[L,me]=b.useState(!1),[ue,ge]=b.useState([]),[Se,be]=b.useState(!1),[ve,_e]=b.useState(""),[de,ee]=b.useState(new Set),[Z,Ae]=b.useState(!1),[Pe,te]=b.useState(null),[nt,rt]=b.useState(""),[_,z]=b.useState(""),B=b.useMemo(()=>{const N=new Set;return h.forEach(U=>{U.seriesName&&N.add(U.seriesName)}),Array.from(N).sort()},[h]),Y=b.useRef(null),le=b.useRef(null),Oe=b.useRef(new Map),ye=b.useRef(null);b.useEffect(()=>Ho(p),[]),b.useEffect(()=>{try{const N=window.localStorage.getItem(np);if(!N)return;const U=JSON.parse(N),X=Date.now();for(const[se,he]of Object.entries(U))!he||typeof he.t!="number"||!Array.isArray(he.results)||X-he.t>Fu||Oe.current.set(se,he)}catch{}},[]);function De(N){return[...N].sort((U,X)=>{if(U.status==="wil-ik-lezen"&&X.status==="wil-ik-lezen"){const ce=U.order??0,kt=X.order??0;if(ce>0&&kt===0)return-1;if(ce===0&&kt>0)return 1;if(ce>0&&kt>0&&ce!==kt)return ce-kt;const $e=U.authors.localeCompare(X.authors);if($e!==0)return $e;if(U.seriesName&&X.seriesName){if(U.seriesName!==X.seriesName)return U.seriesName.localeCompare(X.seriesName);const Et=U.seriesNumber??0,Tt=X.seriesNumber??0;return Et!==Tt?Et-Tt:U.title.localeCompare(X.title)}return U.seriesName&&!X.seriesName?-1:!U.seriesName&&X.seriesName?1:U.title.localeCompare(X.title)}else{if(U.status==="wil-ik-lezen"&&X.status!=="wil-ik-lezen")return-1;if(U.status!=="wil-ik-lezen"&&X.status==="wil-ik-lezen")return 1}const se=U.authors.localeCompare(X.authors);if(se!==0)return se;if(U.seriesName&&X.seriesName){if(U.seriesName!==X.seriesName)return U.seriesName.localeCompare(X.seriesName);const ce=U.seriesNumber??0,kt=X.seriesNumber??0;return ce!==kt?ce-kt:U.title.localeCompare(X.title)}if(U.seriesName&&!X.seriesName)return-1;if(!U.seriesName&&X.seriesName)return 1;const he=U.order??0,it=X.order??0;return he!==it?he-it:U.title.localeCompare(X.title)})}const st=b.useMemo(()=>{const N=h.filter(U=>M==="alle"?!0:U.status===M);return De(N)},[h,M]),at=b.useMemo(()=>_?ue.filter(N=>{const U=N.languageCodes;return!U||U.length===0?!1:U.includes(_)}):ue,[ue,_]);function Ve(N){const U=h.find(he=>he.id===N.id);if(U)return U;const X=N.title.trim().toLowerCase(),se=N.authors.trim().toLowerCase();return h.find(he=>he.title.trim().toLowerCase()===X&&(he.authors??"").trim().toLowerCase()===se)}function A(N){p(N),pi(N)}function K(N,U,X){return X==="itunes"?`${X}:${ep}:${U}:${N.trim().toLowerCase()}`:`${X}:${U}:${N.trim().toLowerCase()}`}function ne(N){const U=Oe.current.get(N);return U?Date.now()-U.t>Fu?(Oe.current.delete(N),null):U.results:null}function et(){ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>{try{const N=Date.now(),U={};for(const[X,se]of Oe.current.entries())N-se.t>Fu||(U[X]=se);window.localStorage.setItem(np,JSON.stringify(U))}catch{}},250)}function pt(N,U){Oe.current.set(N,{t:Date.now(),results:U}),et()}function wt(N){if(!N)return"";const U=N.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>/gi,`

`).replace(/<p[^>]*>/gi,"");try{return(new DOMParser().parseFromString(U,"text/html").body.textContent??"").replace(/\n{3,}/g,`

`).trim()}catch{return U.replace(/<[^>]+>/g,"").trim()}}function xt(N){dt(N)}const Ut=s!=="library",Vn=s!=="search";function Nn(){const N=window.localStorage.getItem(tp),U=N?Number(N):0;return Number.isFinite(U)?U:0}function Kn(){const N=Date.now()+M0;window.localStorage.setItem(tp,String(N))}function gn(){return!er||!er.trim()?!1:Date.now()>Nn()}async function sr(N,U,X){const se=new URL(B0);se.searchParams.set("term",N),se.searchParams.set("country",ep),se.searchParams.set("media","ebook"),se.searchParams.set("entity","ebook"),se.searchParams.set("limit",String(Math.min(200,Math.max(1,U))));const he=await fetch(se.toString(),{signal:X.signal});if(!he.ok)throw new Error(`Apple Books error (${he.status})`);const it=await he.json();return(Array.isArray(it==null?void 0:it.results)?it.results:[]).map($e=>{const Et=typeof($e==null?void 0:$e.trackId)=="number"?`itunes:${$e.trackId}`:`itunes:${Math.random().toString(36).slice(2)}`,Tt=($e==null?void 0:$e.trackName)??"Onbekende titel",Qt=($e==null?void 0:$e.artistName)??"Onbekende auteur",jt=($e==null?void 0:$e.artworkUrl100)??($e==null?void 0:$e.artworkUrl60)??void 0,on=($e==null?void 0:$e.description)??($e==null?void 0:$e.longDescription)??void 0;return{id:Et,title:Tt,authors:Qt,coverUrl:jt==null?void 0:jt.replace("http://","https://"),description:on}})}async function pr(N,U,X){const se=new URL(Zf);se.searchParams.set("q",N),se.searchParams.set("limit",String(U));const he=await fetch(se.toString(),{signal:X.signal});if(!he.ok)throw new Error(`Open Library error (${he.status})`);const it=await he.json();return(Array.isArray(it==null?void 0:it.docs)?it.docs:[]).map($e=>{const Et=typeof($e==null?void 0:$e.key)=="string"?$e.key:"",Tt=Et?`openlib:${Et}`:`openlib:doc:${Math.random().toString(36).slice(2)}`,Qt=typeof($e==null?void 0:$e.cover_i)=="number"?$e.cover_i:void 0,jt=Qt?`https://covers.openlibrary.org/b/id/${Qt}-M.jpg`:void 0,on=Array.isArray($e==null?void 0:$e.author_name)?$e.author_name.join(", "):"Onbekende auteur",Cn=typeof($e==null?void 0:$e.number_of_pages_median)=="number"?$e.number_of_pages_median:void 0;return{id:Tt,title:($e==null?void 0:$e.title)??"Onbekende titel",authors:on,coverUrl:jt,pageCount:Cn}})}async function rs(N,U=50){const X=new URL(Zf);X.searchParams.set("author",N.trim()),X.searchParams.set("limit",String(U)),X.searchParams.set("fields","key,title,author_name,cover_i,number_of_pages_median,language");const se=await fetch(X.toString());if(!se.ok)throw new Error(`Open Library error (${se.status})`);const he=await se.json();return(Array.isArray(he==null?void 0:he.docs)?he.docs:[]).map(ce=>{const kt=typeof(ce==null?void 0:ce.key)=="string"?ce.key:"",$e=kt?`openlib:${kt}`:`openlib:doc:${Math.random().toString(36).slice(2)}`,Et=typeof(ce==null?void 0:ce.cover_i)=="number"?ce.cover_i:void 0,Tt=Et?`https://covers.openlibrary.org/b/id/${Et}-M.jpg`:void 0,Qt=Array.isArray(ce==null?void 0:ce.author_name)?ce.author_name.join(", "):N,jt=typeof(ce==null?void 0:ce.number_of_pages_median)=="number"?ce.number_of_pages_median:void 0,on=ce==null?void 0:ce.language,Cn=Array.isArray(on)?on.map(Xt=>{var In;return typeof Xt=="string"?Xt:((In=Xt==null?void 0:Xt.key)==null?void 0:In.replace(/^\/languages\//,""))||null}).filter(Xt=>!!Xt):void 0;return{id:$e,title:(ce==null?void 0:ce.title)??"Onbekende titel",authors:Qt,coverUrl:Tt,pageCount:jt,languageCodes:Cn}})}async function ss(N,U=!1){var X,se,he,it;if(!N.trim()){U?j([]):S([]),tt("");return}try{tt("");const ce=U?5:15,kt=new AbortController;if(U?((X=Y.current)==null||X.abort(),Y.current=kt):((se=le.current)==null||se.abort(),le.current=kt),U){const Xt=K(N,ce,"itunes"),In=ne(Xt);if(In){j(In);return}try{const Cr=await sr(N,ce,kt);if(pt(Xt,Cr),Cr.length>0){j(Cr);return}}catch{}const ar=K(N,ce,"openlibrary"),Hn=ne(ar),Ln=Hn??await pr(N,ce,kt);Hn||pt(ar,Ln),j(Ln);return}const $e=gn(),Et=new URL(Xf);if(Et.searchParams.set("q",N),Et.searchParams.set("maxResults",String(ce)),er&&er.trim()&&Et.searchParams.set("key",er.trim()),$e){const Xt=K(N,ce,"google"),In=ne(Xt);if(In){S(In);return}const ar=await fetch(Et.toString(),{signal:kt.signal}),Hn=await ar.json().catch(()=>({}));if(ar.ok){const Ln=((it=Hn.items)==null?void 0:it.map(Cr=>{var Ns,yi,wi;const $n=Cr.volumeInfo??{},mt=((Ns=$n.imageLinks)==null?void 0:Ns.thumbnail)??((yi=$n.imageLinks)==null?void 0:yi.smallThumbnail)??((wi=$n.imageLinks)==null?void 0:wi.medium)??void 0;let Er=$n.description;Er&&Er.length>500&&(Er=Er.substring(0,500)+"...");const ka=typeof $n.pageCount=="number"?$n.pageCount:void 0;return{id:Cr.id,title:$n.title??"Onbekende titel",authors:($n.authors??[]).join(", ")||"Onbekende auteur",coverUrl:mt==null?void 0:mt.replace("http://","https://"),description:Er||void 0,pageCount:ka}}))??[];pt(Xt,Ln),S(Ln);return}else{const Ln=(he=Hn==null?void 0:Hn.error)==null?void 0:he.message;(ar.status===429||ar.status===403)&&Kn()}}else er&&er.trim();const Tt=K(N,ce,"itunes"),Qt=ne(Tt);if(Qt){S(Qt);return}try{const Xt=await sr(N,ce,kt);if(pt(Tt,Xt),Xt.length>0){S(Xt),er&&er.trim()&&!$e&&tt("Google Books is tijdelijk uitgeschakeld (quota). Zoeken gaat via Apple Books.");return}}catch{}const jt=K(N,ce,"openlibrary"),on=ne(jt),Cn=on??await pr(N,ce,kt);on||pt(jt,Cn),S(Cn),er&&er.trim()&&!$e&&tt("Google Books is tijdelijk uitgeschakeld (quota). Zoeken gaat via Open Library.")}catch(ce){if(ce instanceof DOMException&&ce.name==="AbortError")return;console.error("Search error:",ce),tt("Zoeken lukt nu niet (netwerk/API). Probeer later opnieuw."),j([]),S([])}}async function qn(N){if(N.preventDefault(),!m.trim()){S([]);return}if(C(!0),W(!1),L)try{const U=await rs(m);_e(m.trim()),ge(U),ee(new Set),be(!0)}catch(U){tt(U instanceof Error?U.message:"Zoeken op auteur mislukt.")}finally{C(!1)}else await ss(m,!1),C(!1)}b.useEffect(()=>(q.current&&clearTimeout(q.current),!L&&m.trim().length>=3&&!ke.current?q.current=setTimeout(()=>{ke.current||(ss(m,!0),W(!0))},450):(ke.current=!1,j([]),W(!1)),()=>{q.current&&clearTimeout(q.current)}),[m]),b.useEffect(()=>{function N(U){Le.current&&!Le.current.contains(U.target)&&W(!1)}return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);async function Dt(N){ke.current=!0;const U=`${N.title} ${N.authors}`;v(U),W(!1),j([]),C(!0),await ss(U,!1),C(!1)}function nn(N,U){var $e;const X=Ve(N),se=rp[U],he=(($e=ht.find(Et=>Et.id===U))==null?void 0:$e.name)??"plank";if(X){if(se){if(X.status===se){yt(`Dit boek staat al op "${he}".`),window.setTimeout(()=>yt(""),2500);return}yt(`Dit boek staat al in je bibliotheek met status "${Po[X.status]}".`),window.setTimeout(()=>yt(""),2500);return}const Et=X.shelfIds??[];if(Et.includes(U)){yt(`Dit boek staat al op "${he}".`),window.setTimeout(()=>yt(""),2500);return}const Tt={...X,shelfIds:[...Et,U]},Qt=h.map(jt=>jt.id===X.id?Tt:jt);A(Qt),yt(`Boek toegevoegd aan "${he}".`),window.setTimeout(()=>yt(""),2500);return}const it=se??(M==="alle"?"wil-ik-lezen":M),ce=se!=null?void 0:[U],kt={id:N.id,title:N.title,authors:N.authors,coverUrl:N.coverUrl,description:N.description,pageCount:N.pageCount,status:it,...ce&&{shelfIds:ce}};A([...h,kt]),yt(`Boek toegevoegd aan "${he}".`),window.setTimeout(()=>yt(""),2500)}function ir(N){Ge(N),_t(!0)}function Dn(N,U){const X=h.map(se=>{if(se.id===N){const he={status:U};if(U==="gelezen"&&!se.finishedAt){const it=new Date,ce=it.getFullYear(),kt=String(it.getMonth()+1).padStart(2,"0"),$e=String(it.getDate()).padStart(2,"0");he.finishedAt=`${ce}-${kt}-${$e}`}return{...se,...he}}return se});A(X)}function ga(N,U){const X=h.map(se=>se.id===N?{...se,rating:U}:se);A(X)}function va(N){const U=h.filter(X=>X.id!==N);A(U)}function ya(){We(""),fe(""),w(""),oe(""),Ce(""),Te(!1),Me(""),He(!0)}function gi(){He(!1)}function Yo(N){N==null||N.preventDefault();const U=ze.trim();if(!U)return;const X=ae.trim()!==""&&Number(ae.trim())||void 0,se=M==="alle"?"wil-ik-lezen":M,he=T.trim()||void 0,it=je.trim()!==""&&Number(je.trim())||void 0,ce=J.trim()||void 0,kt={id:`manual-${Date.now()}`,title:U,authors:re.trim(),pageCount:X,status:se,...he&&{seriesName:he},...it!=null&&it>0&&{seriesNumber:it},...ce&&{coverUrl:ce}};A([...h,kt]),gi()}async function zt(N){var U,X,se,he;try{const it=new URL(Xf),ce=`${N.title} ${N.authors}`;it.searchParams.set("q",ce),it.searchParams.set("maxResults","1");const Et=(U=(await(await fetch(it.toString())).json()).items)==null?void 0:U[0];if(!Et)return null;const Tt=Et.volumeInfo??{},Qt=((X=Tt.imageLinks)==null?void 0:X.thumbnail)??((se=Tt.imageLinks)==null?void 0:se.smallThumbnail)??((he=Tt.imageLinks)==null?void 0:he.medium)??void 0;let jt=Tt.description;jt&&jt.length>1e3&&(jt=jt.substring(0,1e3)+"...");const on=typeof Tt.pageCount=="number"?Tt.pageCount:void 0,Cn={};return jt&&(Cn.description=jt),on&&(Cn.pageCount=on),Qt&&!N.coverUrl&&(Cn.coverUrl=Qt.replace("http://","https://")),Cn}catch(it){return console.error("Enrich error for book",N.title,it),null}}async function Qo(){if(!xe){Fe(!0);try{let N=[...h];const U=h.filter(X=>X.status==="wil-ik-lezen");for(const X of U){if(X.description&&X.pageCount)continue;const se=await zt(X);se&&(N=N.map(he=>he.id===X.id?{...he,description:se.description||he.description,pageCount:se.pageCount??he.pageCount,coverUrl:se.coverUrl??he.coverUrl}:he))}N!==h&&A(N)}finally{Fe(!1)}}}function vi(N){n(Ot(r,`/boek/${N}`))}function wa(N){const U=ut==null?void 0:ut.weeklyChallenge;if(!U)return null;const X=U.books.find(it=>it.bookId===N);if(!X)return null;const se=ut.dailyReadingPerBook||{};let he=0;for(const it of Object.values(se)){const ce=it[N];typeof ce=="number"&&ce>he&&(he=ce)}return{current:he,total:X.totalPages}}return o.jsxs("div",{className:"page",children:[Ut&&o.jsxs("section",{className:"card",children:[o.jsxs("form",{onSubmit:qn,className:"search-form",children:[o.jsxs("label",{className:"search-by-author-label",children:[o.jsx("input",{type:"checkbox",checked:L,onChange:N=>me(N.target.checked)}),o.jsx("span",{children:"Zoek op auteur"})]}),o.jsxs("div",{className:"search-input-wrapper",ref:Le,children:[o.jsx("input",{type:"search",placeholder:L?"Naam auteur":"Zoek op titel of auteur",value:m,onChange:N=>{ke.current=!1,v(N.target.value)},onFocus:()=>{!L&&k.length>0&&!ke.current&&W(!0)},className:"search-input"}),O&&k.length>0&&o.jsx("div",{className:"suggestions-dropdown",children:k.map(N=>o.jsxs("div",{className:"suggestion-item",onClick:()=>Dt(N),children:[N.coverUrl&&o.jsx("img",{src:N.coverUrl,alt:N.title,className:"suggestion-cover"}),o.jsxs("div",{className:"suggestion-info",children:[o.jsx("div",{className:"suggestion-title",children:N.title}),o.jsx("div",{className:"suggestion-authors",children:N.authors})]})]},N.id))})]}),o.jsx("button",{type:"submit",className:"primary-button",disabled:P,children:P?"Zoeken...":"Zoeken"})]}),o.jsx("div",{style:{marginTop:"0.75rem"},children:o.jsx("button",{onClick:ya,className:"secondary-button",children:"Handmatig boek toevoegen"})}),Ze&&o.jsx("p",{className:"page-intro-small",style:{marginTop:10},children:Ze}),y.length>0&&o.jsx("div",{className:"search-results",children:y.map(N=>(()=>{const U=Ve(N),X=(U==null?void 0:U.status)==="gelezen";return o.jsxs("div",{className:"search-result-card",role:"button",tabIndex:0,onClick:()=>xt(N),onKeyDown:se=>{(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),xt(N))},title:"Klik voor samenvatting",children:[N.coverUrl?o.jsx("img",{src:N.coverUrl,alt:N.title,className:"book-cover-small"}):o.jsx("div",{className:"book-cover-small-placeholder","aria-hidden":"true",children:N.title.charAt(0).toUpperCase()}),o.jsxs("div",{className:"search-result-main",children:[o.jsx("div",{className:"search-result-title",children:N.title}),o.jsx("div",{className:"search-result-authors",children:N.authors}),o.jsxs("div",{className:"search-result-meta",children:[typeof N.pageCount=="number"&&o.jsxs("span",{className:"search-result-pages",children:[N.pageCount," blz"]}),X&&o.jsx("span",{className:"search-result-status-pill",children:"Al gelezen"}),o.jsx("span",{className:"search-result-hint",children:"Klik voor samenvatting"})]})]}),o.jsx("button",{type:"button",onClick:se=>{se.stopPropagation(),ir(N)},className:"secondary-button",children:"Toevoegen"})]},N.id)})())})]}),Vn&&o.jsxs("section",{className:"card",children:[o.jsxs("header",{className:"section-header",children:[o.jsx("h2",{children:"Mijn bibliotheek"}),o.jsxs("div",{className:"filters",children:[o.jsxs("label",{children:["Status:",o.jsxs("select",{value:M,onChange:N=>{const U=N.target.value;V(U),u(U==="alle"?{}:{status:U})},children:[o.jsx("option",{value:"alle",children:"Alle"}),o.jsx("option",{value:"wil-ik-lezen",children:"Wil ik lezen"}),o.jsx("option",{value:"aan-het-lezen",children:"Aan het lezen"}),o.jsx("option",{value:"gelezen",children:"Gelezen"})]})]}),o.jsx("button",{type:"button",className:"secondary-button",onClick:Qo,disabled:xe,children:xe?"TBR aanvullen...":"TBR-beschrijvingen ophalen"})]})]}),st.length===0?o.jsx("p",{children:"Nog geen boeken in deze lijst."}):o.jsx("div",{className:"book-grid",children:st.map(N=>{const U=wa(N.id),X=N.status==="aan-het-lezen"&&U&&U.total>0;return o.jsxs("article",{className:"book-card",children:[o.jsxs("div",{className:"book-card-header",children:[N.coverUrl&&o.jsx("img",{src:N.coverUrl,alt:N.title,className:"book-cover"}),o.jsxs("div",{className:"book-main",children:[N.seriesName&&o.jsxs("div",{className:"book-series-badge",children:[N.seriesName,N.seriesNumber&&` #${N.seriesNumber}`]}),o.jsx("h3",{children:N.title}),o.jsx("p",{className:"book-authors",children:N.authors})]})]}),X&&o.jsxs("div",{className:"book-card-challenge-progress",children:[o.jsx("span",{className:"book-card-challenge-label",children:"Voortgang (dagelijkse leesdoel)"}),o.jsx("div",{className:"book-card-challenge-bar-wrap",children:o.jsx("div",{className:"book-card-challenge-bar-fill",style:{width:`${Math.min(100,U.current/U.total*100)}%`}})}),o.jsxs("span",{className:"book-card-challenge-pages",children:["Je bent op bladzijde ",o.jsx("strong",{children:U.current})," van ",U.total]})]}),o.jsxs("div",{className:"book-meta",children:[o.jsxs("label",{children:["Status:",o.jsx("select",{value:N.status,onChange:se=>Dn(N.id,se.target.value),children:Object.entries(Po).map(([se,he])=>o.jsx("option",{value:se,children:he},se))})]}),o.jsxs("div",{children:[o.jsx("span",{children:"Beoordeling:"}),o.jsx(Wp,{value:N.rating,onChange:se=>ga(N.id,se)})]})]}),o.jsxs("div",{className:"book-card-actions",children:[o.jsx("button",{type:"button",className:"link-button",onClick:()=>vi(N.id),children:"Details"}),o.jsx("button",{type:"button",className:"link-button destructive",onClick:()=>va(N.id),children:"Verwijderen"})]})]},N.id)})})]}),qt&&o.jsx("div",{className:"toast",children:qt}),St&&ft&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{_t(!1),Ge(null)},children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:N=>N.stopPropagation(),children:[o.jsx("h3",{children:"Kies plank voor dit boek"}),o.jsxs("p",{className:"modal-intro",children:["Naar welke plank wil je"," ",o.jsx("strong",{children:ft.title})," ","van"," ",ft.authors||"onbekende auteur"," ","toevoegen?"]}),o.jsx("ul",{className:"add-to-shelf-list",children:(()=>{const N=Ve(ft);return ht.map(U=>{const X=rp[U.id],se=N?X?N.status===X:(N.shelfIds??[]).includes(U.id):!1;return o.jsx("li",{children:o.jsxs("button",{type:"button",className:`add-to-shelf-item${se?" add-to-shelf-item-disabled":""}`,onClick:()=>{var he;if(se){const it=((he=ht.find(ce=>ce.id===U.id))==null?void 0:he.name)??"plank";yt(`Dit boek staat al op "${it}".`),window.setTimeout(()=>yt(""),2500);return}nn(ft,U.id),_t(!1),Ge(null)},children:[U.name,U.system&&o.jsx("span",{className:"tag",style:{marginLeft:8},children:"Standaard"}),se&&o.jsx("span",{className:"tag",style:{marginLeft:8},children:"Al toegevoegd"})]})},U.id)})})()}),o.jsx("div",{className:"modal-actions",children:o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{_t(!1),Ge(null)},children:"Annuleren"})})]})}),Se&&ve&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{be(!1),Ae(!1),te(null),z("")},children:o.jsxs("div",{className:"modal modal-author-books",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"modal-author-books-header",children:[o.jsxs("h3",{children:["Boeken van ",ve]}),o.jsx("button",{type:"button",className:"modal-close-btn","aria-label":"Sluiten",onClick:()=>{be(!1),Ae(!1),te(null),z("")},children:""})]}),o.jsx("p",{className:"modal-intro",children:"Selecteer de boeken die je wilt toevoegen en kies een plank."}),o.jsxs("div",{className:"author-books-language-filter",children:[o.jsx("label",{htmlFor:"author-language-filter",children:"Taal:"}),o.jsx("select",{id:"author-language-filter",value:_,onChange:N=>z(N.target.value),className:"author-language-select",children:z0.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value||"all"))})]}),o.jsx("div",{className:"author-books-list",children:at.map(N=>{const U=de.has(N.id),X=Ve(N);return o.jsxs("button",{type:"button",className:`author-book-row ${U?"selected":""}`,onClick:()=>{ee(se=>{const he=new Set(se);return he.has(N.id)?he.delete(N.id):he.add(N.id),he})},children:[N.coverUrl?o.jsx("img",{src:N.coverUrl,alt:"",className:"author-book-cover"}):o.jsx("div",{className:"author-book-cover author-book-cover-placeholder",children:N.title.charAt(0)}),o.jsxs("div",{className:"author-book-info",children:[o.jsx("span",{className:"author-book-title",children:N.title}),N.pageCount!=null&&o.jsxs("span",{className:"author-book-meta",children:[N.pageCount," blz"]}),X&&o.jsx("span",{className:"author-book-badge",children:"Al in bibliotheek"})]}),U&&o.jsx("span",{className:"author-book-check",children:""})]},N.id)})}),ue.length===0&&o.jsx("p",{className:"page-intro-small",children:"Geen boeken gevonden voor deze auteur."}),ue.length>0&&at.length===0&&o.jsx("p",{className:"page-intro-small",children:"Geen boeken in de geselecteerde taal. Kies een andere taal."}),o.jsxs("div",{className:"modal-author-books-actions",children:[de.size>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"primary-button",onClick:()=>Ae(!Z),children:[de.size," geselecteerd  Toevoegen aan plank"]}),Z&&o.jsx("div",{className:"author-shelf-picker",children:Pe?o.jsxs("div",{className:"custom-shelf-status-picker",children:[o.jsx("p",{className:"custom-shelf-status-label",children:"Kies status voor deze plank"}),["wil-ik-lezen","aan-het-lezen","gelezen"].map(N=>o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{const U=ue.filter(se=>de.has(se.id)).map(se=>({title:se.title,authors:se.authors,coverUrl:se.coverUrl})),X=xs(U,{status:N,shelfId:Pe});yt(`${X.added} toegevoegd, ${X.skipped} stond/stonden al in je lijst.`),window.setTimeout(()=>yt(""),3e3),be(!1),Ae(!1),te(null),z(""),ee(new Set)},children:Po[N]},N)),o.jsx("button",{type:"button",className:"link-button",onClick:()=>te(null),children:"Terug"})]}):o.jsxs(o.Fragment,{children:[ht.map(N=>o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{if(N.system){const U=ue.filter(se=>de.has(se.id)).map(se=>({title:se.title,authors:se.authors,coverUrl:se.coverUrl})),X=xs(U,{shelfId:N.id});yt(`${X.added} toegevoegd, ${X.skipped} stond/stonden al in je lijst.`),window.setTimeout(()=>yt(""),3e3),be(!1),Ae(!1),z(""),ee(new Set)}else te(N.id)},children:N.name},N.id)),o.jsxs("div",{className:"add-to-shelf-new",children:[o.jsx("input",{type:"text",value:nt,onChange:N=>rt(N.target.value),placeholder:"Nieuwe plank naam",className:"add-to-shelf-new-input"}),o.jsx("button",{type:"button",className:"add-to-shelf-item add-to-shelf-new-btn",disabled:!nt.trim(),onClick:()=>{const N=nt.trim();if(!N)return;const U={id:`shelf-${Date.now()}`,name:N},X=[...ht,U];mi(X),pe(X),te(U.id),rt("")},children:"Nieuwe plank aanmaken"})]})]})})]}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{be(!1),Ae(!1),te(null),z("")},children:"Sluiten"})]})]})}),Qe&&o.jsx("div",{className:"modal-backdrop",onClick:gi,children:o.jsxs("div",{className:"modal manual-book-modal",onClick:N=>N.stopPropagation(),children:[o.jsx("h3",{children:"Handmatig boek toevoegen"}),o.jsxs("form",{onSubmit:Yo,className:"manual-book-form",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Titel *"}),o.jsx("input",{type:"text",value:ze,onChange:N=>We(N.target.value),placeholder:"Bijv. De avond is ongemak",autoFocus:!0,required:!0})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Auteur(s)"}),o.jsx("input",{type:"text",value:re,onChange:N=>fe(N.target.value),placeholder:"Bijv. Marieke Lucas Rijneveld"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Aantal pagina's (optioneel)"}),o.jsx("input",{type:"number",value:ae,onChange:N=>w(N.target.value),placeholder:"Bijv. 320",min:1})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Serie (optioneel)"}),!F&&B.length>0?o.jsx("div",{className:"series-select-wrapper",children:o.jsxs("select",{value:T,onChange:N=>{const U=N.target.value;U==="__new__"?(Te(!0),oe("")):oe(U)},className:"series-select",children:[o.jsx("option",{value:"",children:"Geen serie"}),B.map(N=>o.jsx("option",{value:N,children:N},N)),o.jsx("option",{value:"__new__",children:"+ Nieuwe serie toevoegen"})]})}):o.jsxs("div",{className:"series-input-wrapper",children:[o.jsx("input",{type:"text",value:T,onChange:N=>oe(N.target.value),placeholder:"Bijv. De zeven zussen",className:"series-input"}),B.length>0&&o.jsx("button",{type:"button",className:"link-button",onClick:()=>Te(!1),children:"Selecteer bestaande serie"})]})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Nummer in serie (optioneel)"}),o.jsx("input",{type:"number",value:je,onChange:N=>Ce(N.target.value),placeholder:"Bijv. 1",min:1,className:"manual-book-series-num"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Link naar kaft (optioneel)"}),o.jsx("input",{type:"url",value:J,onChange:N=>Me(N.target.value),placeholder:"Bijv. https://... afbeelding.jpg"})]}),o.jsxs("p",{className:"manual-book-hint",children:['Het boek wordt toegevoegd aan "',M==="alle"?"Wil ik lezen":Po[M],'".']}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:gi,children:"Annuleren"}),o.jsx("button",{type:"submit",className:"primary-button",children:"Toevoegen"})]})]})]})}),lt&&o.jsx("div",{className:"modal-backdrop",onClick:()=>dt(null),children:o.jsxs("div",{className:"modal",onClick:N=>{N.stopPropagation()},children:[o.jsx("h3",{children:lt.title}),o.jsx("p",{className:"modal-intro",children:lt.authors}),typeof lt.pageCount=="number"&&o.jsxs("div",{className:"modal-page-count-edit",style:{marginTop:0},children:[o.jsx("span",{className:"modal-page-count-label",children:"Pagina's:"}),o.jsx("span",{className:"modal-page-count-value",children:lt.pageCount})]}),lt.coverUrl&&o.jsx("div",{className:"modal-book-cover",children:o.jsx("img",{src:lt.coverUrl,alt:lt.title})}),o.jsx("p",{className:"modal-description",children:wt(lt.description)||"Er is nog geen samenvatting beschikbaar voor dit boek."}),o.jsx("div",{className:"modal-actions",children:o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>dt(null),children:"Sluiten"})})]})})]})}const sp=!1;function Gt(s){const n=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${n}-${r}-${a}`}function Lt(s){return new Date(s+"T00:00:00")}function Sr(s){const[n,r,a]=s.split("-");return!a||!r||!n?s:`${a}-${r}-${n}`}function Wu(s){return["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"][s.getDay()]}function F0(s){const n=new Date(s.getFullYear(),0,0),r=s.getTime()-n.getTime()+(n.getTimezoneOffset()-s.getTimezoneOffset())*60*1e3;return Math.floor(r/(1e3*60*60*24))}function Vu(){const n=fr()==="/mobile",[r,a]=b.useState(()=>Go()),[u,c]=b.useState(()=>(r==null?void 0:r.targetBooks.toString())??""),[h,p]=b.useState(()=>(r==null?void 0:r.year.toString())??new Date().getFullYear().toString()),[m,v]=b.useState(()=>{var L;return((L=r==null?void 0:r.weeklyPages)==null?void 0:L.toString())??""}),[y,S]=b.useState(()=>(r==null?void 0:r.startDate)??Gt(new Date)),[k,j]=b.useState(()=>(r==null?void 0:r.endDate)??Gt(new Date)),[P,C]=b.useState(()=>(r==null?void 0:r.startPage)!=null?String(r.startPage):""),[O,W]=b.useState(null),M=b.useMemo(()=>dr(),[]),[V,q]=b.useState(!1),[Le,ke]=b.useState(!1),[xe,Fe]=b.useState(null),[Ze,tt]=b.useState(()=>{var L;return((L=r==null?void 0:r.weeklyChallenge)==null?void 0:L.startDate)??Gt(new Date)}),[lt,dt]=b.useState(()=>{var L;return((L=r==null?void 0:r.weeklyChallenge)==null?void 0:L.endDate)??Gt(new Date)}),[ut,Qe]=b.useState(()=>{var L;return((L=r==null?void 0:r.weeklyChallenge)==null?void 0:L.books.length)||1}),[He,ze]=b.useState(()=>{var be,ve,_e;const L=((be=r==null?void 0:r.weeklyChallenge)==null?void 0:be.books)||[];if(L.length===0)return[{totalPages:"",dailyPages:{},selectedDays:[]}];const me=L[0]?Lt(((ve=r==null?void 0:r.weeklyChallenge)==null?void 0:ve.startDate)||Gt(new Date)):new Date,ue=L[0]?Lt(((_e=r==null?void 0:r.weeklyChallenge)==null?void 0:_e.endDate)||Gt(new Date)):new Date,ge=[];let Se=new Date(me);for(;Se<=ue;)ge.push(Gt(Se)),Se.setDate(Se.getDate()+1);return L.map(de=>({bookId:de.bookId,totalPages:de.totalPages?String(de.totalPages):"",dailyPages:ge.reduce((ee,Z)=>(ee[Z]=de.dailyPages[Z]?String(de.dailyPages[Z]):"",ee),{}),selectedDays:Object.keys(de.dailyPages).filter(ee=>de.dailyPages[ee]>0)}))}),[We,re]=b.useState([]),[fe,ae]=b.useState([]);function w(L){ze(me=>{const ue=[...me];if(L>ue.length){const ge=Lt(Ze),Se=Lt(lt),be=[];let ve=new Date(ge);for(;ve<=Se;)be.push(Gt(ve)),ve.setDate(ve.getDate()+1);for(;ue.length<L;)ue.push({totalPages:"",dailyPages:be.reduce((_e,de)=>(_e[de]="",_e),{}),selectedDays:[]})}else L<ue.length&&(ue.length=L);return ue})}function T(L){if(L){Fe(L),tt(L.startDate),dt(L.endDate),Qe(L.books.length);const me=Lt(L.startDate),ue=Lt(L.endDate),ge=[];let Se=new Date(me);for(;Se<=ue;)ge.push(Gt(Se)),Se.setDate(Se.getDate()+1);ze(L.books.map(be=>({totalPages:be.totalPages?String(be.totalPages):"",dailyPages:ge.reduce((ve,_e)=>(ve[_e]=be.dailyPages[_e]?String(be.dailyPages[_e]):"",ve),{}),selectedDays:Object.keys(be.dailyPages).filter(ve=>be.dailyPages[ve]>0)})))}else{const me=new Date,ue=Gt(me),ge=(()=>{const de=new Date(me);return de.setDate(de.getDate()+6),Gt(de)})();Fe(null),tt(ue),dt(ge),Qe(1),re([]),ae([]);const Se=Lt(ue),be=Lt(ge),ve=[];let _e=new Date(Se);for(;_e<=be;)ve.push(Gt(_e)),_e.setDate(_e.getDate()+1);ze([{totalPages:"",dailyPages:ve.reduce((de,ee)=>(de[ee]="",de),{}),selectedDays:[]}])}ke(!0)}function oe(L){const me=He[L];if(!me||!me.totalPages||me.selectedDays.length===0)return;const ue=Number(me.totalPages),ge=me.selectedDays;let Se=ue;const be={};ge.forEach((ve,_e)=>{const de=ge.length-_e,ee=Math.ceil(Se/de);be[ve]=ee,Se-=ee}),ze(ve=>{const _e=[...ve];return _e[L]={..._e[L],dailyPages:{..._e[L].dailyPages,...Object.fromEntries(Object.entries(be).map(([de,ee])=>[de,String(ee)]))}},_e})}function je(L){if(!r)return;const me=Lt(Ze),ue=Lt(lt),ge=[];let Se=new Date(me);for(;Se<=ue;)ge.push(Gt(Se)),Se.setDate(Se.getDate()+1);const ve=(L&&L.length>0?L:He).map((ee,Z)=>{const Ae={};return ge.forEach(Pe=>{const te=Number(ee.dailyPages[Pe]||0);te>0&&(Ae[Pe]=te)}),{bookId:ee.bookId||`week-book-${Z+1}`,totalPages:Number(ee.totalPages)||0,dailyPages:Ae,days:ee.selectedDays.length}}),_e={id:(xe==null?void 0:xe.id)||`week-${Date.now()}`,startDate:Ze,endDate:lt,books:ve,completed:(xe==null?void 0:xe.completed)||!1},de={...r,weeklyChallenge:_e,startDate:Ze,endDate:lt,weeklyPages:ve.reduce((ee,Z)=>ee+Z.totalPages,0)};xe||(de.dailyReading={},de.dailyReadingPerBook={}),Gr(de),a(de),ke(!1),Fe(null)}function Ce(){if(!r)return;const L={...r,weeklyChallenge:void 0,dailyReading:{},startDate:void 0,endDate:void 0,weeklyPages:void 0};Gr(L),a(L)}function F(){if(!(r!=null&&r.weeklyChallenge))return;const L={...r,weeklyChallenge:{...r.weeklyChallenge,completed:!r.weeklyChallenge.completed}};Gr(L),a(L)}const Te=b.useMemo(()=>{var Pe;const L=r==null?void 0:r.weeklyChallenge;if(!L&&(!(r!=null&&r.weeklyPages)||!r.startDate||!r.endDate))return null;const me=Lt(L?L.startDate:r.startDate),ue=Lt(L?L.endDate:r.endDate);if(me.setHours(0,0,0,0),ue.setHours(0,0,0,0),ue<me)return null;const ge=r.dailyReading||{},Se=new Set(r.offDays??[]),be=new Set(r.offDaysAuto??[]),ve=new Set(r.offDaysManual??[]),_e=te=>be.has(te)||Se.has(te),de=te=>ve.has(te),ee=[],Z=[];let Ae=new Date(me);for(;Ae<=ue;){const te=new Date(Ae),nt=Gt(te);Z.push({date:te,dateStr:nt}),Ae.setDate(Ae.getDate()+1)}if(L){const te=r.dailyReadingPerBook||{},nt=Object.keys(te).length>0,rt=nt?{}:{...ge};nt&&Z.forEach(Ve=>{rt[Ve.dateStr]=L.books.reduce((A,K)=>{var ne;return A+(((ne=te[Ve.dateStr])==null?void 0:ne[K.bookId])??0)},0)});const _={},z={};let B=0;for(const Ve of Z){let A=0;L.books.forEach(K=>{A+=K.dailyPages[Ve.dateStr]||0}),_[Ve.dateStr]=A,!_e(Ve.dateStr)&&!de(Ve.dateStr)&&(B+=A,z[Ve.dateStr]=B)}let Y=0;const le=[],Oe=[];for(const Ve of Z){const A=rt[Ve.dateStr]??Y,K=Math.max(0,A-Y);Oe.push(A),le.push(K),Y=A}let De=Oe[Oe.length-1]??0;const st=[];for(let Ve=0;Ve<Z.length;Ve++){const A=Z[Ve];if(_e(A.dateStr)||de(A.dateStr)){st.push(0);continue}const K=_[A.dateStr]||0,ne=Math.min(K,De);st.push(ne),De=Math.max(0,De-ne)}const at=[];for(let Ve=0;Ve<Z.length;Ve++){const A=Z[Ve],K=[];L.books.forEach((ne,et)=>{if((ne.dailyPages[A.dateStr]||0)<=0)return;let wt=0;for(let Ut=0;Ut<=Ve;Ut++)wt+=ne.dailyPages[Z[Ut].dateStr]||0;const xt=M.find(Ut=>Ut.id===ne.bookId);K.push({bookId:ne.bookId,bookTitle:(xt==null?void 0:xt.title)??`Boek ${et+1}`,cumulativePage:wt,totalPages:ne.totalPages})}),at.push(K)}for(let Ve=0;Ve<Z.length;Ve++){const A=Z[Ve],K=Oe[Ve],ne=le[Ve],et=_e(A.dateStr),pt=de(A.dateStr),wt=et||pt,xt=wt?0:_[A.dateStr]||0,Ut=wt?0:st[Ve],Vn=wt?0:Math.max(0,xt-Ut);ee.push({date:A.dateStr,dateObj:A.date,target:Math.ceil(xt),cumulativePages:K,pagesReadToday:Math.round(ne*10)/10,effectiveRead:Math.round(Ut*10)/10,remaining:Math.ceil(Vn),plannedCumulative:z[A.dateStr],bookTargets:(Pe=at[Ve])!=null&&Pe.length?at[Ve]:void 0})}}else{const te=r.startPage??0,nt=r.weeklyPages,rt=nt-te;if(rt<=0)return null;const _=Z.filter(A=>!_e(A.dateStr)&&!de(A.dateStr));if(_.length===0)return null;const z=rt/_.length,B={};for(let A=0;A<_.length;A++){const K=Math.ceil(rt*(A+1)/_.length),ne=Math.min(te+K,nt);B[_[A].dateStr]=ne}let Y=te;const le=[],Oe=[];for(const A of Z){const K=ge[A.dateStr]||Y,ne=Math.max(0,K-Y);Oe.push(K),le.push(ne),Y=K}const ye=Oe[Oe.length-1]??te;let st=Math.max(0,ye-te);const at=[];let Ve=0;for(let A=0;A<Z.length;A++){const K=Z[A];if(_e(K.dateStr)||de(K.dateStr)){at.push(0);continue}const ne=z+Ve,et=Math.min(ne,st);at.push(et),st=Math.max(0,st-et),et<ne?Ve=ne-et:Ve=0}Ve=0;for(let A=0;A<Z.length;A++){const K=Z[A],ne=Oe[A],et=le[A],pt=_e(K.dateStr),wt=de(K.dateStr),xt=pt||wt,Ut=xt?0:z+Ve,Vn=xt?0:at[A],Nn=xt?0:Math.max(0,Ut-Vn);!pt&&!wt&&(Vn<Ut?Ve=Ut-Vn:Ve=0),ee.push({date:K.dateStr,dateObj:K.date,target:Math.round(Ut*10)/10,cumulativePages:ne,pagesReadToday:Math.round(et*10)/10,effectiveRead:Math.round(Vn*10)/10,remaining:Math.round(Nn*10)/10,plannedCumulative:B[K.dateStr]})}}return ee},[r,M]),J=b.useMemo(()=>{if(!r)return null;const L=new Date,me=r.year,ue=L.getFullYear(),ge=365+(me%4===0?1:0),Se=me===ue?F0(L):ge,ve=M.filter(Pe=>Pe.status!=="gelezen"?!1:Pe.finishedAt?new Date(Pe.finishedAt).getFullYear()===me:me===ue).length,_e=r.targetBooks*Se/ge,de=ve-_e,ee=Math.round(de*10)/10;let Z="op-schema",Ae="";return de>.5?(Z="voor",Ae=`Je loopt ${Math.abs(ee)} boeken voor op schema`):de<-.5?(Z="achter",Ae=`Je loopt ${Math.abs(ee)} boeken achter op schema`):Ae="Je ligt precies op schema",{finishedCount:ve,expectedByNow:_e.toFixed(1),remaining:Math.max(r.targetBooks-ve,0),status:Z,statusText:Ae,diff:ee}},[M,r]);function Me(){const L=Number(u),me=Number(h);if(!L||!me)return;const ue={year:me,targetBooks:L,weeklyPages:m?Number(m):void 0,dailyReading:(r==null?void 0:r.dailyReading)||{},startDate:y||(r==null?void 0:r.startDate),endDate:k||(r==null?void 0:r.endDate),offDays:(r==null?void 0:r.offDays)||[],offDaysAuto:(r==null?void 0:r.offDaysAuto)||(r==null?void 0:r.offDays)||[],offDaysManual:(r==null?void 0:r.offDaysManual)||[],startPage:P?Number(P):r==null?void 0:r.startPage};Gr(ue),a(ue),q(!1)}function ht(){const L=r==null?void 0:r.weeklyChallenge,me=L?Lt(L.startDate):r!=null&&r.startDate?Lt(r.startDate):null,ue=L?Lt(L.endDate):r!=null&&r.endDate?Lt(r.endDate):null;if(!me||!ue||ue<me)return[];const ge=[],Se=new Date(me);for(;Se<=ue;)ge.push(Gt(Se)),Se.setDate(Se.getDate()+1);return ge}function pe(L,me){if(!r)return;const ue=ht(),ge=ue.indexOf(L),Se={...r.dailyReading};for(let ve=ge>=0?ge:0;ve<ue.length;ve++)Se[ue[ve]]=me;const be={...r,dailyReading:Se};Gr(be),a(be)}function ft(L,me,ue){if(!(r!=null&&r.weeklyChallenge))return;const ge=ht(),Se=ge.indexOf(L),be={...r.dailyReadingPerBook||{}};for(let de=Se>=0?Se:0;de<ge.length;de++){const ee=ge[de];be[ee]={...be[ee],[me]:ue}}const ve={...r.dailyReading};for(let de=Se>=0?Se:0;de<ge.length;de++){const ee=ge[de],Z=r.weeklyChallenge.books.reduce((Ae,Pe)=>{var te;return Ae+(((te=be[ee])==null?void 0:te[Pe.bookId])??0)},0);ve[ee]=Z}const _e={...r,dailyReadingPerBook:be,dailyReading:ve};Gr(_e),a(_e)}function Ge(L,me,ue){r&&ft(L.date,me,ue)}function St(L){var be;if(!r)return;if(L.bookTargets&&L.bookTargets.length>0){L.bookTargets.forEach(ve=>{ft(L.date,ve.bookId,ve.cumulativePage)});return}let me=0;const ue=new Date(L.dateObj);ue.setDate(ue.getDate()-1);const ge=Gt(ue);me=((be=r.dailyReading)==null?void 0:be[ge])||0;const Se=me+L.target;pe(L.date,Math.ceil(Se))}function _t(){Gr(null),a(null)}function qt(){p(String(new Date().getFullYear()+1)),c(""),q(!0)}const yt=o.jsxs("form",{onSubmit:L=>{L.preventDefault(),Me()},className:"challenge-form",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Jaar"}),o.jsx("input",{type:"number",value:h,onChange:L=>p(L.target.value),min:"2000",max:"2100"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Aantal boeken"}),o.jsx("input",{type:"number",value:u,onChange:L=>c(L.target.value),min:"1"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Pagina's in het boek"}),o.jsx("input",{type:"number",value:m,onChange:L=>v(L.target.value),min:"1",placeholder:"Bijv. 467"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Begonnen op bladzijde (optioneel)"}),o.jsx("input",{type:"number",value:P,onChange:L=>C(L.target.value),min:"0",placeholder:"Bijv. 137"})]}),o.jsxs("div",{className:"form-field-inline",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Begin van het doel"}),o.jsx("input",{type:"date",value:y,onChange:L=>S(L.target.value)})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Einde van het doel"}),o.jsx("input",{type:"date",value:k,onChange:L=>j(L.target.value),min:y})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"submit",className:"primary-button",children:"Doel opslaan"}),r&&o.jsx("button",{type:"button",onClick:()=>{_t(),q(!1)},className:"secondary-button",children:"Doel wissen"})]})]});return o.jsxs("div",{className:"page",children:[V&&o.jsx("div",{className:"modal-backdrop",onClick:()=>q(!1),children:o.jsxs("div",{className:"modal year-challenge-modal",onClick:L=>L.stopPropagation(),children:[o.jsx("h3",{children:"Jaardoel bewerken"}),o.jsx("p",{className:"modal-intro",children:"Stel je leesdoel in voor het jaar: aantal boeken."}),o.jsxs("form",{onSubmit:L=>{L.preventDefault(),Me()},className:"challenge-form",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Jaar"}),o.jsx("input",{type:"number",value:h,onChange:L=>p(L.target.value),min:"2000",max:"2100"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Aantal boeken"}),o.jsx("input",{type:"number",value:u,onChange:L=>c(L.target.value),min:"1"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>q(!1),children:"Annuleren"}),o.jsx("button",{type:"submit",className:"primary-button",children:"Doel opslaan"}),r&&o.jsx("button",{type:"button",onClick:()=>{_t(),q(!1)},className:"secondary-button",children:"Doel wissen"})]})]})]})}),n?o.jsx(o.Fragment,{children:r?o.jsxs(o.Fragment,{children:[J&&o.jsxs("section",{className:`card challenge-mobile-progress-hero challenge-mobile-progress-${J.finishedCount>=r.targetBooks?"behaald":J.status}`,children:[o.jsxs("div",{className:"challenge-mobile-progress-heading",children:[o.jsxs("h2",{children:["Voortgang ",r.year]}),o.jsx("button",{type:"button",className:"link-button challenge-mobile-progress-edit",onClick:()=>q(!0),children:"Bewerken"})]}),o.jsx("div",{className:"challenge-mobile-progress-bar-wrapper",children:o.jsx("div",{className:"challenge-mobile-progress-bar-fill",style:{width:`${Math.min(100,J.finishedCount/r.targetBooks*100)}%`}})}),o.jsxs("p",{className:"challenge-mobile-progress-count",children:[o.jsx("strong",{children:J.finishedCount})," van ",o.jsx("strong",{children:r.targetBooks})," boeken"]}),J.status==="achter"&&o.jsxs("p",{className:"challenge-mobile-progress-expected",children:["Om op schema te liggen: ",o.jsx("strong",{children:J.expectedByNow})," boeken"]}),J.finishedCount>=r.targetBooks?o.jsxs("div",{className:"challenge-mobile-progress-behaald-block",children:[o.jsx("span",{className:"challenge-mobile-progress-behaald-text",children:"Doel behaald! "}),o.jsx("button",{type:"button",className:"primary-button challenge-mobile-progress-new-year",onClick:qt,children:"Doel voor nieuw jaar instellen"})]}):o.jsxs("p",{className:`challenge-mobile-progress-status challenge-mobile-status-${J.status}`,children:[J.statusText,J.status==="voor"&&" ",J.status==="op-schema"&&" ",J.status==="achter"&&" "]})]}),o.jsxs("section",{className:"card challenge-mobile-summary-card",children:[o.jsx("h2",{children:"Weekchallenge"}),r.weeklyChallenge?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"challenge-mobile-summary-text",children:[Sr(r.weeklyChallenge.startDate)," t/m ",Sr(r.weeklyChallenge.endDate),"  ",r.weeklyChallenge.books.length," boeken",r.weeklyChallenge.completed&&"   Voltooid"]}),(()=>{const L=r.weeklyChallenge,me=L.books.reduce((ve,_e)=>ve+(_e.totalPages||0),0),ue=new Set;L.books.forEach(ve=>{Object.keys(ve.dailyPages).forEach(_e=>ue.add(_e))});const ge=ue.size,Se=ge>0?Math.ceil(me/ge):0,be=L.books.map(ve=>M.find(_e=>_e.id===ve.bookId)).filter(Boolean);return!me||!ge?null:o.jsxs("p",{className:"challenge-mobile-summary-text",children:[be.length>0&&o.jsx(o.Fragment,{children:be.map(ve=>o.jsxs("span",{className:"challenge-week-titles-line",children:[o.jsx("strong",{children:ve.title}),o.jsx("br",{})]},ve.id))}),"In totaal ",o.jsxs("strong",{children:[me," pagina's"]})," in"," ",o.jsxs("strong",{children:[ge," leesdagen"]}),"  ongeveer"," ",o.jsxs("strong",{children:[Se," blz per dag"]}),"."]})})(),o.jsxs("div",{className:"challenge-mobile-summary-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>T(r.weeklyChallenge),children:"Bewerken"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:F,children:r.weeklyChallenge.completed?"Niet voltooid":"Afvinken"}),r.weeklyChallenge.completed&&o.jsx("button",{type:"button",className:"primary-button",onClick:()=>T(),children:"Nieuwe weekchallenge"}),o.jsx("button",{type:"button",className:"link-button destructive",onClick:Ce,children:"Verwijderen"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"page-intro-small",children:"Geen actieve weekchallenge."}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>T(),children:"Nieuwe weekchallenge"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"page-intro challenge-page-mobile-intro",children:"Stel een jaardoel in (aantal boeken) en zie of je op schema ligt."}),o.jsxs("section",{className:"card challenge-mobile-summary-card",children:[o.jsx("p",{className:"page-intro-small",children:"Nog geen jaardoel ingesteld."}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>q(!0),children:"Jaardoel instellen"})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"page-intro",children:"Stel een jaardoel in (aantal boeken) en zie of je op schema ligt om het te halen."}),o.jsxs("section",{className:"card",children:[o.jsx("h2",{children:"Mijn doel"}),yt]}),r&&o.jsxs("section",{className:"card",children:[o.jsxs("div",{className:"weekchallenge-header",children:[o.jsx("h2",{children:"Weekchallenge"}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>T(),children:"Nieuwe weekchallenge"})]}),r.weeklyChallenge?o.jsxs("div",{className:"weekchallenge-info",children:[o.jsxs("p",{className:"page-intro-small",children:["Weekchallenge van ",o.jsx("strong",{children:Sr(r.weeklyChallenge.startDate)})," t/m"," ",o.jsx("strong",{children:Sr(r.weeklyChallenge.endDate)})," met"," ",o.jsxs("strong",{children:[r.weeklyChallenge.books.length," boeken"]}),".",r.weeklyChallenge.completed&&o.jsx("span",{className:"completed-badge",children:"  Voltooid"})]}),(()=>{const L=r.weeklyChallenge,me=L.books.reduce((ve,_e)=>ve+(_e.totalPages||0),0),ue=new Set;L.books.forEach(ve=>{Object.keys(ve.dailyPages).forEach(_e=>ue.add(_e))});const ge=ue.size,Se=ge>0?Math.ceil(me/ge):0,be=L.books.map(ve=>M.find(_e=>_e.id===ve.bookId)).filter(Boolean);return!me||!ge?null:o.jsxs("p",{className:"page-intro-small",children:[be.length>0&&o.jsx(o.Fragment,{children:be.map(ve=>o.jsxs("span",{className:"challenge-week-titles-line",children:[o.jsx("strong",{children:ve.title}),o.jsx("br",{})]},ve.id))}),"In totaal ",o.jsxs("strong",{children:[me," pagina's"]})," in"," ",o.jsxs("strong",{children:[ge," leesdagen"]}),"  ongeveer"," ",o.jsxs("strong",{children:[Se," blz per dag"]}),"."]})})(),o.jsxs("div",{className:"weekchallenge-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>T(r.weeklyChallenge),children:"Bewerken"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:F,children:r.weeklyChallenge.completed?"Markeer als niet voltooid":"Afvinken"}),o.jsx("button",{type:"button",className:"link-button destructive",onClick:Ce,children:"Verwijderen"})]})]}):o.jsx("p",{className:"page-intro-small",children:"Maak een nieuwe weekchallenge aan met de knop hiernaast."})]})]}),Le&&(()=>{const L=Lt(Ze),me=Lt(lt),ue=[];let ge=new Date(L);for(;ge<=me;){const ee=new Date(ge);ue.push({date:ee,dateStr:Gt(ee)}),ge.setDate(ge.getDate()+1)}const Se=fe.length>0?fe:ue.map(ee=>ee.dateStr),be=M.filter(ee=>We.includes(ee.id)),ve=be.reduce((ee,Z)=>ee+(Z.pageCount||0),0),_e=Se.length>0?Math.ceil(ve/Se.length):0;function de(){var _,z;if(!be.length||!Se.length)return null;const ee=[...Se].sort(),Z=be.reduce((B,Y)=>B+(Y.pageCount||0),0),Ae=Z>0&&ee.length>0?Math.ceil(Z/ee.length):0;if(Ae<=0)return null;const Pe=[];let te=0,nt=((_=be[0])==null?void 0:_.pageCount)??0;for(const B of ee){let Y=Ae;for(;Y>0&&te<be.length;){const le=Math.min(nt,Y);le>0&&(Pe.push({bookIndex:te,dateStr:B,pages:le}),nt-=le,Y-=le),nt<=0&&(te+=1,nt=((z=be[te])==null?void 0:z.pageCount)??0)}}const rt=be.map((B,Y)=>{const le={};ee.forEach(ye=>{le[ye]=""}),Pe.filter(ye=>ye.bookIndex===Y).forEach(ye=>{le[ye.dateStr]=String(ye.pages)});const Oe=ee.filter(ye=>Number(le[ye]||0)>0);return{bookId:B.id,totalPages:String(B.pageCount??0),dailyPages:le,selectedDays:Oe}});return rt.length?rt:[]}return o.jsx("div",{className:"modal-backdrop",children:o.jsx("div",{className:"modal weekchallenge-modal",children:n?o.jsxs(o.Fragment,{children:[o.jsx("h3",{children:"Nieuwe weekchallenge"}),o.jsx("p",{className:"modal-intro",children:"Kies je boek(en), periode en leesdagen. We verdelen het totaal aantal pagina's gelijk over alle leesdagen. Je leest eerst het ene boek uit; als je op een dag dat boek afrondt, ga je dezelfde dag door met het volgende boek."}),o.jsxs("div",{className:"form-field-inline",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Startdatum"}),o.jsx("input",{type:"date",value:Ze,onChange:ee=>{tt(ee.target.value)}})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Einddatum"}),o.jsx("input",{type:"date",value:lt,min:Ze,onChange:ee=>{dt(ee.target.value)}})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Boek(en)"}),o.jsx("div",{className:"weekchallenge-mobile-book-list",children:(()=>{const ee=M.filter(te=>te.status==="aan-het-lezen"||te.status==="wil-ik-lezen"),Z=ee.filter(te=>te.status==="aan-het-lezen").sort((te,nt)=>te.title.localeCompare(nt.title)),Ae=ee.filter(te=>te.status==="wil-ik-lezen").sort((te,nt)=>{const rt=te.order??Number.MAX_SAFE_INTEGER,_=nt.order??Number.MAX_SAFE_INTEGER;return rt!==_?rt-_:te.title.localeCompare(nt.title)}),Pe=[...Z,...Ae];return Pe.length?Pe.map(te=>{const nt=We.includes(te.id),rt=te.pageCount;return o.jsx("button",{type:"button",className:`weekchallenge-mobile-book-pill ${nt?"selected":""}`,onClick:()=>{re(_=>nt?_.filter(z=>z!==te.id):[..._,te.id])},children:o.jsxs("div",{className:"weekchallenge-mobile-book-pill-inner",children:[o.jsx("div",{className:"weekchallenge-mobile-book-cover",children:te.coverUrl?o.jsx("img",{src:te.coverUrl,alt:te.title}):o.jsx("div",{className:"weekchallenge-mobile-book-cover-placeholder",children:te.title.charAt(0).toUpperCase()})}),o.jsxs("div",{className:"weekchallenge-mobile-book-text",children:[o.jsx("div",{className:"weekchallenge-mobile-book-title",children:te.title}),o.jsxs("div",{className:"weekchallenge-mobile-book-meta",children:[o.jsx("span",{children:te.authors}),rt?o.jsxs("span",{children:["  ",rt," blz"]}):o.jsx("span",{children:"  aantal pagina's onbekend"})]})]})]})},te.id)}):o.jsx("p",{className:"page-intro-small",children:"Je hebt nog geen boeken op je leeslijst of TBR."})})()})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Leesdagen"}),o.jsx("div",{className:"weekchallenge-mobile-days-chips",children:ue.map(ee=>{const Z=Se.includes(ee.dateStr);return o.jsxs("button",{type:"button",className:`weekchallenge-mobile-day-chip ${Z?"selected":""}`,onClick:()=>{ae(Ae=>Ae.includes(ee.dateStr)?Ae.filter(te=>te!==ee.dateStr):[...Ae,ee.dateStr].sort())},children:[Wu(ee.date).substring(0,2)," ",Sr(ee.dateStr)]},ee.dateStr)})})]}),o.jsx("div",{className:"weekchallenge-mobile-summary",children:be.length===0?o.jsx("p",{className:"weekchallenge-mobile-summary-text",children:"Kies minimaal n boek om een weekchallenge te maken."}):Se.length===0?o.jsx("p",{className:"weekchallenge-mobile-summary-text",children:"Kies de dagen waarop je wilt lezen."}):o.jsxs("p",{className:"weekchallenge-mobile-summary-text",children:["In totaal"," ",o.jsxs("strong",{children:[ve||0," pagina's"]})," in"," ",o.jsxs("strong",{children:[Se.length," leesdagen"]}),"  ongeveer"," ",o.jsxs("strong",{children:[_e," blz per dag"]}),"."]})}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{ke(!1),Fe(null)},children:"Annuleren"}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>{const ee=de();ee&&je(ee)},children:"Weekchallenge opslaan"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{children:xe?"Weekchallenge bewerken":"Nieuwe weekchallenge"}),o.jsx("p",{className:"modal-intro",children:"Geef aan hoeveel boeken je in deze week wilt lezen en per boek hoeveel pagina's je per dag leest."}),o.jsxs("div",{className:"form-field-inline",children:[o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Startdatum"}),o.jsx("input",{type:"date",value:Ze,onChange:ee=>{tt(ee.target.value);const Z=Lt(ee.target.value),Ae=Lt(lt),Pe=[];let te=new Date(Z);for(;te<=Ae;)Pe.push(Gt(te)),te.setDate(te.getDate()+1);ze(nt=>nt.map(rt=>({...rt,dailyPages:Pe.reduce((_,z)=>(_[z]=rt.dailyPages[z]||"",_),{})})))}})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Einddatum"}),o.jsx("input",{type:"date",value:lt,min:Ze,onChange:ee=>{dt(ee.target.value);const Z=Lt(Ze),Ae=Lt(ee.target.value),Pe=[];let te=new Date(Z);for(;te<=Ae;)Pe.push(Gt(te)),te.setDate(te.getDate()+1);ze(nt=>nt.map(rt=>({...rt,dailyPages:Pe.reduce((_,z)=>(_[z]=rt.dailyPages[z]||"",_),{})})))}})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Aantal boeken deze week"}),o.jsx("input",{type:"number",min:1,value:ut,onChange:ee=>{const Z=Math.max(1,Number(ee.target.value)||1);Qe(Z),w(Z)}})]}),o.jsx("div",{className:"weekchallenge-books-list",children:Array.from({length:ut}).map((ee,Z)=>{const Ae=He[Z]||{totalPages:"",dailyPages:{},selectedDays:[]};return o.jsxs("div",{className:"weekchallenge-book-card",children:[o.jsxs("div",{className:"weekchallenge-book-header",children:[o.jsxs("h4",{children:["Boek ",Z+1]}),o.jsx("button",{type:"button",className:"link-button",onClick:()=>oe(Z),disabled:!Ae.totalPages||Ae.selectedDays.length===0,children:"Automatisch verdelen"})]}),o.jsx("div",{className:"weekchallenge-book-fields",children:o.jsxs("label",{children:[o.jsx("span",{children:"Pagina's in dit boek"}),o.jsx("input",{type:"number",min:1,value:Ae.totalPages,onChange:Pe=>{const te=Pe.target.value;ze(nt=>{const rt=[...nt];return rt[Z]={...rt[Z],totalPages:te},rt})}})]})}),o.jsx("div",{className:"weekchallenge-days-grid",children:ue.map(Pe=>{const te=Ae.selectedDays.includes(Pe.dateStr),nt=Ae.dailyPages[Pe.dateStr]||"";return o.jsxs("div",{className:"weekchallenge-day-item",children:[o.jsxs("label",{className:"weekchallenge-day-checkbox",children:[o.jsx("input",{type:"checkbox",checked:te,onChange:rt=>{ze(_=>{const z=[..._],B=z[Z]||{totalPages:"",dailyPages:{},selectedDays:[]};return rt.target.checked?B.selectedDays=[...B.selectedDays,Pe.dateStr]:(B.selectedDays=B.selectedDays.filter(Y=>Y!==Pe.dateStr),B.dailyPages[Pe.dateStr]=""),z[Z]=B,z})}}),o.jsxs("span",{children:[Wu(Pe.date).substring(0,2)," ",Sr(Pe.dateStr)]})]}),te&&o.jsx("input",{type:"number",min:0,value:nt,placeholder:"0",onChange:rt=>{const _=rt.target.value;ze(z=>{const B=[...z];return B[Z]={...B[Z],dailyPages:{...B[Z].dailyPages,[Pe.dateStr]:_}},B})},className:"weekchallenge-day-pages-input"})]},Pe.dateStr)})})]},Z)})}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{ke(!1),Fe(null)},children:"Annuleren"}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>je(),children:xe?"Wijzigingen opslaan":"Weekchallenge opslaan"})]})]})})})})(),!n&&r&&J&&o.jsxs("section",{className:"card",children:[o.jsxs("h2",{children:["Voortgang ",r.year]}),o.jsxs("ul",{className:"challenge-stats",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Gelezen:"})," ",J.finishedCount," van"," ",r.targetBooks," boeken"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Verwacht tot nu toe:"})," ",J.expectedByNow," boeken"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Nog te gaan:"})," ",J.remaining," boeken"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Status:"})," ",J.statusText]})]})]}),r&&Te&&o.jsxs("section",{className:"card",children:[o.jsx("h2",{children:"Dagelijkse leesdoelen"}),o.jsx("p",{className:"page-intro-small",children:r.weeklyChallenge?o.jsxs(o.Fragment,{children:["Weekchallenge met ",o.jsxs("strong",{children:[r.weeklyChallenge.books.length," boeken"]}),"."," ",r.weeklyChallenge.startDate&&r.weeklyChallenge.endDate&&o.jsxs(o.Fragment,{children:["Periode van"," ",o.jsx("strong",{children:Sr(r.weeklyChallenge.startDate)})," t/m"," ",o.jsx("strong",{children:Sr(r.weeklyChallenge.endDate)}),"."]})]}):r.weeklyPages?o.jsxs(o.Fragment,{children:[o.jsxs("strong",{children:[r.weeklyPages," pagina's in het boek"]}),typeof r.startPage=="number"&&o.jsxs(o.Fragment,{children:[" ","(begonnen op bladzijde ",r.startPage,","," ",o.jsxs("strong",{children:["nog"," ",Math.max(0,r.weeklyPages-r.startPage)," ","te gaan"]}),")"]}),"."," ",(()=>{const L=Math.max(1,Te.filter(ge=>!((r.offDaysAuto||r.offDays||[]).includes(ge.date)||(r.offDaysManual||[]).includes(ge.date))).length),me=typeof r.startPage=="number"?Math.max(0,r.weeklyPages-r.startPage):r.weeklyPages,ue=Math.ceil(me/L);return o.jsxs(o.Fragment,{children:["Dat is ongeveer"," ",o.jsxs("strong",{children:[ue," blz"]})," per actieve leesdag."]})})()," ",r.startDate&&r.endDate&&o.jsxs(o.Fragment,{children:["Periode van"," ",o.jsx("strong",{children:r.startDate})," t/m"," ",o.jsx("strong",{children:r.endDate}),"."]})]}):"Maak een weekchallenge aan om dagelijkse doelen te zien."}),(r.weeklyChallenge||r.weeklyPages)&&Te&&o.jsx("div",{className:"daily-goals-list-compact",children:Te.map(L=>{const me=L.date===Gt(new Date),ue=L.dateObj<new Date&&!me,ge=(r.offDaysAuto||r.offDays||[]).includes(L.date),Se=(r.offDaysManual||[]).includes(L.date),be=ge||Se,ve=L.dateObj.getDay()===4,_e=L.effectiveRead>=L.target,de=L.plannedCumulative;let ee;if(r.weeklyChallenge)ee=de||0;else{const Z=r.weeklyPages;ee=de&&Z?Math.min(de,Z):de||Z||0}return o.jsxs("div",{className:`daily-goal-item-compact ${me?"today":""} ${ue?"past":""} ${ve?"week-start":""} ${_e?"complete":""} ${be?"off-day":""}`,children:[o.jsxs("div",{className:"daily-goal-header-compact",children:[o.jsxs("div",{children:[o.jsx("strong",{children:Wu(L.dateObj).substring(0,2)}),o.jsxs("span",{className:"daily-goal-date-compact",children:[" ",Sr(L.date)]})]}),o.jsxs("div",{className:"daily-goal-badges-compact",children:[me&&o.jsx("span",{className:"today-badge-small",children:"Nu"}),ge&&o.jsx("span",{className:"offday-badge-small",children:"Geen tijd"}),Se&&o.jsx("span",{className:"offday-badge-small",children:"Geen tijd (ik regel het)"})]})]}),o.jsxs("div",{className:"daily-goal-content-compact",children:[!be&&L.bookTargets&&L.bookTargets.length>0?L.bookTargets.map(Z=>{var nt,rt;const Ae=(rt=(nt=r.dailyReadingPerBook)==null?void 0:nt[L.date])==null?void 0:rt[Z.bookId],Pe=Ae??(L.bookTargets.length===1?L.cumulativePages:""),te=Number(Pe)>=Z.cumulativePage;return o.jsxs("div",{className:"daily-goal-book-block",children:[o.jsxs("div",{className:"daily-goal-target-compact",children:[o.jsx("strong",{children:Z.bookTitle}),": tot bladzijde ",Z.cumulativePage]}),o.jsxs("div",{className:"daily-goal-input-compact",children:[o.jsx("label",{className:"daily-goal-input-label",children:"Gelezen tot bladzijde"}),o.jsx("input",{type:"number",value:Pe||"",onChange:_=>{const z=Number(_.target.value)||0;ft(L.date,Z.bookId,z)},min:"0",max:Z.totalPages,placeholder:"0",className:"pages-input-compact"})]}),te?o.jsx("div",{className:"daily-goal-complete-compact",children:" Behaald"}):o.jsx("button",{type:"button",className:"complete-button",onClick:()=>Ge(L,Z.bookId,Z.cumulativePage),title:"Boek voor vandaag afvinken",children:" Afvinken"})]},Z.bookId)}):o.jsxs(o.Fragment,{children:[!be&&o.jsxs("div",{className:"daily-goal-target-compact",children:["Lees tot bladzijde ",ee]}),o.jsxs("div",{className:"daily-goal-input-compact",children:[o.jsx("label",{className:"daily-goal-input-label",children:"Gelezen tot bladzijde..."}),o.jsx("input",{type:"number",value:L.cumulativePages||"",onChange:Z=>{const Ae=Number(Z.target.value)||0;pe(L.date,Ae)},min:"0",placeholder:"0",className:"pages-input-compact"})]}),!be&&o.jsxs(o.Fragment,{children:[!_e&&o.jsx("button",{type:"button",className:"complete-button",onClick:()=>St(L),title:"Markeer doel als behaald",children:" Afvinken"}),_e&&o.jsx("div",{className:"daily-goal-complete-compact",children:" Behaald"}),L.remaining>0&&!_e&&o.jsxs("div",{className:"daily-goal-remaining-compact",children:["Nog ",Math.ceil(L.remaining)," blz"]})]})]}),sp]})]},L.date)})}),sp]})]})}function Ku({onLogin:s}){const n=hr(),r=fr(),[a,u]=b.useState(""),[c,h]=b.useState(""),[p,m]=b.useState(""),[v,y]=b.useState(null),[S,k]=b.useState(!1);b.useEffect(()=>{v0().then(P=>{P.migrated&&P.message&&y(P.message),w0()&&!P.migrated&&y("Account is hernoemd naar NoavHelvoirt. Log in met je bestaande wachtwoord.")})},[]);async function j(P){P.preventDefault(),m("");const C=a.trim();if(!C){m("Vul een gebruikersnaam in.");return}if(!c){m("Vul je wachtwoord in.");return}k(!0);const O=await da(C,c);if(k(!1),!O){m("Onjuiste gebruikersnaam of wachtwoord.");return}fi(C),s(),await zp(),await Bp(),n(Ot(r,r==="/mobile"?"/boeken":"/dashboard"),{replace:!0})}return o.jsxs("div",{className:"page login-page",children:[o.jsx("h1",{children:"Inloggen"}),o.jsx("p",{className:"page-intro",children:"Log in met je gebruikersnaam en wachtwoord."}),v&&o.jsx("div",{className:"card migration-message",children:o.jsx("p",{children:v})}),o.jsxs("form",{onSubmit:j,className:"card form-card",children:[p&&o.jsx("p",{className:"form-error",children:p}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Gebruikersnaam"}),o.jsx("input",{type:"text",value:a,onChange:P=>u(P.target.value),placeholder:"Bijv. noa",autoComplete:"username"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Wachtwoord"}),o.jsx("input",{type:"password",value:c,onChange:P=>h(P.target.value),placeholder:"Wachtwoord",autoComplete:"current-password"})]}),o.jsx("button",{type:"submit",className:"primary-button",disabled:S,children:S?"Bezig":"Inloggen"}),o.jsxs("p",{className:"form-footer",children:["Nog geen account?"," ",o.jsx($t,{to:Ot(r,"/register"),children:"Account aanmaken"})]})]})]})}function qu({onLogin:s}){const n=hr(),r=fr(),[a,u]=b.useState(""),[c,h]=b.useState(""),[p,m]=b.useState(""),[v,y]=b.useState(""),[S,k]=b.useState(!1);async function j(P){if(P.preventDefault(),y(""),c!==p){y("Wachtwoord en herhaling komen niet overeen.");return}k(!0);const C=await $p(a,c);if(k(!1),!C.ok){y(C.error);return}fi(a.trim()),s==null||s(),n(Ot(r,r==="/mobile"?"/boeken":"/dashboard"),{replace:!0})}return o.jsxs("div",{className:"page login-page",children:[o.jsx("h1",{children:"Account aanmaken"}),o.jsx("p",{className:"page-intro",children:"Maak een account aan met gebruikersnaam en wachtwoord. Je gegevens blijven op dit apparaat."}),o.jsxs("form",{onSubmit:j,className:"card form-card",children:[v&&o.jsx("p",{className:"form-error",children:v}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Gebruikersnaam"}),o.jsx("input",{type:"text",value:a,onChange:P=>u(P.target.value),placeholder:"Bijv. noa",autoComplete:"username"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Wachtwoord"}),o.jsx("input",{type:"password",value:c,onChange:P=>h(P.target.value),placeholder:"Min. 4 tekens",autoComplete:"new-password"})]}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{children:"Wachtwoord herhalen"}),o.jsx("input",{type:"password",value:p,onChange:P=>m(P.target.value),placeholder:"Herhaal wachtwoord",autoComplete:"new-password"})]}),o.jsx("button",{type:"submit",className:"primary-button",disabled:S,children:S?"Bezig":"Account aanmaken"}),o.jsxs("p",{className:"form-footer",children:["Heb je al een account?"," ",o.jsx($t,{to:Ot(r,"/login"),children:"Inloggen"})]})]})]})}function Hu(){const s=fr(),[n,r]=b.useState(()=>Zr()),[a,u]=b.useState(""),[c,h]=b.useState(null),[p,m]=b.useState("");function v(C){r(C),mi(C)}function y(C){if(C.preventDefault(),!a.trim())return;const O={id:`shelf-${Date.now()}`,name:a.trim()};v([...n,O]),u("")}function S(C){h(C.id),m(C.name)}function k(C){if(!p.trim()){j();return}const O=n.map(W=>W.id===C?{...W,name:p.trim()}:W);v(O),h(null),m("")}function j(){h(null),m("")}function P(C){v(n.filter(O=>O.id!==C))}return o.jsxs("div",{className:"page",children:[o.jsx("h1",{children:"Planken"}),o.jsxs("section",{className:"card",children:[o.jsx("h2",{children:"Nieuwe plank"}),o.jsxs("form",{onSubmit:y,className:"inline-form",children:[o.jsx("input",{type:"text",value:a,onChange:C=>u(C.target.value),placeholder:"Bijv. Favorieten, Non-fictie"}),o.jsx("button",{type:"submit",className:"primary-button",children:"Plank toevoegen"})]})]}),o.jsxs("section",{className:"card",children:[o.jsx("h2",{children:"Mijn planken"}),o.jsx("ul",{className:"shelf-list",children:n.map(C=>o.jsx("li",{className:"shelf-item",children:c===C.id?o.jsxs("div",{className:"shelf-edit-form",children:[o.jsx("input",{type:"text",value:p,onChange:O=>m(O.target.value),onKeyDown:O=>{O.key==="Enter"&&k(C.id),O.key==="Escape"&&j()},autoFocus:!0,className:"shelf-edit-input"}),o.jsxs("div",{className:"shelf-edit-actions",children:[o.jsx("button",{type:"button",onClick:()=>k(C.id),className:"link-button",children:"Opslaan"}),o.jsx("button",{type:"button",onClick:j,className:"link-button",children:"Annuleren"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs($t,{to:Ot(s,`/plank/${C.id}`),className:"shelf-item-name",children:[C.name,C.system&&o.jsx("span",{className:"tag",children:"Standaard"})]}),o.jsxs("div",{className:"shelf-item-actions",children:[o.jsx("button",{type:"button",onClick:()=>S(C),className:"link-button",children:"Bewerken"}),o.jsx("button",{type:"button",onClick:()=>P(C.id),className:"link-button destructive",children:"Verwijderen"})]})]})},C.id))})]})]})}const yc={"wil-ik-lezen":"wil-ik-lezen","aan-het-lezen":"aan-het-lezen",gelezen:"gelezen"};function W0(s,n){if(!s)return[];const r=yc[s.id];return r?[...n.filter(a=>a.status===r)].sort((a,u)=>a.title.localeCompare(u.title)):[...n.filter(a=>{var u;return(u=a.shelfIds)==null?void 0:u.includes(s.id)})].sort((a,u)=>a.title.localeCompare(u.title))}function Gu(){const{shelfId:s}=Nc(),n=fr(),r=hr(),[a,u]=b.useState(()=>dr()),[c,h]=b.useState(()=>Zr()),[p,m]=b.useState("");b.useEffect(()=>Ho(u),[]);const v=b.useMemo(()=>c.find(F=>F.id===s)??null,[c,s]),y=b.useMemo(()=>W0(v,a),[v,a]),[S,k]=b.useState(!1),[j,P]=b.useState(""),[C,O]=b.useState(new Set),[W,M]=b.useState(!1),[V,q]=b.useState(!1),[Le,ke]=b.useState(""),[xe,Fe]=b.useState(null),[Ze,tt]=b.useState(!1),[lt,dt]=b.useState(!1),[ut,Qe]=b.useState(""),He=b.useRef(null),ze=b.useRef(!1),We=b.useRef(null);function re(F){O(Te=>{const J=new Set(Te);return J.has(F)?J.delete(F):J.add(F),J})}function fe(F){M(!0),O(Te=>{const J=new Set(Te);return J.add(F),J})}function ae(F){u(F),pi(F),O(Te=>{const J=new Set(Array.from(Te).filter(Me=>F.some(ht=>ht.id===Me)));return J.size===0&&M(!1),J})}const w={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"};function T(F,Te){var Ge;if(C.size===0)return;const J=Te??yc[F],Me=!yc[F],ht=Array.from(C),pe=a.map(St=>{if(!ht.includes(St.id))return St;const _t=St.shelfIds??[];if(J){const qt=Me&&!_t.includes(F);return{...St,status:J,...qt?{shelfIds:[..._t,F]}:{}}}return _t.includes(F)?St:{...St,shelfIds:[..._t,F]}});ae(pe);const ft=((Ge=c.find(St=>St.id===F))==null?void 0:Ge.name)??"plank";m(C.size===1?`Boek toegevoegd aan "${ft}".`:`${C.size} boeken toegevoegd aan "${ft}".`),O(new Set),window.setTimeout(()=>m(""),2500),q(!1),Fe(null)}function oe(){if(C.size===0)return;const F=Array.from(C),Te=a.filter(J=>!F.includes(J.id));ae(Te),m(C.size===1?"Boek verwijderd uit bibliotheek.":`${C.size} boeken verwijderd uit bibliotheek.`),O(new Set),tt(!1),window.setTimeout(()=>m(""),2500)}function je(F){const Te=Array.from(C),J=a.filter(pe=>Te.includes(pe.id));if(J.length===0)return;const Me=J.map(pe=>({title:pe.title,authors:pe.authors,coverUrl:pe.coverUrl,seriesName:pe.seriesName})),ht=vc(F,Me,v.name);ht.ok?(O(new Set),dt(!1),Qe(""),m(J.length===1?`Boek gedeeld met ${F}.`:`${J.length} boeken gedeeld met ${F}.`),window.setTimeout(()=>m(""),2500)):Qe(ht.error)}if(!s||!v)return o.jsxs("div",{className:"page shelf-view-page",children:[o.jsx("p",{children:"Plank niet gevonden."}),o.jsx($t,{to:Ot(n,"/planken"),className:"link-button",children:"Terug naar planken"})]});function Ce(F){r(Ot(n,`/boek/${F}`))}return o.jsxs("div",{className:"page shelf-view-page",children:[o.jsxs("header",{className:"shelf-view-header",children:[o.jsx($t,{to:n==="/mobile"?"/mobile/profiel":Ot(n,"/planken"),className:"shelf-view-back",children:" Terug"}),o.jsx("h1",{className:"shelf-view-title",children:v.name}),o.jsxs("p",{className:"shelf-view-count",children:[y.length," ",y.length===1?"boek":"boeken"]}),y.length>0&&o.jsx("button",{type:"button",className:"secondary-button shelf-view-share",onClick:()=>{P(""),k(!0)},children:"Deel plank met Boekbuddy"})]}),S&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{k(!1),P("")},children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:F=>F.stopPropagation(),children:[o.jsx("h3",{children:"Plank delen met Boekbuddy"}),o.jsxs("p",{className:"modal-intro",children:['Kies een Boekbuddy om de plank "',v.name,'" (',y.length," boek",y.length===1?"":"en",") mee te delen. Ze kunnen de boeken aan hun TBR toevoegen."]}),j&&o.jsx("p",{className:"form-error",children:j}),o.jsx("ul",{className:"add-to-shelf-list",children:jn().map(F=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{const Te=y.map(Me=>({title:Me.title,authors:Me.authors,coverUrl:Me.coverUrl,seriesName:Me.seriesName})),J=vc(F,Te,v.name);J.ok?(k(!1),P("")):P(J.error)},children:F})},F))}),jn().length===0&&o.jsx("p",{className:"modal-intro",children:"Je hebt nog geen Boekbuddies. Voeg eerst vrienden toe via Profiel."}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{k(!1),P("")},children:"Sluiten"})]})}),o.jsx("div",{className:"bookcase",children:y.length===0?o.jsx("div",{className:"bookcase-empty",children:o.jsx("p",{children:"Geen boeken op deze plank."})}):o.jsxs("div",{className:"bookcase-shelf",children:[o.jsx("div",{className:"bookcase-books",children:y.map(F=>{const Te=C.has(F.id);return o.jsx("div",{className:`bookcase-book ${Te?"bookcase-book-selected":""}`,children:o.jsxs("button",{type:"button",className:"bookcase-book-main",onTouchStart:()=>{W||(We.current=F.id,He.current=setTimeout(()=>{const J=We.current;J&&(fe(J),ze.current=!0,We.current=null),He.current=null},500))},onTouchEnd:()=>{He.current&&(clearTimeout(He.current),He.current=null),We.current=null},onTouchCancel:()=>{He.current&&(clearTimeout(He.current),He.current=null),We.current=null},onMouseDown:()=>{W||(We.current=F.id,He.current=setTimeout(()=>{const J=We.current;J&&(fe(J),ze.current=!0,We.current=null),He.current=null},500))},onMouseUp:()=>{He.current&&(clearTimeout(He.current),He.current=null),We.current=null},onMouseLeave:()=>{He.current&&(clearTimeout(He.current),He.current=null),We.current=null},onClick:J=>{if(ze.current){J.preventDefault(),J.stopPropagation(),ze.current=!1;return}if(W){J.preventDefault(),J.stopPropagation(),re(F.id);return}Ce(F.id)},onContextMenu:J=>{J.preventDefault(),W?re(F.id):fe(F.id)},children:[o.jsx("div",{className:"bookcase-book-cover-wrap",children:F.coverUrl?o.jsx("img",{src:F.coverUrl,alt:F.title,className:"bookcase-book-cover"}):o.jsx("div",{className:"bookcase-book-cover-placeholder",children:F.title.charAt(0).toUpperCase()})}),o.jsx("span",{className:"bookcase-book-title",children:F.title}),F.authors&&o.jsx("span",{className:"bookcase-book-author",children:F.authors})]})},F.id)})}),o.jsx("div",{className:"bookcase-plank","aria-hidden":"true"})]})}),W&&C.size>0&&o.jsxs("div",{className:"mobile-selection-bar",children:[o.jsxs("span",{className:"mobile-selection-count",children:[C.size," geselecteerd"]}),o.jsx("button",{type:"button",className:"primary-button mobile-selection-add",onClick:()=>q(!0),children:"Toevoegen aan plank"}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>{Qe(""),dt(!0)},children:"Delen met Boekbuddy"}),o.jsx("button",{type:"button",className:"secondary-button destructive",onClick:()=>tt(!0),children:"Verwijderen"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{O(new Set),M(!1)},children:"Selectiemodus sluiten"})]}),p&&o.jsx("div",{className:"toast",children:p}),V&&C.size>0&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{q(!1),O(new Set)},children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:F=>F.stopPropagation(),children:[o.jsx("h3",{children:"Kies plank"}),o.jsx("p",{className:"modal-intro",children:xe?"Kies status voor deze plank":`Kies een plank voor ${C.size} boek${C.size===1?"":"en"}.`}),xe?o.jsx("ul",{className:"add-to-shelf-list",children:["wil-ik-lezen","aan-het-lezen","gelezen"].map(F=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>T(xe,F),children:w[F]})},F))}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"add-to-shelf-list",children:c.map(F=>o.jsx("li",{children:o.jsxs("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{F.system?T(F.id):Fe(F.id)},children:[F.name,F.system&&o.jsx("span",{className:"tag",style:{marginLeft:8},children:"Standaard"})]})},F.id))}),o.jsxs("div",{className:"add-to-shelf-new",children:[o.jsx("input",{type:"text",value:Le,onChange:F=>ke(F.target.value),placeholder:"Nieuwe plank naam",className:"add-to-shelf-new-input"}),o.jsx("button",{type:"button",className:"add-to-shelf-item add-to-shelf-new-btn",disabled:!Le.trim(),onClick:()=>{const F=Le.trim();if(!F)return;const Te={id:`shelf-${Date.now()}`,name:F},J=[...c,Te];mi(J),h(J),Fe(Te.id),ke("")},children:"Nieuwe plank aanmaken"})]})]}),o.jsx("div",{className:"modal-actions",children:o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{q(!1),O(new Set),ke(""),Fe(null)},children:xe?"Terug":"Annuleren"})})]})}),Ze&&C.size>0&&o.jsx("div",{className:"modal-backdrop",onClick:()=>tt(!1),children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:F=>F.stopPropagation(),children:[o.jsx("h3",{children:"Geselecteerde boeken verwijderen"}),o.jsxs("p",{className:"modal-intro",children:["Weet je zeker dat je ",C.size," boek",C.size===1?"":"en"," uit je bibliotheek wilt verwijderen? Dit kan niet ongedaan worden gemaakt."]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>tt(!1),children:"Annuleren"}),o.jsx("button",{type:"button",className:"primary-button destructive",onClick:oe,children:"Verwijderen"})]})]})}),lt&&C.size>0&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{dt(!1),Qe("")},children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:F=>F.stopPropagation(),children:[o.jsx("h3",{children:"Delen met Boekbuddy"}),o.jsxs("p",{className:"modal-intro",children:["Kies een Boekbuddy om ",C.size," boek",C.size===1?"":"en"," mee te delen."]}),ut&&o.jsx("p",{className:"form-error",children:ut}),o.jsx("ul",{className:"add-to-shelf-list",children:jn().map(F=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>je(F),children:F})},F))}),jn().length===0&&o.jsx("p",{className:"modal-intro",children:"Je hebt nog geen Boekbuddies. Voeg eerst vrienden toe via Profiel."}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{dt(!1),Qe("")},children:"Sluiten"})]})})]})}function Ju(s){const n=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${n}-${r}-${a}`}function V0(s){return["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"][s.getDay()]}function K0(s){const n=new Date(s.getFullYear(),0,0),r=s.getTime()-n.getTime()+(n.getTimezoneOffset()-s.getTimezoneOffset())*60*1e3;return Math.floor(r/(1e3*60*60*24))}function q0(s){return[...s].sort((n,r)=>{if(n.status==="wil-ik-lezen"&&r.status==="wil-ik-lezen"){const h=n.order??0,p=r.order??0;if(h>0&&p===0)return-1;if(h===0&&p>0)return 1;if(h>0&&p>0&&h!==p)return h-p;const m=n.authors.localeCompare(r.authors);if(m!==0)return m;if(n.seriesName&&r.seriesName){if(n.seriesName!==r.seriesName)return n.seriesName.localeCompare(r.seriesName);const v=n.seriesNumber??0,y=r.seriesNumber??0;return v!==y?v-y:n.title.localeCompare(r.title)}return n.seriesName&&!r.seriesName?-1:!n.seriesName&&r.seriesName?1:n.title.localeCompare(r.title)}else{if(n.status==="wil-ik-lezen"&&r.status!=="wil-ik-lezen")return-1;if(n.status!=="wil-ik-lezen"&&r.status==="wil-ik-lezen")return 1}const a=n.authors.localeCompare(r.authors);if(a!==0)return a;if(n.seriesName&&r.seriesName){if(n.seriesName!==r.seriesName)return n.seriesName.localeCompare(r.seriesName);const h=n.seriesNumber??0,p=r.seriesNumber??0;return h!==p?h-p:n.title.localeCompare(r.title)}if(n.seriesName&&!r.seriesName)return-1;if(!n.seriesName&&r.seriesName)return 1;const u=n.order??0,c=r.order??0;return u!==c?u-c:n.title.localeCompare(r.title)})}function H0(s,n){const a={"wil-ik-lezen":"wil-ik-lezen","aan-het-lezen":"aan-het-lezen",gelezen:"gelezen"}[s.id];if(a){const u=n.filter(c=>c.status===a);return q0(u)}return n.filter(u=>{var c;return(c=u.shelfIds)==null?void 0:c.includes(s.id)}).sort((u,c)=>u.title.localeCompare(c.title))}function G0(s,n){return Ot(n,`/plank/${s.id}`)}function Oo({mode:s="toggle"}){const n=fr(),[r,a]=b.useState(()=>dr()),[u,c]=b.useState(()=>Zr()),[h,p]=b.useState(()=>Go()),[m,v]=b.useState(new Set),[y,S]=b.useState(s==="toggle"?"desktop":s),[k,j]=b.useState(null),[P,C]=b.useState(""),[O,W]=b.useState(""),[M,V]=b.useState(""),[q,Le]=b.useState(""),[ke,xe]=b.useState(!1),[Fe,Ze]=b.useState("leeslijst"),[tt,lt]=b.useState("alle"),[dt,ut]=b.useState("desc"),[Qe,He]=b.useState(new Set),[ze,We]=b.useState(!1),[re,fe]=b.useState(!1),[ae,w]=b.useState(!1),[T,oe]=b.useState(""),[je,Ce]=b.useState(!1),[F,Te]=b.useState(""),[J,Me]=b.useState(null),ht={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"},pe=b.useRef(null),ft=b.useRef(!1),Ge=b.useRef(null);function St(_){He(z=>{const B=new Set(z);return B.has(_)?B.delete(_):B.add(_),B})}function _t(_){We(!0),He(z=>{const B=new Set(z);return B.add(_),B})}const qt=b.useMemo(()=>{const _=new Set;return r.forEach(z=>{z.seriesName&&_.add(z.seriesName)}),Array.from(_).sort()},[r]);b.useEffect(()=>Ho(a),[]),b.useEffect(()=>{s!=="toggle"&&S(s)},[s]);function yt(_){j(_),C(_.pageCount!=null?String(_.pageCount):""),W(_.seriesName??""),V(_.seriesNumber!=null?String(_.seriesNumber):""),Le(_.order!=null?String(_.order):""),xe(!!(_.seriesName&&!qt.includes(_.seriesName)))}function L(_){const z=r.filter(B=>B.id!==_);de(z),(k==null?void 0:k.id)===_&&j(null)}function me(_,z,B,Y){const le=r.map(Oe=>Oe.id===_?{...Oe,seriesName:(z==null?void 0:z.trim())||void 0,seriesNumber:B,order:Y??Oe.order}:Oe);de(le),(k==null?void 0:k.id)===_&&j({...k,seriesName:(z==null?void 0:z.trim())||void 0,seriesNumber:B,order:Y??k.order})}const ue={"wil-ik-lezen":"wil-ik-lezen","aan-het-lezen":"aan-het-lezen",gelezen:"gelezen"};function ge(_,z){const B=z??ue[_],Y=!ue[_],le=Array.from(Qe),Oe=r.map(ye=>{if(!le.includes(ye.id))return ye;const De=ye.shelfIds??[];if(B){const st=Y&&!De.includes(_);return{...ye,status:B,...st?{shelfIds:[...De,_]}:{}}}return De.includes(_)?ye:{...ye,shelfIds:[...De,_]}});de(Oe),He(new Set),fe(!1),Me(null)}function Se(){return r.filter(_=>_.status==="wil-ik-lezen").sort((_,z)=>{const B=_.order??0,Y=z.order??0;return B!==Y?B-Y:_.title.localeCompare(z.title)})}function be(_,z){const B=Se(),Y=B.findIndex(at=>at.id===_);if(Y===-1)return;const le=z==="up"?Y-1:Y+1;if(le<0||le>=B.length)return;const Oe=[...B],[ye]=Oe.splice(Y,1);Oe.splice(le,0,ye);const De=new Map;Oe.forEach((at,Ve)=>{De.set(at.id,Ve+1)});const st=r.map(at=>at.status==="wil-ik-lezen"&&De.has(at.id)?{...at,order:De.get(at.id)}:at);de(st)}function ve(_){const z=Se(),B=z.findIndex(De=>De.id===_);if(B===-1||B===0)return;const Y=[...z],[le]=Y.splice(B,1);Y.unshift(le);const Oe=new Map;Y.forEach((De,st)=>{Oe.set(De.id,st+1)});const ye=r.map(De=>De.status==="wil-ik-lezen"&&Oe.has(De.id)?{...De,order:Oe.get(De.id)}:De);de(ye),(k==null?void 0:k.id)===_&&(Le("1"),j({...k,order:1}))}function _e(_){const z=Se(),B=z.findIndex(De=>De.id===_);if(B===-1||B===z.length-1)return;const Y=[...z],[le]=Y.splice(B,1);Y.push(le);const Oe=new Map;Y.forEach((De,st)=>{Oe.set(De.id,st+1)});const ye=r.map(De=>De.status==="wil-ik-lezen"&&Oe.has(De.id)?{...De,order:Oe.get(De.id)}:De);if(de(ye),(k==null?void 0:k.id)===_){const De=Y.length;Le(String(De)),j({...k,order:De})}}function de(_){pi(_),a(_),He(z=>{const B=new Set(Array.from(z).filter(Y=>_.some(le=>le.id===Y)));return B.size===0&&We(!1),B})}function ee(_,z){const B=r.map(Y=>Y.id===_?{...Y,pageCount:z}:Y);de(B),k&&k.id===_&&j({...k,pageCount:z})}function Z(_,z){const B=r.map(Y=>Y.id===_?{...Y,status:z,finishedAt:z==="gelezen"?new Date().toISOString().slice(0,10):Y.finishedAt}:Y);de(B)}const Ae=b.useMemo(()=>{if(!h)return null;const _=new Date,z=h.year,B=_.getFullYear(),Y=365+(z%4===0?1:0),le=z===B?K0(_):Y,ye=r.filter(K=>K.status!=="gelezen"?!1:K.finishedAt?new Date(K.finishedAt).getFullYear()===z:z===B).length,De=h.targetBooks*le/Y,st=ye-De,at=Math.round(st*10)/10;let Ve="op-schema",A="";return st>.5?(Ve="voor",A=`Je loopt ${Math.abs(at)} boeken voor op schema `):st<-.5?(Ve="achter",A=`Je loopt ${Math.abs(at)} boeken achter op schema`):A="Je ligt precies op schema",{finishedCount:ye,expectedByNow:De.toFixed(1),remaining:Math.max(h.targetBooks-ye,0),status:Ve,statusText:A,diff:at}},[r,h]),Pe=b.useMemo(()=>{if(!(h!=null&&h.weeklyPages)||!h.startDate||!h.endDate)return null;const _=new Date;_.setHours(0,0,0,0);const z=Ju(_),B=new Date(h.startDate+"T00:00:00"),Y=new Date(h.endDate+"T00:00:00");B.setHours(0,0,0,0),Y.setHours(0,0,0,0);const le=new Set(h.offDays||[]),Oe=new Set(h.offDaysAuto||[]),ye=new Set(h.offDaysManual||[]),De=Oe.has(z)||ye.has(z)||le.has(z);if(_<B||_>Y||De)return null;const st=h.dailyReading||{},at=h.startPage??0,A=h.weeklyPages-at;if(A<=0)return null;const K=[];let ne=new Date(B);for(;ne<=Y;){const Dt=new Date(ne),nn=Ju(Dt);K.push({date:Dt,dateStr:nn}),ne.setDate(ne.getDate()+1)}const et=K.filter(Dt=>!Oe.has(Dt.dateStr)&&!ye.has(Dt.dateStr)&&!le.has(Dt.dateStr));if(et.length===0)return null;const pt=A/et.length;let wt=at;const xt=[];for(const Dt of K){const nn=st[Dt.dateStr]||wt;xt.push(nn),wt=nn}const Ut=xt[xt.length-1]??at;let Nn=Math.max(0,Ut-at);const Kn=[];let gn=0;for(let Dt=0;Dt<K.length;Dt++){const nn=K[Dt];if(Oe.has(nn.dateStr)||ye.has(nn.dateStr)||le.has(nn.dateStr)){Kn.push(0);continue}const ir=pt+gn,Dn=Math.min(ir,Nn);Kn.push(Dn),Nn=Math.max(0,Nn-Dn),Dn<ir?gn=ir-Dn:gn=0}gn=0;for(let Dt=0;Dt<K.length;Dt++){const nn=K[Dt];if(nn.dateStr===z)break;if(Oe.has(nn.dateStr)||ye.has(nn.dateStr)||le.has(nn.dateStr))continue;const ir=pt+gn,Dn=Kn[Dt];Dn<ir?gn=ir-Dn:gn=0}const sr=pt+gn,pr=K.findIndex(Dt=>Dt.dateStr===z),rs=pr>=0?Kn[pr]:0,ss=Math.max(0,sr-rs),qn=pr>=0?xt[pr]:0;return{target:Math.round(sr*10)/10,read:Math.round(rs*10)/10,remaining:Math.round(ss*10)/10,isComplete:rs>=sr,cumulativePages:qn,date:z}},[h]);function te(_){const z=h==null?void 0:h.weeklyChallenge;if(!z)return null;const B=z.books.find(Oe=>Oe.bookId===_);if(!B)return null;const Y=h.dailyReadingPerBook||{};let le=0;for(const Oe of Object.values(Y)){const ye=Oe[_];typeof ye=="number"&&ye>le&&(le=ye)}return{current:le,total:B.totalPages}}function nt(_,z){if(!h)return;const B={...h,dailyReading:{...h.dailyReading,[_]:z}};Gr(B),p(B)}function rt(){var ye;if(!h||!Pe)return;const _=new Date;_.setHours(0,0,0,0);const B=(_.getDay()+3)%7,Y=new Date(_);Y.setDate(Y.getDate()-B),Y.setHours(0,0,0,0);let le=h.startPage??0;if(B>0){const De=new Date(_);De.setDate(De.getDate()-1);const st=Ju(De);le=((ye=h.dailyReading)==null?void 0:ye[st])??le}const Oe=le+Pe.target;nt(Pe.date,Math.ceil(Oe))}return o.jsxs("div",{className:`page dashboard-page ${y==="mobile"?"dashboard-mobile-view":""}`,children:[o.jsxs("div",{className:"page-header",style:{display:y==="mobile"?"none":void 0},children:[o.jsx("h1",{children:"Dashboard"}),s==="toggle"&&o.jsxs("div",{className:"dashboard-view-toggle",children:[o.jsx("button",{type:"button",className:`view-toggle-button ${y==="desktop"?"active":""}`,onClick:()=>S("desktop"),children:"Overzicht"}),o.jsx("button",{type:"button",className:`view-toggle-button ${y==="mobile"?"active":""}`,onClick:()=>S("mobile"),children:"Mobiele stijl"})]})]}),y==="desktop"&&h&&Ae&&o.jsxs("section",{className:"card challenge-card",children:[o.jsxs("div",{className:"challenge-header",children:[o.jsxs("h2",{children:["Lees-challenge ",h.year]}),o.jsxs("div",{className:"challenge-progress-bar-wrapper",children:[o.jsx("div",{className:"challenge-progress-bar",children:o.jsx("div",{className:"challenge-progress-fill",style:{width:`${Math.min(100,Ae.finishedCount/h.targetBooks*100)}%`}})}),o.jsxs("div",{className:"challenge-progress-text",children:[o.jsx("strong",{children:Ae.finishedCount})," / ",o.jsx("strong",{children:h.targetBooks})]})]})]}),o.jsxs("div",{className:"challenge-summary",children:[o.jsxs("div",{className:"challenge-stats-grid",children:[o.jsxs("div",{className:"challenge-stat-item",children:[o.jsx("div",{className:"challenge-stat-label",children:"Verwacht"}),o.jsx("div",{className:"challenge-stat-value",children:Ae.expectedByNow})]}),o.jsxs("div",{className:"challenge-stat-item",children:[o.jsx("div",{className:"challenge-stat-label",children:"Nog te gaan"}),o.jsx("div",{className:"challenge-stat-value",children:Ae.remaining})]}),o.jsx("div",{className:`challenge-status challenge-status-${Ae.status}`,children:Ae.statusText})]}),Pe&&o.jsxs("div",{className:"challenge-daily-goal",children:[o.jsxs("div",{className:"challenge-daily-goal-header",children:[o.jsxs("div",{children:[o.jsx("strong",{children:V0(new Date).substring(0,2)}),o.jsxs("span",{className:"challenge-daily-goal-date",children:[" ",new Date().getDate(),"/",new Date().getMonth()+1]})]}),o.jsx("span",{className:"today-badge-small",children:"Nu"})]}),o.jsxs("div",{className:"challenge-daily-goal-content",children:[o.jsxs("div",{className:"challenge-daily-goal-target",children:["Doel: ",Math.round(Pe.target)," blz"]}),o.jsxs("div",{className:"challenge-daily-goal-input",children:[o.jsx("label",{className:"challenge-daily-goal-input-label",children:"Gelezen tot bladzijde..."}),o.jsx("input",{type:"number",value:Pe.cumulativePages||"",onChange:_=>{const z=Number(_.target.value)||0;nt(Pe.date,z)},min:"0",placeholder:"0",className:"challenge-pages-input"})]}),!Pe.isComplete&&o.jsx("button",{className:"challenge-complete-button",onClick:rt,title:"Markeer doel als behaald",children:" Afvinken"}),Pe.isComplete&&o.jsx("div",{className:"challenge-daily-goal-complete",children:" Behaald"}),Pe.remaining>0&&!Pe.isComplete&&o.jsxs("div",{className:"challenge-daily-goal-remaining",children:["Nog ",Math.round(Pe.remaining)," blz"]})]})]})]})]}),y==="desktop"&&o.jsxs("section",{className:"card",children:[o.jsx("h2",{children:"Mijn planken"}),o.jsx("div",{className:"shelves-grid",children:u.sort((_,z)=>{const B={"aan-het-lezen":1,"wil-ik-lezen":2,gelezen:3},Y=B[_.id]??999,le=B[z.id]??999;return Y-le}).map(_=>{const z=H0(_,r),B=G0(_,n),Y=_.id==="aan-het-lezen",le=_.id==="wil-ik-lezen",Oe=_.id==="gelezen";return o.jsx($t,{to:B,className:`shelf-card-link ${Y?"shelf-compact":""} ${le?"shelf-priority":""} ${Oe?"shelf-secondary":""}`,children:o.jsxs("div",{className:`shelf-card ${Y?"shelf-card-compact":""} ${le?"shelf-card-priority":""} ${Oe?"shelf-card-secondary":""}`,children:[o.jsxs("h3",{children:[_.name,o.jsxs("span",{className:"book-count",children:["(",z.length,")"]})]}),z.length===0?o.jsx("p",{className:"empty-shelf",children:"Geen boeken op deze plank"}):o.jsxs("div",{className:Y?"shelf-books-list-with-descriptions":"shelf-books-grid",children:[z.slice(0,Y?3:6).map(ye=>{const De=m.has(ye.id);return o.jsxs("div",{className:Y?"shelf-book-with-description":"",children:[o.jsx($t,{to:Ot(n,`/boek/${ye.id}`),className:"shelf-book-item-link",onClick:st=>st.stopPropagation(),children:o.jsxs("div",{className:"shelf-book-item",children:[ye.coverUrl?o.jsx("img",{src:ye.coverUrl,alt:ye.title,className:"shelf-book-cover"}):o.jsx("div",{className:"shelf-book-placeholder",children:ye.title.charAt(0).toUpperCase()}),ye.seriesName&&o.jsxs("div",{className:"shelf-book-series-badge",children:[ye.seriesName,ye.seriesNumber&&` #${ye.seriesNumber}`]}),o.jsx("div",{className:"shelf-book-title",title:ye.title,children:ye.title})]})}),Y&&ye.description&&o.jsxs("div",{className:"shelf-book-description-wrapper",children:[o.jsx("button",{className:"description-toggle-button",onClick:st=>{st.preventDefault(),st.stopPropagation();const at=new Set(m);De?at.delete(ye.id):at.add(ye.id),v(at)},children:De?" Verberg beschrijving":" Bekijk beschrijving"}),De&&o.jsx("div",{className:"shelf-book-description",children:ye.description})]})]},ye.id)}),z.length>(Y?3:6)&&o.jsxs("div",{className:"shelf-book-more",children:["+",z.length-(Y?3:6)," meer"]})]})]})},_.id)})})]}),y==="mobile"&&o.jsxs("section",{className:"card mobile-reading-lists",children:[o.jsxs("div",{className:"mobile-books-subtabs",role:"tablist","aria-label":"Leeslijst of uitgelezen",children:[o.jsx("button",{type:"button",role:"tab","aria-selected":Fe==="leeslijst",className:`mobile-subtab ${Fe==="leeslijst"?"active":""}`,onClick:()=>Ze("leeslijst"),children:"Leeslijst"}),o.jsx("button",{type:"button",role:"tab","aria-selected":Fe==="gelezen",className:`mobile-subtab ${Fe==="gelezen"?"active":""}`,onClick:()=>Ze("gelezen"),children:"Uitgelezen"})]}),Fe==="leeslijst"&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"mobile-section-heading",children:"Aan het lezen"}),o.jsxs("div",{className:"mobile-reading-list",children:[r.filter(_=>_.status==="aan-het-lezen").map(_=>{const z=te(_.id),B=z&&z.total>0,Y=Qe.has(_.id);return o.jsxs("div",{className:`mobile-reading-item ${Y?"mobile-reading-item-selected":""}`,children:[o.jsxs("button",{type:"button",className:"mobile-reading-main",onTouchStart:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const le=Ge.current;le&&(_t(le),ft.current=!0,Ge.current=null),pe.current=null},500))},onTouchEnd:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onTouchCancel:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseDown:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const le=Ge.current;le&&(_t(le),ft.current=!0,Ge.current=null),pe.current=null},500))},onMouseUp:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseLeave:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onClick:le=>{if(ft.current){le.preventDefault(),le.stopPropagation(),ft.current=!1;return}if(ze){le.preventDefault(),le.stopPropagation(),St(_.id);return}yt(_)},onContextMenu:le=>{le.preventDefault(),ze?St(_.id):_t(_.id)},children:[o.jsx("div",{className:"mobile-reading-cover",children:_.coverUrl?o.jsx("img",{src:_.coverUrl,alt:_.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:_.title.charAt(0).toUpperCase()})}),o.jsxs("div",{className:"mobile-reading-text",children:[_.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[_.seriesName,_.seriesNumber!=null?` #${_.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:_.title}),o.jsx("div",{className:"mobile-reading-author",children:_.authors}),!B&&o.jsx("div",{className:"mobile-reading-pages",children:_.pageCount!=null?`${_.pageCount} blz`:"Vul zelf het aantal pagina's in"}),B&&o.jsxs("div",{className:"mobile-reading-challenge-progress",children:[o.jsx("div",{className:"mobile-reading-progress-bar-wrap",children:o.jsx("div",{className:"mobile-reading-progress-bar-fill",style:{width:`${Math.min(100,z.current/z.total*100)}%`}})}),o.jsxs("div",{className:"mobile-reading-progress-pages",children:["Bladzijde ",o.jsx("strong",{children:z.current})," van ",z.total]})]})]})]}),o.jsx("button",{type:"button",className:"mobile-reading-action reading",onClick:()=>Z(_.id,"gelezen"),children:""})]},_.id)}),r.filter(_=>_.status==="aan-het-lezen").length===0&&o.jsx("p",{className:"page-intro-small",children:"Je bent nu met geen enkel boek bezig."})]}),o.jsx("h2",{className:"mobile-section-heading",children:"TBR"}),o.jsxs("div",{className:"mobile-reading-list",children:[Se().map(_=>{const z=Qe.has(_.id);return o.jsxs("div",{className:`mobile-reading-item ${z?"mobile-reading-item-selected":""}`,children:[o.jsxs("div",{className:"mobile-reading-left",children:[o.jsxs("div",{className:"mobile-reading-order",children:[o.jsx("button",{type:"button",className:"mobile-order-button",onClick:()=>be(_.id,"up"),"aria-label":"Omhoog in TBR",children:""}),o.jsx("button",{type:"button",className:"mobile-order-button",onClick:()=>be(_.id,"down"),"aria-label":"Omlaag in TBR",children:""})]}),o.jsxs("button",{type:"button",className:"mobile-reading-main",onTouchStart:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const B=Ge.current;B&&(_t(B),ft.current=!0,Ge.current=null),pe.current=null},500))},onTouchEnd:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onTouchCancel:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseDown:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const B=Ge.current;B&&(_t(B),ft.current=!0,Ge.current=null),pe.current=null},500))},onMouseUp:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseLeave:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onClick:B=>{if(ft.current){B.preventDefault(),B.stopPropagation(),ft.current=!1;return}if(ze){B.preventDefault(),B.stopPropagation(),St(_.id);return}yt(_)},onContextMenu:B=>{B.preventDefault(),ze?St(_.id):_t(_.id)},children:[o.jsx("div",{className:"mobile-reading-cover",children:_.coverUrl?o.jsx("img",{src:_.coverUrl,alt:_.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:_.title.charAt(0).toUpperCase()})}),o.jsxs("div",{className:"mobile-reading-text",children:[_.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[_.seriesName,_.seriesNumber!=null?` #${_.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:_.title}),o.jsx("div",{className:"mobile-reading-author",children:_.authors}),o.jsx("div",{className:"mobile-reading-pages",children:_.pageCount!=null?`${_.pageCount} blz`:"Vul zelf het aantal pagina's in"})]})]})]}),o.jsx("button",{type:"button",className:"mobile-reading-action start",onClick:()=>Z(_.id,"aan-het-lezen"),children:"Start"})]},_.id)}),r.filter(_=>_.status==="wil-ik-lezen").length===0&&o.jsx("p",{className:"page-intro-small",children:"Je TBR-lijst is leeg."})]})]}),Fe==="gelezen"&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"mobile-section-heading",children:"Uitgelezen"}),o.jsxs("div",{className:"mobile-reading-filters",children:[o.jsxs("div",{className:"mobile-reading-filter",children:[o.jsx("label",{className:"mobile-reading-filter-label",children:"Serie"}),o.jsxs("select",{className:"mobile-reading-filter-select",value:tt,onChange:_=>lt(_.target.value),children:[o.jsx("option",{value:"alle",children:"Alle series"}),qt.map(_=>o.jsx("option",{value:_,children:_},_))]})]}),o.jsxs("div",{className:"mobile-reading-filter",children:[o.jsx("label",{className:"mobile-reading-filter-label",children:"Sorteren"}),o.jsxs("button",{type:"button",className:"mobile-reading-sort-toggle",onClick:()=>ut(_=>_==="desc"?"asc":"desc"),children:["Datum uitgelezen "," ",dt==="desc"?"Nieuwste eerst":"Oudste eerst"]})]})]}),o.jsxs("div",{className:"mobile-reading-list mobile-reading-list-simple",children:[(()=>{const _=r.filter(Y=>Y.status==="gelezen");return[...tt==="alle"?_:_.filter(Y=>Y.seriesName===tt)].sort((Y,le)=>{const Oe=Y.finishedAt?new Date(Y.finishedAt).getTime():0,ye=le.finishedAt?new Date(le.finishedAt).getTime():0;return Oe===ye?Y.title.localeCompare(le.title):dt==="desc"?ye-Oe:Oe-ye})})().map(_=>{const z=Qe.has(_.id);return o.jsx("div",{className:`mobile-reading-item mobile-reading-item-simple ${z?"mobile-reading-item-selected":""}`,children:o.jsxs("button",{type:"button",className:"mobile-reading-main",onTouchStart:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const B=Ge.current;B&&(_t(B),ft.current=!0,Ge.current=null),pe.current=null},500))},onTouchEnd:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onTouchCancel:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseDown:()=>{ze||(Ge.current=_.id,pe.current=setTimeout(()=>{const B=Ge.current;B&&(_t(B),ft.current=!0,Ge.current=null),pe.current=null},500))},onMouseUp:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onMouseLeave:()=>{pe.current&&(clearTimeout(pe.current),pe.current=null),Ge.current=null},onClick:B=>{if(ft.current){B.preventDefault(),B.stopPropagation(),ft.current=!1;return}if(ze){B.preventDefault(),B.stopPropagation(),St(_.id);return}yt(_)},onContextMenu:B=>{B.preventDefault(),ze?St(_.id):_t(_.id)},children:[o.jsx("div",{className:"mobile-reading-cover",children:_.coverUrl?o.jsx("img",{src:_.coverUrl,alt:_.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:_.title.charAt(0).toUpperCase()})}),o.jsxs("div",{className:"mobile-reading-text",children:[_.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[_.seriesName,_.seriesNumber!=null?` #${_.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:_.title}),o.jsx("div",{className:"mobile-reading-author",children:_.authors}),_.finishedAt&&o.jsxs("div",{className:"mobile-reading-finished",children:["Uitgelezen: ",_.finishedAt]})]})]})},_.id)}),r.filter(_=>_.status==="gelezen").length===0&&o.jsx("p",{className:"page-intro-small",children:"Nog geen uitgelezen boeken."})]})]})]}),ze&&Qe.size>0&&o.jsxs("div",{className:"mobile-selection-bar",children:[o.jsxs("span",{className:"mobile-selection-count",children:[Qe.size," geselecteerd"]}),o.jsx("button",{type:"button",className:"primary-button mobile-selection-add",onClick:()=>fe(!0),children:"Toevoegen aan plank"}),o.jsx("button",{type:"button",className:"primary-button",onClick:()=>{oe(""),w(!0)},children:"Delen met Boekbuddy"}),o.jsx("button",{type:"button",className:"secondary-button destructive",onClick:()=>Ce(!0),children:"Verwijderen"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{He(new Set),We(!1)},children:"Selectiemodus sluiten"})]}),y==="mobile"&&je&&o.jsx("div",{className:"modal-backdrop",onClick:()=>Ce(!1),children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:_=>_.stopPropagation(),children:[o.jsx("h3",{children:"Geselecteerde boeken verwijderen"}),o.jsxs("p",{className:"modal-intro",children:["Weet je zeker dat je ",Qe.size," boek",Qe.size===1?"":"en"," uit je bibliotheek wilt verwijderen? Dit kan niet ongedaan worden gemaakt."]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>Ce(!1),children:"Annuleren"}),o.jsx("button",{type:"button",className:"primary-button destructive",onClick:()=>{const _=r.filter(z=>!Qe.has(z.id));de(_),He(new Set),Ce(!1),k!=null&&k.id&&Qe.has(k.id)&&j(null)},children:"Verwijderen"})]})]})}),y==="mobile"&&re&&o.jsx("div",{className:"modal-backdrop",onClick:()=>fe(!1),children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:_=>_.stopPropagation(),children:[o.jsx("h3",{children:"Toevoegen aan plank"}),o.jsx("p",{className:"modal-intro",children:J?"Kies status voor deze plank":`Kies een plank voor ${Qe.size} boek${Qe.size===1?"":"en"}.`}),J?o.jsx("ul",{className:"add-to-shelf-list",children:["wil-ik-lezen","aan-het-lezen","gelezen"].map(_=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>ge(J,_),children:ht[_]})},_))}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"add-to-shelf-list",children:u.map(_=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{_.system?ge(_.id):Me(_.id)},children:_.name})},_.id))}),o.jsxs("div",{className:"add-to-shelf-new",children:[o.jsx("input",{type:"text",value:F,onChange:_=>Te(_.target.value),placeholder:"Nieuwe plank naam",className:"add-to-shelf-new-input"}),o.jsx("button",{type:"button",className:"add-to-shelf-item add-to-shelf-new-btn",disabled:!F.trim(),onClick:()=>{const _=F.trim();if(!_)return;const z={id:`shelf-${Date.now()}`,name:_},B=[...u,z];mi(B),c(B),Me(z.id),Te("")},children:"Nieuwe plank aanmaken"})]})]}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{fe(!1),Te(""),Me(null)},children:J?"Terug":"Sluiten"})]})}),y==="mobile"&&ae&&o.jsx("div",{className:"modal-backdrop",onClick:()=>{w(!1),oe("")},children:o.jsxs("div",{className:"modal modal-add-to-shelf",onClick:_=>_.stopPropagation(),children:[o.jsx("h3",{children:"Delen met Boekbuddy"}),o.jsxs("p",{className:"modal-intro",children:["Kies een Boekbuddy om ",Qe.size," boek",Qe.size===1?"":"en"," mee te delen. Ze kunnen de boeken dan aan hun TBR toevoegen."]}),T&&o.jsx("p",{className:"form-error",children:T}),o.jsx("ul",{className:"add-to-shelf-list",children:jn().map(_=>o.jsx("li",{children:o.jsx("button",{type:"button",className:"add-to-shelf-item",onClick:()=>{const B=r.filter(le=>Qe.has(le.id)).map(le=>({title:le.title,authors:le.authors,coverUrl:le.coverUrl,seriesName:le.seriesName})),Y=vc(_,B);Y.ok?(He(new Set),w(!1),oe("")):oe(Y.error)},children:_})},_))}),jn().length===0&&o.jsx("p",{className:"modal-intro",children:"Je hebt nog geen Boekbuddies. Voeg eerst vrienden toe via Profiel."}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{w(!1),oe("")},children:"Sluiten"})]})}),y==="mobile"&&k&&o.jsx("div",{className:"modal-backdrop",onClick:()=>j(null),children:o.jsxs("div",{className:"modal modal-book-info",onClick:_=>{_.stopPropagation()},children:[o.jsx("h3",{children:k.title}),o.jsx("p",{className:"modal-intro",children:k.authors}),o.jsxs("div",{className:"modal-page-count-edit",children:[o.jsx("label",{className:"modal-page-count-label",children:"Aantal pagina's:"}),o.jsx("input",{type:"number",min:"1",value:P,onChange:_=>C(_.target.value),onBlur:()=>{const _=P.trim()?Number(P):void 0;_!==void 0&&_>0?ee(k.id,_):P.trim()===""&&ee(k.id,void 0)},placeholder:"Bijv. 467",className:"modal-page-count-input"})]}),o.jsxs("div",{className:"modal-series-edit",children:[o.jsx("label",{className:"modal-page-count-label",children:"Serie (optioneel)"}),!ke&&qt.length>0?o.jsxs("select",{value:O,onChange:_=>{const z=_.target.value;if(z==="__new__")xe(!0),W("");else{W(z);const B=z&&M?Number(M):void 0,Y=!z&&q?Number(q):void 0;me(k.id,z||void 0,B,Y)}},className:"modal-series-select",children:[o.jsx("option",{value:"",children:"Geen serie"}),qt.map(_=>o.jsx("option",{value:_,children:_},_)),o.jsx("option",{value:"__new__",children:"+ Nieuwe serie"})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",value:O,onChange:_=>W(_.target.value),onBlur:()=>{const _=O.trim()||void 0,z=_&&M?Number(M):void 0,B=!_&&q?Number(q):void 0;me(k.id,_,z,B)},placeholder:"Bijv. De zeven zussen",className:"modal-series-input"}),qt.length>0&&o.jsx("button",{type:"button",className:"link-button modal-series-toggle",onClick:()=>xe(!1),children:"Kies bestaande serie"})]}),O&&o.jsxs("div",{className:"modal-series-extra",children:[o.jsx("label",{className:"modal-page-count-label",children:"Nr. in serie"}),o.jsx("input",{type:"number",min:"1",value:M,onChange:_=>{const z=_.target.value;V(z),me(k.id,O||void 0,z?Number(z):void 0,void 0)},placeholder:"1",className:"modal-page-count-input"})]})]}),k.coverUrl&&o.jsx("div",{className:"modal-book-cover",children:o.jsx("img",{src:k.coverUrl,alt:k.title})}),k.description?o.jsx("p",{className:"modal-description",children:k.description}):o.jsx("p",{className:"modal-description",children:"Er is nog geen beschrijving beschikbaar voor dit boek."}),o.jsxs("div",{className:"modal-actions modal-actions-book",children:[k.status==="wil-ik-lezen"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>ve(k.id),title:"Zet dit boek bovenaan de TBR-lijst",children:"Bovenaan TBR"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>_e(k.id),title:"Zet dit boek onderaan de TBR-lijst",children:"Onderaan TBR"})]}),k.status==="aan-het-lezen"&&o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>{Z(k.id,"wil-ik-lezen"),j({...k,status:"wil-ik-lezen"})},children:"Terug naar TBR"}),o.jsx("button",{type:"button",className:"secondary-button destructive",onClick:()=>{window.confirm("Weet je zeker dat je dit boek wilt verwijderen?")&&L(k.id)},children:"Verwijderen"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>j(null),children:"Sluiten"})]})]})})]})}const J0={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"};function Yu(){var ae,w;const{id:s}=Nc(),n=hr(),r=fr(),[a,u]=b.useState(()=>dr());b.useEffect(()=>Ho(u),[]);const c=a.find(T=>T.id===s),[h,p]=b.useState((c==null?void 0:c.title)??""),[m,v]=b.useState((c==null?void 0:c.authors)??""),[y,S]=b.useState((c==null?void 0:c.status)??"wil-ik-lezen"),[k,j]=b.useState(c==null?void 0:c.rating),[P,C]=b.useState((c==null?void 0:c.finishedAt)??""),[O,W]=b.useState((c==null?void 0:c.notes)??""),[M,V]=b.useState((c==null?void 0:c.seriesName)??""),[q,Le]=b.useState(((ae=c==null?void 0:c.seriesNumber)==null?void 0:ae.toString())??""),[ke,xe]=b.useState(((w=c==null?void 0:c.order)==null?void 0:w.toString())??""),[Fe,Ze]=b.useState((c==null?void 0:c.pageCount)!=null?c.pageCount.toString():""),[tt,lt]=b.useState((c==null?void 0:c.coverUrl)??""),[dt,ut]=b.useState((c==null?void 0:c.description)??""),[Qe,He]=b.useState(()=>{if(c!=null&&c.seriesName){const T=new Set;return dr().forEach(oe=>{oe.seriesName&&T.add(oe.seriesName)}),!T.has(c.seriesName)}return!1}),ze=b.useMemo(()=>{const T=new Set;return a.forEach(oe=>{oe.seriesName&&T.add(oe.seriesName)}),Array.from(T).sort()},[a]);if(!c)return o.jsxs("div",{className:"page",children:[o.jsx("h1",{children:"Boek niet gevonden"}),o.jsx("p",{children:"Dit boek bestaat niet (meer) in je bibliotheek."}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>n(Ot(r,"/boeken")),children:"Terug naar overzicht"})]});function We(T){u(T),pi(T)}function re(T){if(T.preventDefault(),!c)return;const oe=M.trim()||void 0,je=a.map(Ce=>Ce.id===c.id?{...Ce,title:h.trim()||Ce.title,authors:m.trim(),status:y,rating:k,finishedAt:P||void 0,notes:O.trim()||void 0,seriesName:oe,seriesNumber:oe&&q?Number(q):void 0,order:!oe&&ke?Number(ke):void 0,coverUrl:tt.trim()||void 0,description:dt.trim()||void 0,pageCount:Fe&&Number(Fe)||void 0}:Ce);We(je),n(Ot(r,"/boeken"))}function fe(T){T==="__new__"?(He(!0),V("")):(He(!1),V(T))}return o.jsxs("div",{className:"page",children:[o.jsx("h1",{children:"Boek aanpassen"}),c.description&&o.jsxs("section",{className:"card book-description-card",children:[o.jsx("h2",{children:"Samenvatting"}),o.jsx("p",{className:"book-description-text",children:c.description})]}),o.jsxs("form",{onSubmit:re,className:"card form-card book-detail-form",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Titel"}),o.jsx("input",{type:"text",value:h,onChange:T=>p(T.target.value)})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Auteur(s)"}),o.jsx("input",{type:"text",value:m,onChange:T=>v(T.target.value)})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Boekkaft URL (optioneel)"}),o.jsx("input",{type:"url",value:tt,onChange:T=>lt(T.target.value),placeholder:"https://example.com/cover.jpg"})]}),tt&&o.jsx("div",{className:"cover-preview",children:o.jsx("img",{src:tt,alt:"Preview",className:"cover-preview-image",onError:T=>{T.target.style.display="none"}})}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Status"}),o.jsx("select",{value:y,onChange:T=>{const oe=T.target.value;if(S(oe),oe==="gelezen"&&!P){const je=new Date,Ce=je.getFullYear(),F=String(je.getMonth()+1).padStart(2,"0"),Te=String(je.getDate()).padStart(2,"0");C(`${Ce}-${F}-${Te}`)}},children:Object.entries(J0).map(([T,oe])=>o.jsx("option",{value:T,children:oe},T))})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Beoordeling"}),o.jsx(Wp,{value:k,onChange:j})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Uitgelezen op"}),o.jsx("input",{type:"date",value:P,onChange:T=>C(T.target.value)})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Serie naam (optioneel)"}),!Qe&&ze.length>0?o.jsx("div",{className:"series-select-wrapper",children:o.jsxs("select",{value:M||"",onChange:T=>fe(T.target.value),className:"series-select",children:[o.jsx("option",{value:"",children:"Geen serie"}),ze.map(T=>o.jsx("option",{value:T,children:T},T)),o.jsx("option",{value:"__new__",children:"+ Nieuwe serie toevoegen"})]})}):o.jsxs("div",{className:"series-input-wrapper",children:[o.jsx("input",{type:"text",value:M,onChange:T=>V(T.target.value),placeholder:"Bijv. De zeven zussen",className:"series-input"}),ze.length>0&&o.jsx("button",{type:"button",className:"link-button",onClick:()=>He(!1),children:"Selecteer bestaande serie"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:M?"Nummer in serie (optioneel)":"Volgorde (optioneel)"}),o.jsx("input",{type:"number",value:M?q:ke,onChange:T=>{M?Le(T.target.value):xe(T.target.value)},placeholder:"Bijv. 1",min:"1"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Aantal pagina's (optioneel)"}),o.jsx("input",{type:"number",min:"1",value:Fe,onChange:T=>Ze(T.target.value),placeholder:"Bijv. 467"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Samenvatting (optioneel)"}),o.jsx("textarea",{value:dt,onChange:T=>ut(T.target.value),rows:4,className:"notes-textarea",placeholder:"Korte samenvatting van het boek..."})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("span",{children:"Notitie"}),o.jsx("textarea",{value:O,onChange:T=>W(T.target.value),rows:3,className:"notes-textarea"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"submit",className:"primary-button",children:"Opslaan"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>n(-1),children:"Annuleren"})]})]})]})}const Y0={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"},wc="bt_user_name";function Qu(){const s=At();return s?`${wc}_${s}`:wc}function Xu({onLogout:s}){const n=hr(),r=fr(),a=At(),[u,c]=b.useState(()=>window.localStorage.getItem(Qu())??""),[h,p]=b.useState(()=>Zr()),[m,v]=b.useState(""),[y,S]=b.useState(null),[k,j]=b.useState(""),[P,C]=b.useState(""),[O,W]=b.useState(""),[M,V]=b.useState(""),[q,Le]=b.useState(""),[ke,xe]=b.useState(!1),[Fe,Ze]=b.useState(()=>jn()),[tt,lt]=b.useState(()=>Yf()),[dt,ut]=b.useState(()=>Qf()),[Qe,He]=b.useState(""),[ze,We]=b.useState(""),[re,fe]=b.useState(!1),[ae,w]=b.useState(()=>es()),[T,oe]=b.useState(!1),[je,Ce]=b.useState(null),[F,Te]=b.useState(()=>new Map),[J,Me]=b.useState(null),[ht,pe]=b.useState(""),[ft,Ge]=b.useState(null),[St,_t]=b.useState(!1),[qt,yt]=b.useState(""),[L,me]=b.useState(""),[ue,ge]=b.useState(!1),[Se,be]=b.useState(0),ve=(()=>{const A=Qe.trim().toLowerCase(),K=Vf(),ne=(a??"").toLowerCase();return K.filter(et=>et.toLowerCase()!==ne&&(!A||et.toLowerCase().includes(A)))})();function _e(){Ze(jn()),lt(Yf()),ut(Qf())}function de(){w(es())}function ee(A,K){Te(ne=>{const et=new Map(ne),pt=new Set(et.get(A)??[]);return pt.has(K)?pt.delete(K):pt.add(K),pt.size===0?et.delete(A):et.set(A,pt),et})}function Z(A){Te(K=>{const ne=new Map(K);return ne.delete(A),ne})}function Ae(A){var K;return((K=F.get(A))==null?void 0:K.size)??0}b.useEffect(()=>{Kf().then(()=>be(A=>A+1))},[]);async function Pe(){await Kf(),be(A=>A+1)}b.useEffect(()=>{function A(K){var ne,et,pt,wt;(ne=K.key)!=null&&ne.startsWith("bt_shelves_v1")&&p(Zr()),(et=K.key)!=null&&et.startsWith(wc)&&c(window.localStorage.getItem(Qu())??""),((pt=K.key)!=null&&pt.startsWith("bt_friends_v1")||K.key==="bt_friend_requests_v1")&&_e(),(wt=K.key)!=null&&wt.startsWith("bt_shared_inbox_v1")&&de()}return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)},[]);function te(A){p(A),mi(A)}function nt(A){if(A.preventDefault(),!m.trim())return;const K={id:`shelf-${Date.now()}`,name:m.trim()};te([...h,K]),v("")}function rt(A){S(A.id),j(A.name)}function _(A){if(!k.trim()){z();return}const K=h.map(ne=>ne.id===A?{...ne,name:k.trim()}:ne);te(K),S(null),j("")}function z(){S(null),j("")}function B(A){te(h.filter(K=>K.id!==A))}function Y(A){A.preventDefault();const K=u.trim();K&&window.localStorage.setItem(Qu(),K)}function le(A){We("");const K=E0(A);K.ok?_e():We(K.error)}function Oe(A){T0(A),_e()}function ye(A){P0(A),_e()}function De(A){R0(A),_e()}async function st(A){if(A.preventDefault(),Le(""),xe(!1),O!==M){Le("Nieuw wachtwoord en bevestiging komen niet overeen.");return}const K=await k0(P,O);K.ok?(C(""),W(""),V(""),xe(!0)):Le(K.error)}async function at(A){if(A.preventDefault(),me(""),!qt.trim()){me("Vul je wachtwoord in om te bevestigen.");return}ge(!0);const K=await S0(qt);ge(!1),K.ok?(fe(!1),_t(!1),yt(""),s(),n(Ot(r,"/login"),{replace:!0})):me(K.error)}const Ve=(u||a||"?").charAt(0).toUpperCase();return o.jsxs("div",{className:"page profile-page",children:[o.jsxs("header",{className:"profile-hero",children:[o.jsx("div",{className:"profile-avatar","aria-hidden":"true",children:Ve}),o.jsxs("div",{className:"profile-hero-text",children:[o.jsx("h1",{className:"profile-display-name",children:u.trim()||"Profiel"}),a&&o.jsx("span",{className:"profile-username-badge",children:a})]})]}),o.jsxs("div",{className:"profile-hero-actions",children:[o.jsx($t,{to:"/mobile/bibliotheek",className:"profile-hero-btn profile-hero-btn-primary",children:"Mijn bibliotheek"}),o.jsx("button",{type:"button",className:"profile-hero-btn",onClick:()=>fe(!0),children:"Mijn account bewerken"}),o.jsx("button",{type:"button",className:"profile-hero-btn profile-hero-btn-logout",onClick:s,children:"Uitloggen"})]}),re&&o.jsx("div",{className:"modal-backdrop",onClick:()=>fe(!1),children:o.jsxs("div",{className:"modal profile-account-modal",onClick:A=>A.stopPropagation(),children:[o.jsx("h3",{children:"Mijn account bewerken"}),o.jsxs("form",{onSubmit:Y,className:"profile-form-row profile-modal-form-row",children:[o.jsxs("label",{className:"profile-field profile-field-grow",children:[o.jsx("span",{className:"profile-field-label",children:"Weergavenaam"}),o.jsx("input",{type:"text",value:u,onChange:A=>c(A.target.value),placeholder:"Bijv. Jan",className:"profile-input"})]}),o.jsx("button",{type:"submit",className:"primary-button",children:"Opslaan"})]}),o.jsx("h4",{className:"profile-modal-subtitle",children:"Wachtwoord wijzigen"}),o.jsxs("form",{onSubmit:st,className:"password-form profile-password-form",children:[o.jsx("input",{type:"password",value:P,onChange:A=>C(A.target.value),placeholder:"Huidige wachtwoord",autoComplete:"current-password",className:"profile-input"}),o.jsx("input",{type:"password",value:O,onChange:A=>W(A.target.value),placeholder:"Nieuw wachtwoord (min. 4 tekens)",autoComplete:"new-password",className:"profile-input"}),o.jsx("input",{type:"password",value:M,onChange:A=>V(A.target.value),placeholder:"Nieuw wachtwoord bevestigen",autoComplete:"new-password",className:"profile-input"}),q&&o.jsx("p",{className:"form-error",children:q}),ke&&o.jsx("p",{className:"form-success",children:"Wachtwoord is gewijzigd."}),o.jsx("button",{type:"submit",className:"primary-button",children:"Wachtwoord wijzigen"})]}),St&&o.jsxs("form",{onSubmit:at,className:"profile-delete-account-form",children:[o.jsx("p",{className:"profile-delete-account-warning",children:"Weet je het zeker? Je account en alle gegevens (boeken, planken, vrienden) worden definitief gewist. Dit kan niet ongedaan worden gemaakt."}),o.jsxs("label",{className:"form-field",children:[o.jsx("span",{className:"profile-field-label",children:"Vul je wachtwoord in om te bevestigen"}),o.jsx("input",{type:"password",value:qt,onChange:A=>yt(A.target.value),placeholder:"Wachtwoord",autoComplete:"current-password",className:"profile-input",disabled:ue})]}),L&&o.jsx("p",{className:"form-error",children:L}),o.jsx("button",{type:"submit",className:"primary-button destructive",disabled:ue||!qt.trim(),children:ue?"Bezig":"Account definitief verwijderen"})]}),o.jsxs("div",{className:"profile-modal-actions profile-modal-actions-with-delete",children:[o.jsx("button",{type:"button",className:"secondary-button profile-delete-account-btn destructive",onClick:()=>{_t(A=>!A),me(""),yt("")},children:St?"Annuleren":"Account verwijderen"}),o.jsx("button",{type:"button",className:"secondary-button",onClick:()=>fe(!1),children:"Sluiten"})]})]})}),o.jsxs("section",{className:"profile-card card",children:[o.jsx("h2",{className:"profile-card-title",children:"Boekbuddies"}),o.jsx("p",{className:"profile-card-desc",children:"Stuur een vriendschapsverzoek. Na acceptatie kun je elkaars leeslijst bekijken en boeken delen."}),ae.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"profile-subtitle",children:"Gedeeld met jou"}),o.jsxs("button",{type:"button",className:"shared-inbox-open-btn",onClick:()=>oe(!0),children:[o.jsx("span",{className:"shared-inbox-open-icon",children:""}),o.jsxs("span",{children:[ae.length," gedeeld item",ae.length===1?"":"s"," bekijken"]})]})]}),tt.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"profile-subtitle",children:"Inkomende vriendschapsverzoeken"}),o.jsx("div",{className:"profile-chips profile-chips-requests",children:tt.map(A=>o.jsxs("div",{className:"profile-chip",children:[o.jsx("span",{children:A}),o.jsxs("div",{className:"profile-chip-actions",children:[o.jsx("button",{type:"button",onClick:()=>Oe(A),className:"profile-chip-btn profile-chip-btn-accept",children:"Accepteren"}),o.jsx("button",{type:"button",onClick:()=>ye(A),className:"profile-chip-btn profile-chip-btn-remove",children:"Afwijzen"})]})]},A))})]}),o.jsx("h3",{className:"profile-subtitle",children:"Zoek Boekbuddies"}),o.jsx("div",{className:"profile-search-wrap",children:o.jsx("input",{type:"text",value:Qe,onChange:A=>{He(A.target.value),We("")},onFocus:Pe,placeholder:"Zoek op gebruikersnaam",className:"profile-search-input",autoComplete:"username"})}),ze&&o.jsx("p",{className:"form-error",children:ze}),Qe.trim()&&o.jsx("div",{className:"profile-search-results",children:ve.length===0?o.jsx("p",{className:"profile-empty",children:"Geen accounts gevonden."}):o.jsx("div",{className:"profile-chips",children:ve.map(A=>{const K=Fe.some(et=>et.toLowerCase()===A.toLowerCase()),ne=dt.some(et=>et.toLowerCase()===A.toLowerCase());return o.jsxs("div",{className:"profile-chip",children:[o.jsx("span",{children:A}),K?o.jsx($t,{to:Ot(r,`/boekbuddy/${encodeURIComponent(A)}`),className:"profile-chip-btn profile-chip-link",children:"Bekijk leeslijst"}):ne?o.jsx("span",{className:"profile-chip-badge",children:"Verzonden"}):o.jsx("button",{type:"button",onClick:()=>le(A),className:"profile-chip-btn",children:"Vriendschapsverzoek sturen"})]},A)})})}),o.jsx("h3",{className:"profile-subtitle",children:"Mijn Boekbuddies"}),(()=>{const A=new Set(Vf().map(ne=>ne.toLowerCase())),K=Fe.filter(ne=>A.has(ne.toLowerCase()));return K.length>0?o.jsx("div",{className:"profile-chips",children:K.map(ne=>o.jsxs("div",{className:"profile-chip",children:[o.jsx("span",{children:ne}),o.jsxs("div",{className:"profile-chip-actions",children:[o.jsx($t,{to:Ot(r,`/boekbuddy/${encodeURIComponent(ne)}`),className:"profile-chip-btn profile-chip-link",children:"Bekijk leeslijst"}),o.jsx("button",{type:"button",onClick:()=>De(ne),className:"profile-chip-btn profile-chip-btn-remove",title:"Ontvrienden",children:"Ontvrienden"})]})]},ne))}):o.jsx("p",{className:"profile-empty",children:"Nog geen Boekbuddies. Zoek hierboven en stuur een vriendschapsverzoek."})})()]}),o.jsxs("section",{className:"profile-card card",children:[o.jsx("h2",{className:"profile-card-title",children:"Planken"}),o.jsx("p",{className:"profile-card-desc",children:"Eigen planken om je boeken in te delen."}),o.jsxs("form",{onSubmit:nt,className:"profile-form-row",children:[o.jsxs("label",{className:"profile-field profile-field-grow",children:[o.jsx("span",{className:"profile-field-label visually-hidden",children:"Nieuwe plank"}),o.jsx("input",{type:"text",value:m,onChange:A=>v(A.target.value),placeholder:"Naam van de plank",className:"profile-input"})]}),o.jsx("button",{type:"submit",className:"primary-button",children:"Toevoegen"})]}),o.jsx("ul",{className:"profile-shelf-list",children:h.map(A=>o.jsx("li",{className:`profile-shelf-item ${y===A.id?"editing":""}`,children:y===A.id?o.jsxs("div",{className:"profile-shelf-edit",children:[o.jsx("input",{type:"text",value:k,onChange:K=>j(K.target.value),onKeyDown:K=>{K.key==="Enter"&&_(A.id),K.key==="Escape"&&z()},autoFocus:!0,className:"profile-input profile-shelf-edit-input"}),o.jsxs("div",{className:"profile-shelf-edit-actions",children:[o.jsx("button",{type:"button",onClick:()=>_(A.id),className:"link-button",children:"Opslaan"}),o.jsx("button",{type:"button",onClick:z,className:"link-button",children:"Annuleren"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs($t,{to:Ot(r,`/plank/${A.id}`),className:"profile-shelf-name",children:[A.name,A.system&&o.jsx("span",{className:"profile-shelf-tag",children:"Standaard"})]}),o.jsxs("div",{className:"profile-shelf-actions",children:[o.jsx("button",{type:"button",onClick:()=>rt(A),className:"link-button",children:"Bewerken"}),!A.system&&o.jsx("button",{type:"button",onClick:()=>B(A.id),className:"link-button destructive",children:"Verwijderen"})]})]})},A.id))})]}),T&&o.jsx("div",{className:"modal-backdrop shared-inbox-modal-backdrop",onClick:()=>{oe(!1),Me(null)},children:o.jsxs("div",{className:"modal shared-inbox-modal",onClick:A=>A.stopPropagation(),children:[o.jsxs("div",{className:"shared-inbox-modal-header",children:[o.jsx("h3",{children:"Gedeeld met jou"}),o.jsx("button",{type:"button",className:"shared-inbox-modal-close",onClick:()=>{oe(!1),Me(null)},"aria-label":"Sluiten",children:""})]}),je&&o.jsxs("p",{className:"shared-inbox-feedback shared-inbox-modal-feedback",children:[je.added>0&&o.jsxs("span",{children:[je.added," toegevoegd aan TBR."]}),je.skipped>0&&o.jsxs("span",{children:[" ",je.skipped," stond/stonden al in je lijst."]})]}),o.jsx("div",{className:"shared-inbox-modal-list",children:ae.map((A,K)=>o.jsxs("div",{className:"shared-inbox-modal-item",children:[o.jsxs("p",{className:"shared-inbox-from",children:[o.jsx("strong",{children:A.from}),A.shelfName?` deelde de plank "${A.shelfName}" (${A.books.length} boek${A.books.length===1?"":"en"})`:` deelde ${A.books.length} boek${A.books.length===1?"":"en"}`]}),o.jsx("div",{className:"shared-inbox-covers",children:A.books.map((ne,et)=>{var wt;const pt=((wt=F.get(K))==null?void 0:wt.has(et))??!1;return o.jsxs("button",{type:"button",className:`shared-inbox-cover-card ${pt?"selected":""}`,onClick:()=>ee(K,et),children:[o.jsxs("div",{className:"shared-inbox-cover-wrap",children:[ne.coverUrl?o.jsx("img",{src:ne.coverUrl,alt:""}):o.jsx("div",{className:"shared-inbox-cover-placeholder",children:ne.title.charAt(0).toUpperCase()}),pt&&o.jsx("span",{className:"shared-inbox-cover-check",children:""})]}),o.jsx("span",{className:"shared-inbox-cover-title",children:ne.title}),ne.authors&&o.jsx("span",{className:"shared-inbox-cover-author",children:ne.authors}),ne.seriesName&&o.jsx("span",{className:"shared-inbox-cover-series",children:ne.seriesName})]},et)})}),o.jsxs("div",{className:"shared-inbox-modal-actions",children:[o.jsx("button",{type:"button",className:"primary-button shared-inbox-btn",onClick:()=>{const ne=I0(K);Ce(ne),de(),Z(K),Me(null),setTimeout(()=>Ce(null),4e3)},children:"Alles naar TBR"}),Ae(K)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"primary-button shared-inbox-btn shared-inbox-btn-secondary",onClick:()=>{const ne=Array.from(F.get(K)??[]),et=L0(K,ne);Ce(et),de(),Z(K),setTimeout(()=>Ce(null),4e3)},children:["Geselecteerde (",Ae(K),") naar TBR"]}),o.jsxs("div",{className:"shared-inbox-shelf-wrap",children:[o.jsx("button",{type:"button",className:"secondary-button shared-inbox-btn",onClick:()=>{J===K&&Ge(null),Me(J===K?null:K)},children:"Geselecteerde naar plank"}),J===K&&o.jsx("div",{className:"shared-inbox-shelf-picker",children:(ft==null?void 0:ft.itemIndex)===K?o.jsxs("div",{className:"custom-shelf-status-picker",children:[o.jsxs("p",{className:"custom-shelf-status-label",children:['Status voor "',ft.shelfName,'"']}),["wil-ik-lezen","aan-het-lezen","gelezen"].map(ne=>o.jsx("button",{type:"button",className:"shared-inbox-shelf-option",onClick:()=>{const pt=Array.from(F.get(K)??[]).map(xt=>A.books[xt]),wt=xs(pt,{status:ne,shelfId:ft.shelfId});Ce(wt),Z(K),Me(null),pe(""),Ge(null),setTimeout(()=>Ce(null),4e3)},children:Y0[ne]},ne)),o.jsx("button",{type:"button",className:"link-button",onClick:()=>Ge(null),children:"Terug"})]}):o.jsxs(o.Fragment,{children:[h.map(ne=>o.jsx("button",{type:"button",className:"shared-inbox-shelf-option",onClick:()=>{if(ne.system){const pt=Array.from(F.get(K)??[]).map(xt=>A.books[xt]),wt=xs(pt,{shelfId:ne.id});Ce(wt),Z(K),Me(null),pe(""),setTimeout(()=>Ce(null),4e3)}else Ge({itemIndex:K,shelfId:ne.id,shelfName:ne.name})},children:ne.name},ne.id)),o.jsxs("div",{className:"shared-inbox-new-shelf",children:[o.jsx("input",{type:"text",value:ht,onChange:ne=>pe(ne.target.value),placeholder:"Nieuwe plank naam",className:"shared-inbox-new-shelf-input"}),o.jsx("button",{type:"button",className:"shared-inbox-shelf-option",disabled:!ht.trim(),onClick:()=>{const ne=ht.trim();if(!ne)return;const et={id:`shelf-${Date.now()}`,name:ne};te([...h,et]),Ge({itemIndex:K,shelfId:et.id,shelfName:et.name}),pe("")},children:"Nieuwe plank aanmaken"})]})]})})]})]}),o.jsx("button",{type:"button",className:"link-button shared-inbox-dismiss",onClick:()=>{$0(K),de(),Z(K),Me(null)},children:"Negeren"})]})]},`${A.from}-${A.sharedAt}-${K}`))})]})})]})}const Q0={"wil-ik-lezen":"Wil ik lezen","aan-het-lezen":"Aan het lezen",gelezen:"Gelezen"};function Zu(){const{username:s}=Nc(),n=fr(),r=s?decodeURIComponent(s):null,a=b.useMemo(()=>jn(),[]),u=r&&a.some(w=>w.toLowerCase()===r.toLowerCase()),[c,h]=b.useState([]),[p,m]=b.useState(!0);b.useEffect(()=>{if(!r){h([]),m(!1);return}m(!0),A0(r).then(w=>{h(w),m(!1)})},[r]);const[v,y]=b.useState("leeslijst"),[S,k]=b.useState("alle"),[j,P]=b.useState("desc"),[C,O]=b.useState(new Set),[W,M]=b.useState(!1),[V,q]=b.useState(null),[Le,ke]=b.useState(()=>Zr()),[xe,Fe]=b.useState(""),[Ze,tt]=b.useState(null),lt=b.useMemo(()=>c.filter(w=>w.status==="aan-het-lezen").sort((w,T)=>w.title.localeCompare(T.title)),[c]),dt=b.useMemo(()=>c.filter(w=>w.status==="wil-ik-lezen").sort((w,T)=>(w.order??0)-(T.order??0)||w.title.localeCompare(T.title)),[c]),ut=b.useMemo(()=>c.filter(w=>w.status==="gelezen"),[c]),Qe=b.useMemo(()=>{const w=new Set;return ut.forEach(T=>{T.seriesName&&w.add(T.seriesName)}),Array.from(w).sort()},[ut]),He=b.useMemo(()=>[...S==="alle"?ut:ut.filter(T=>T.seriesName===S)].sort((T,oe)=>{const je=T.finishedAt?new Date(T.finishedAt).getTime():0,Ce=oe.finishedAt?new Date(oe.finishedAt).getTime():0;return je===Ce?T.title.localeCompare(oe.title):j==="desc"?Ce-je:je-Ce}),[ut,S,j]);if(!r)return o.jsxs("div",{className:"page buddy-reading-page",children:[o.jsx("p",{children:"Geen Boekbuddy gekozen."}),o.jsx($t,{to:Ot(n,"/profiel"),className:"link-button",children:"Terug naar profiel"})]});if(!u)return o.jsxs("div",{className:"page buddy-reading-page",children:[o.jsxs("p",{children:["Je bent geen Boekbuddies met ",r,". Alleen Boekbuddies kunnen elkaars leeslijst bekijken."]}),o.jsx($t,{to:n==="/mobile"?"/mobile/profiel":Ot(n,"/profiel"),className:"link-button",children:"Terug naar profiel"})]});const ze=n==="/mobile"?"/mobile/profiel":Ot(n,"/profiel");function We(w){O(T=>{const oe=new Set(T);return oe.has(w.id)?oe.delete(w.id):oe.add(w.id),oe})}function re(){return c.filter(w=>C.has(w.id)).map(w=>({title:w.title,authors:w.authors,coverUrl:w.coverUrl}))}function fe(){const w=re();if(!w.length)return;const T=xs(w,{status:"wil-ik-lezen"});q(T),O(new Set),setTimeout(()=>q(null),3e3)}function ae(w,T){const oe=re();if(!oe.length)return;const je=xs(oe,T!=null?{status:T,shelfId:w}:{shelfId:w});q(je),O(new Set),M(!1),tt(null),setTimeout(()=>q(null),3e3)}return p?o.jsxs("div",{className:"page buddy-reading-page buddy-reading-mobile-layout",children:[o.jsxs("header",{className:"buddy-reading-header",children:[o.jsx($t,{to:ze,className:"buddy-reading-back",children:" Terug"}),o.jsxs("h1",{className:"buddy-reading-title",children:["Leeslijst van ",r]})]}),o.jsx("p",{className:"page-intro",children:"Laden"})]}):o.jsxs("div",{className:"page buddy-reading-page buddy-reading-mobile-layout",children:[o.jsxs("header",{className:"buddy-reading-header",children:[o.jsx($t,{to:ze,className:"buddy-reading-back",children:" Terug"}),o.jsxs("h1",{className:"buddy-reading-title",children:["Leeslijst van ",r]})]}),o.jsxs("section",{className:"card mobile-reading-lists",children:[o.jsxs("div",{className:"mobile-books-subtabs",role:"tablist","aria-label":"Leeslijst of uitgelezen",children:[o.jsx("button",{type:"button",role:"tab","aria-selected":v==="leeslijst",className:`mobile-subtab ${v==="leeslijst"?"active":""}`,onClick:()=>y("leeslijst"),children:"Leeslijst"}),o.jsx("button",{type:"button",role:"tab","aria-selected":v==="gelezen",className:`mobile-subtab ${v==="gelezen"?"active":""}`,onClick:()=>y("gelezen"),children:"Uitgelezen"})]}),(v==="leeslijst"||v==="gelezen")&&o.jsx("p",{className:"buddy-add-hint",children:"Tik op een boek om het te selecteren en toe te voegen aan je eigen TBR of plank."}),v==="leeslijst"&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"mobile-section-heading",children:"Aan het lezen"}),o.jsxs("div",{className:"mobile-reading-list",children:[lt.map(w=>{const T=C.has(w.id);return o.jsx("button",{type:"button",className:`mobile-reading-item mobile-reading-item-readonly buddy-book-selectable ${T?"selected":""}`,onClick:()=>We(w),children:o.jsxs("div",{className:"mobile-reading-main",children:[o.jsxs("div",{className:"mobile-reading-cover",children:[w.coverUrl?o.jsx("img",{src:w.coverUrl,alt:w.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:w.title.charAt(0).toUpperCase()}),T&&o.jsx("span",{className:"buddy-book-check",children:""})]}),o.jsxs("div",{className:"mobile-reading-text",children:[w.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[w.seriesName,w.seriesNumber!=null?` #${w.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:w.title}),o.jsx("div",{className:"mobile-reading-author",children:w.authors}),o.jsx("div",{className:"mobile-reading-pages",children:w.pageCount!=null?`${w.pageCount} blz`:""})]})]})},w.id)}),lt.length===0&&o.jsx("p",{className:"page-intro-small",children:"Geen boeken aan het lezen."})]}),o.jsx("h2",{className:"mobile-section-heading",children:"TBR"}),o.jsxs("div",{className:"mobile-reading-list",children:[dt.map(w=>{const T=C.has(w.id);return o.jsx("button",{type:"button",className:`mobile-reading-item mobile-reading-item-readonly buddy-book-selectable ${T?"selected":""}`,onClick:()=>We(w),children:o.jsxs("div",{className:"mobile-reading-main",children:[o.jsxs("div",{className:"mobile-reading-cover",children:[w.coverUrl?o.jsx("img",{src:w.coverUrl,alt:w.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:w.title.charAt(0).toUpperCase()}),T&&o.jsx("span",{className:"buddy-book-check",children:""})]}),o.jsxs("div",{className:"mobile-reading-text",children:[w.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[w.seriesName,w.seriesNumber!=null?` #${w.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:w.title}),o.jsx("div",{className:"mobile-reading-author",children:w.authors}),o.jsx("div",{className:"mobile-reading-pages",children:w.pageCount!=null?`${w.pageCount} blz`:""})]})]})},w.id)}),dt.length===0&&o.jsx("p",{className:"page-intro-small",children:"Geen TBR-boeken."})]})]}),v==="gelezen"&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"mobile-section-heading",children:"Uitgelezen"}),o.jsxs("div",{className:"mobile-reading-filters",children:[o.jsxs("div",{className:"mobile-reading-filter",children:[o.jsx("label",{className:"mobile-reading-filter-label",children:"Serie"}),o.jsxs("select",{className:"mobile-reading-filter-select",value:S,onChange:w=>k(w.target.value),children:[o.jsx("option",{value:"alle",children:"Alle series"}),Qe.map(w=>o.jsx("option",{value:w,children:w},w))]})]}),o.jsxs("div",{className:"mobile-reading-filter",children:[o.jsx("label",{className:"mobile-reading-filter-label",children:"Sorteren"}),o.jsxs("button",{type:"button",className:"mobile-reading-sort-toggle",onClick:()=>P(w=>w==="desc"?"asc":"desc"),children:["Datum uitgelezen "," ",j==="desc"?"Nieuwste eerst":"Oudste eerst"]})]})]}),o.jsxs("div",{className:"mobile-reading-list mobile-reading-list-simple",children:[He.map(w=>{const T=C.has(w.id);return o.jsx("button",{type:"button",className:`mobile-reading-item mobile-reading-item-simple mobile-reading-item-readonly buddy-book-selectable ${T?"selected":""}`,onClick:()=>We(w),children:o.jsxs("div",{className:"mobile-reading-main",children:[o.jsxs("div",{className:"mobile-reading-cover",children:[w.coverUrl?o.jsx("img",{src:w.coverUrl,alt:w.title}):o.jsx("div",{className:"mobile-reading-placeholder",children:w.title.charAt(0).toUpperCase()}),T&&o.jsx("span",{className:"buddy-book-check",children:""})]}),o.jsxs("div",{className:"mobile-reading-text",children:[w.seriesName&&o.jsxs("div",{className:"mobile-reading-series-badge",children:[w.seriesName,w.seriesNumber!=null?` #${w.seriesNumber}`:""]}),o.jsx("div",{className:"mobile-reading-title",children:w.title}),o.jsx("div",{className:"mobile-reading-author",children:w.authors}),w.finishedAt&&o.jsxs("div",{className:"mobile-reading-finished",children:["Uitgelezen: ",w.finishedAt]})]})]})},w.id)}),He.length===0&&o.jsx("p",{className:"page-intro-small",children:ut.length===0?"Nog geen uitgelezen boeken.":"Geen boeken in deze serie."})]})]}),C.size>0&&o.jsxs("div",{className:"buddy-selection-bar",children:[o.jsxs("span",{className:"buddy-selection-count",children:[C.size," geselecteerd"]}),o.jsx("button",{type:"button",className:"primary-button buddy-selection-btn",onClick:fe,children:"Toevoegen aan mijn TBR"}),o.jsx("button",{type:"button",className:"secondary-button buddy-selection-btn",onClick:()=>M(!0),children:"Toevoegen aan plank"}),o.jsx("button",{type:"button",className:"link-button buddy-selection-clear",onClick:()=>O(new Set),children:"Selectie wissen"}),W&&o.jsxs("div",{className:"buddy-shelf-picker",children:[o.jsx("p",{className:"buddy-shelf-picker-title",children:Ze?"Kies status voor deze plank":"Kies een plank"}),Ze?o.jsxs("div",{className:"custom-shelf-status-picker",children:[["wil-ik-lezen","aan-het-lezen","gelezen"].map(w=>o.jsx("button",{type:"button",className:"buddy-shelf-option",onClick:()=>ae(Ze,w),children:Q0[w]},w)),o.jsx("button",{type:"button",className:"link-button",onClick:()=>tt(null),children:"Terug"})]}):o.jsxs(o.Fragment,{children:[Le.map(w=>o.jsx("button",{type:"button",className:"buddy-shelf-option",onClick:()=>{w.system?ae(w.id):tt(w.id)},children:w.name},w.id)),o.jsxs("div",{className:"buddy-new-shelf",children:[o.jsx("input",{type:"text",value:xe,onChange:w=>Fe(w.target.value),placeholder:"Nieuwe plank naam",className:"buddy-new-shelf-input"}),o.jsx("button",{type:"button",className:"buddy-shelf-option buddy-new-shelf-btn",disabled:!xe.trim(),onClick:()=>{const w=xe.trim();if(!w)return;const T={id:`shelf-${Date.now()}`,name:w},oe=[...Le,T];mi(oe),ke(oe),tt(T.id),Fe("")},children:"Nieuwe plank aanmaken"})]})]}),!Ze&&o.jsx("button",{type:"button",className:"link-button",onClick:()=>{M(!1),Fe(""),tt(null)},children:"Annuleren"})]})]}),V&&o.jsxs("p",{className:"buddy-add-result",children:[V.added>0&&o.jsxs("span",{children:[V.added," toegevoegd aan je bibliotheek."]}),V.skipped>0&&o.jsxs("span",{children:[" ",V.skipped," stond/stonden al in je lijst."]})]})]})]})}function X0(){const s=ns(),n=hr(),r=Vp(s.pathname),a=r==="/mobile",[u,c]=b.useState(()=>!!At()),[h,p]=b.useState(()=>es().length>0);b.useEffect(()=>{(async()=>await g0()&&(await zp(),await Bp()))()},[]),b.useEffect(()=>{const y=window;!!y.Capacitor&&(typeof y.Capacitor.isNativePlatform=="function"?y.Capacitor.isNativePlatform():!0)&&!s.pathname.startsWith("/mobile")&&n("/mobile",{replace:!0})},[s.pathname,n]),b.useEffect(()=>{const y=()=>c(!!At());return window.addEventListener("bt_login",y),()=>window.removeEventListener("bt_login",y)},[]),b.useEffect(()=>{function y(){p(es().length>0)}function S(j){var P;(P=j.key)!=null&&P.startsWith("bt_shared_inbox_v1")&&y()}function k(){y()}return window.addEventListener("storage",S),window.addEventListener("bt_shared_inbox_updated",k),y(),()=>{window.removeEventListener("storage",S),window.removeEventListener("bt_shared_inbox_updated",k)}},[]);const m=()=>c(!0),v=()=>{pc(),c(!1)};return o.jsxs("div",{className:`app-root ${a?"app-root-mobile":""}`,children:[!a&&o.jsxs("header",{className:"app-header",children:[o.jsxs("div",{className:"app-header-left",children:[o.jsx("span",{className:"logo",children:"Boek Tracker"}),u&&o.jsxs("nav",{className:"nav",children:[o.jsx($t,{to:Ot(r,"/dashboard"),children:"Dashboard"}),o.jsx($t,{to:Ot(r,"/boeken"),children:"Boeken"}),o.jsx($t,{to:Ot(r,"/planken"),children:"Planken"}),o.jsx($t,{to:Ot(r,"/challenge"),children:"Lees-challenge"})]})]}),o.jsx("div",{className:"app-header-right",children:u?o.jsx("button",{onClick:v,className:"secondary-button",children:"Uitloggen"}):o.jsx($t,{to:Ot(r,"/login"),className:"secondary-button",children:"Inloggen"})})]}),o.jsx("main",{className:"app-main",children:o.jsxs(jv,{children:[o.jsx(ct,{path:"/",element:o.jsx(bt,{to:u?typeof window.Capacitor<"u"?"/mobile/boeken":"/dashboard":"/login",replace:!0})}),o.jsx(ct,{path:"/login",element:o.jsx(Ku,{onLogin:m})}),o.jsx(ct,{path:"/register",element:o.jsx(qu,{onLogin:m})}),o.jsx(ct,{path:"/dashboard",element:u?o.jsx(Oo,{mode:"toggle"}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/dashboard/web",element:u?o.jsx(Oo,{mode:"desktop"}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/boeken",element:u?o.jsx(Ro,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/boek/:id",element:u?o.jsx(Yu,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/planken",element:u?o.jsx(Hu,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/plank/:shelfId",element:u?o.jsx(Gu,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/boekbuddy/:username",element:u?o.jsx(Zu,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/challenge",element:u?o.jsx(Vu,{}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/profiel",element:u?o.jsx(Xu,{onLogout:v}):o.jsx(bt,{to:"/login",replace:!0})}),o.jsx(ct,{path:"/web",element:o.jsx(bt,{to:u?"/web/dashboard":"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/login",element:o.jsx(Ku,{onLogin:m})}),o.jsx(ct,{path:"/web/register",element:o.jsx(qu,{onLogin:m})}),o.jsx(ct,{path:"/web/dashboard",element:u?o.jsx(Oo,{mode:"desktop"}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/boeken",element:u?o.jsx(Ro,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/boek/:id",element:u?o.jsx(Yu,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/planken",element:u?o.jsx(Hu,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/plank/:shelfId",element:u?o.jsx(Gu,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/boekbuddy/:username",element:u?o.jsx(Zu,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/challenge",element:u?o.jsx(Vu,{}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/web/profiel",element:u?o.jsx(Xu,{onLogout:v}):o.jsx(bt,{to:"/web/login",replace:!0})}),o.jsx(ct,{path:"/mobile",element:o.jsx(bt,{to:u?"/mobile/boeken":"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/login",element:o.jsx(Ku,{onLogin:m})}),o.jsx(ct,{path:"/mobile/register",element:o.jsx(qu,{onLogin:m})}),o.jsx(ct,{path:"/mobile/dashboard",element:o.jsx(bt,{to:u?"/mobile/boeken":"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/boeken",element:u?o.jsx(Oo,{mode:"mobile"}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/zoeken",element:u?o.jsx(Ro,{mode:"search"}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/bibliotheek",element:u?o.jsx(Ro,{mode:"library"}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/plank/:shelfId",element:u?o.jsx(Gu,{}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/boekbuddy/:username",element:u?o.jsx(Zu,{}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/boek/:id",element:u?o.jsx(Yu,{}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/planken",element:u?o.jsx(Hu,{}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/challenge",element:u?o.jsx(Vu,{}):o.jsx(bt,{to:"/mobile/login",replace:!0})}),o.jsx(ct,{path:"/mobile/profiel",element:u?o.jsx(Xu,{onLogout:v}):o.jsx(bt,{to:"/mobile/login",replace:!0})})]})}),a&&u&&o.jsxs("nav",{className:"mobile-tabbar","aria-label":"Mobiele navigatie",children:[o.jsxs($t,{to:"/mobile/boeken",className:`mobile-tab ${s.pathname.startsWith("/mobile/boeken")||s.pathname.startsWith("/mobile/boek/")?"active":""}`,children:[o.jsx("span",{className:"mobile-tab-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"mobile-tab-label",children:"Boeken"})]}),o.jsxs($t,{to:"/mobile/zoeken",className:`mobile-tab ${s.pathname.startsWith("/mobile/zoeken")?"active":""}`,children:[o.jsx("span",{className:"mobile-tab-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"mobile-tab-label",children:"Zoeken"})]}),o.jsxs($t,{to:"/mobile/challenge",className:`mobile-tab ${s.pathname.startsWith("/mobile/challenge")?"active":""}`,children:[o.jsx("span",{className:"mobile-tab-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"mobile-tab-label",children:"Lees-challenge"})]}),o.jsxs($t,{to:"/mobile/profiel",className:`mobile-tab ${s.pathname.startsWith("/mobile/profiel")?"active":""}`,children:[o.jsxs("span",{className:"mobile-tab-icon","aria-hidden":"true",children:["",h&&o.jsx("span",{className:"mobile-tab-icon-badge"})]}),o.jsx("span",{className:"mobile-tab-label",children:"Profiel"})]})]})]})}Ag.createRoot(document.getElementById("root")).render(o.jsx(ap.StrictMode,{children:o.jsx(Av,{children:o.jsx(X0,{})})}));
